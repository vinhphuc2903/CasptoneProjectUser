!function(n){function t(r){if(i[r])return i[r].exports;var u=i[r]={i:r,l:!1,exports:{}};return n[r].call(u.exports,u,u.exports,t),u.l=!0,u.exports}var i={};t.m=n;t.c=i;t.d=function(n,i,r){t.o(n,i)||Object.defineProperty(n,i,{enumerable:!0,get:r})};t.r=function(n){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});Object.defineProperty(n,"__esModule",{value:!0})};t.t=function(n,i){var r,u;if((1&i&&(n=t(n)),8&i)||4&i&&"object"==typeof n&&n&&n.__esModule)return n;if(r=Object.create(null),t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:n}),2&i&&"string"!=typeof n)for(u in n)t.d(r,u,function(t){return n[t]}.bind(null,u));return r};t.n=function(n){var i=n&&n.__esModule?function(){return n.default}:function(){return n};return t.d(i,"a",i),i};t.o=function(n,t){return Object.prototype.hasOwnProperty.call(n,t)};t.p="";t(t.s=18)}([function(n){n.exports=JSON.parse('{"ar":{"latex":"LaTeX","cancel":"إلغاء","accept":"موا�?ق","manual":"الدليل","insert_math":"إدراج صيغة رياضية - MathType","insert_chem":"Insert a chemistry formula - ChemType","minimize":"Minimize","maximize":"Maximize","fullscreen":"Full-screen","exit_fullscreen":"Exit full-screen","close":"Close","mathtype":"MathType","title_modalwindow":"MathType modal window","close_modal_warning":"Are you sure you want to leave? The changes you made will be lost.","latex_name_label":"Latex Formula","browser_no_compatible":"Your browser is not compatible with AJAX technology. Please, use the latest version of Mozilla Firefox.","error_convert_accessibility":"Error converting from MathML to accessible text.","exception_cross_site":"Cross site scripting is only allowed for HTTP.","exception_high_surrogate":"High surrogate not followed by low surrogate in fixedCharCodeAt()","exception_string_length":"Invalid string. Length must be a multiple of 4","exception_key_nonobject":"Object.keys called on non-object","exception_null_or_undefined":" this is null or not defined","exception_not_function":" is not a function","exception_invalid_date_format":"Invalid date format : ","exception_casting":"Cannot cast ","exception_casting_to":" to "},"ca":{"latex":"LaTeX","cancel":"Cancel·lar","accept":"Acceptar","manual":"Manual","insert_math":"Inserir fórmula matemàtica - MathType","insert_chem":"Insert a chemistry formula - ChemType","minimize":"Minimize","maximize":"Maximize","fullscreen":"Full-screen","exit_fullscreen":"Exit full-screen","close":"Close","mathtype":"MathType","title_modalwindow":"MathType modal window","close_modal_warning":"Are you sure you want to leave? The changes you made will be lost.","latex_name_label":"Latex Formula","browser_no_compatible":"Your browser is not compatible with AJAX technology. Please, use the latest version of Mozilla Firefox.","error_convert_accessibility":"Error converting from MathML to accessible text.","exception_cross_site":"Cross site scripting is only allowed for HTTP.","exception_high_surrogate":"High surrogate not followed by low surrogate in fixedCharCodeAt()","exception_string_length":"Invalid string. Length must be a multiple of 4","exception_key_nonobject":"Object.keys called on non-object","exception_null_or_undefined":" this is null or not defined","exception_not_function":" is not a function","exception_invalid_date_format":"Invalid date format : ","exception_casting":"Cannot cast ","exception_casting_to":" to "},"cs":{"latex":"LaTeX","cancel":"Storno","accept":"OK","manual":"Příru�?ka","insert_math":"Vložit matematický vzorec - MathType","insert_chem":"Insert a chemistry formula - ChemType","minimize":"Minimize","maximize":"Maximize","fullscreen":"Full-screen","exit_fullscreen":"Exit full-screen","close":"Close","mathtype":"MathType","title_modalwindow":"MathType modal window","close_modal_warning":"Are you sure you want to leave? The changes you made will be lost.","latex_name_label":"Latex Formula","browser_no_compatible":"Your browser is not compatible with AJAX technology. Please, use the latest version of Mozilla Firefox.","error_convert_accessibility":"Error converting from MathML to accessible text.","exception_cross_site":"Cross site scripting is only allowed for HTTP.","exception_high_surrogate":"High surrogate not followed by low surrogate in fixedCharCodeAt()","exception_string_length":"Invalid string. Length must be a multiple of 4","exception_key_nonobject":"Object.keys called on non-object","exception_null_or_undefined":" this is null or not defined","exception_not_function":" is not a function","exception_invalid_date_format":"Invalid date format : ","exception_casting":"Cannot cast ","exception_casting_to":" to "},"da":{"latex":"LaTeX","cancel":"Annuller","accept":"OK","manual":"Brugervejledning","insert_math":"Indsæt matematisk formel - MathType","insert_chem":"Insert a chemistry formula - ChemType","minimize":"Minimize","maximize":"Maximize","fullscreen":"Full-screen","exit_fullscreen":"Exit full-screen","close":"Close","mathtype":"MathType","title_modalwindow":"MathType modal window","close_modal_warning":"Are you sure you want to leave? The changes you made will be lost.","latex_name_label":"Latex Formula","browser_no_compatible":"Your browser is not compatible with AJAX technology. Please, use the latest version of Mozilla Firefox.","error_convert_accessibility":"Error converting from MathML to accessible text.","exception_cross_site":"Cross site scripting is only allowed for HTTP.","exception_high_surrogate":"High surrogate not followed by low surrogate in fixedCharCodeAt()","exception_string_length":"Invalid string. Length must be a multiple of 4","exception_key_nonobject":"Object.keys called on non-object","exception_null_or_undefined":" this is null or not defined","exception_not_function":" is not a function","exception_invalid_date_format":"Invalid date format : ","exception_casting":"Cannot cast ","exception_casting_to":" to "},"de":{"latex":"LaTeX","cancel":"Abbrechen","accept":"OK","manual":"Handbuch","insert_math":"Mathematische Formel einfügen - MathType","insert_chem":"Insert a chemistry formula - ChemType","minimize":"Minimize","maximize":"Maximize","fullscreen":"Full-screen","exit_fullscreen":"Exit full-screen","close":"Close","mathtype":"MathType","title_modalwindow":"MathType modal window","close_modal_warning":"Are you sure you want to leave? The changes you made will be lost.","latex_name_label":"Latex Formula","browser_no_compatible":"Your browser is not compatible with AJAX technology. Please, use the latest version of Mozilla Firefox.","error_convert_accessibility":"Error converting from MathML to accessible text.","exception_cross_site":"Cross site scripting is only allowed for HTTP.","exception_high_surrogate":"High surrogate not followed by low surrogate in fixedCharCodeAt()","exception_string_length":"Invalid string. Length must be a multiple of 4","exception_key_nonobject":"Object.keys called on non-object","exception_null_or_undefined":" this is null or not defined","exception_not_function":" is not a function","exception_invalid_date_format":"Invalid date format : ","exception_casting":"Cannot cast ","exception_casting_to":" to "},"en":{"latex":"LaTeX","cancel":"Cancel","accept":"OK","manual":"Manual","insert_math":"Insert a math equation - MathType","insert_chem":"Insert a chemistry formula - ChemType","minimize":"Minimize","maximize":"Maximize","fullscreen":"Full-screen","exit_fullscreen":"Exit full-screen","close":"Close","mathtype":"MathType","title_modalwindow":"MathType modal window","close_modal_warning":"Are you sure you want to leave? The changes you made will be lost.","latex_name_label":"Latex Formula","browser_no_compatible":"Your browser is not compatible with AJAX technology. Please, use the latest version of Mozilla Firefox.","error_convert_accessibility":"Error converting from MathML to accessible text.","exception_cross_site":"Cross site scripting is only allowed for HTTP.","exception_high_surrogate":"High surrogate not followed by low surrogate in fixedCharCodeAt()","exception_string_length":"Invalid string. Length must be a multiple of 4","exception_key_nonobject":"Object.keys called on non-object","exception_null_or_undefined":" this is null or not defined","exception_not_function":" is not a function","exception_invalid_date_format":"Invalid date format : ","exception_casting":"Cannot cast ","exception_casting_to":" to "},"es":{"latex":"LaTeX","cancel":"Cancelar","accept":"Aceptar","manual":"Manual","insert_math":"Insertar fórmula matemática - MathType","insert_chem":"Insert a chemistry formula - ChemType","minimize":"Minimize","maximize":"Maximize","fullscreen":"Full-screen","exit_fullscreen":"Exit full-screen","close":"Close","mathtype":"MathType","title_modalwindow":"MathType modal window","close_modal_warning":"Are you sure you want to leave? The changes you made will be lost.","latex_name_label":"Latex Formula","browser_no_compatible":"Your browser is not compatible with AJAX technology. Please, use the latest version of Mozilla Firefox.","error_convert_accessibility":"Error converting from MathML to accessible text.","exception_cross_site":"Cross site scripting is only allowed for HTTP.","exception_high_surrogate":"High surrogate not followed by low surrogate in fixedCharCodeAt()","exception_string_length":"Invalid string. Length must be a multiple of 4","exception_key_nonobject":"Object.keys called on non-object","exception_null_or_undefined":" this is null or not defined","exception_not_function":" is not a function","exception_invalid_date_format":"Invalid date format : ","exception_casting":"Cannot cast ","exception_casting_to":" to "},"et":{"latex":"LaTeX","cancel":"Loobu","accept":"OK","manual":"Käsiraamat","insert_math":"Lisa matemaatiline valem – WIRIS","insert_chem":"Insert a chemistry formula - ChemType","minimize":"Minimize","maximize":"Maximize","fullscreen":"Full-screen","exit_fullscreen":"Exit full-screen","close":"Close","mathtype":"MathType","title_modalwindow":"MathType modal window","close_modal_warning":"Are you sure you want to leave? The changes you made will be lost.","latex_name_label":"Latex Formula","browser_no_compatible":"Your browser is not compatible with AJAX technology. Please, use the latest version of Mozilla Firefox.","error_convert_accessibility":"Error converting from MathML to accessible text.","exception_cross_site":"Cross site scripting is only allowed for HTTP.","exception_high_surrogate":"High surrogate not followed by low surrogate in fixedCharCodeAt()","exception_string_length":"Invalid string. Length must be a multiple of 4","exception_key_nonobject":"Object.keys called on non-object","exception_null_or_undefined":" this is null or not defined","exception_not_function":" is not a function","exception_invalid_date_format":"Invalid date format : ","exception_casting":"Cannot cast ","exception_casting_to":" to "},"eu":{"latex":"LaTeX","cancel":"Ezeztatu","accept":"Onartu","manual":"Gida","insert_math":"Txertatu matematikako formula - MathType","insert_chem":"Insert a chemistry formula - ChemType","minimize":"Minimize","maximize":"Maximize","fullscreen":"Full-screen","exit_fullscreen":"Exit full-screen","close":"Close","mathtype":"MathType","title_modalwindow":"MathType modal window","close_modal_warning":"Are you sure you want to leave? The changes you made will be lost.","latex_name_label":"Latex Formula","browser_no_compatible":"Your browser is not compatible with AJAX technology. Please, use the latest version of Mozilla Firefox.","error_convert_accessibility":"Error converting from MathML to accessible text.","exception_cross_site":"Cross site scripting is only allowed for HTTP.","exception_high_surrogate":"High surrogate not followed by low surrogate in fixedCharCodeAt()","exception_string_length":"Invalid string. Length must be a multiple of 4","exception_key_nonobject":"Object.keys called on non-object","exception_null_or_undefined":" this is null or not defined","exception_not_function":" is not a function","exception_invalid_date_format":"Invalid date format : ","exception_casting":"Cannot cast ","exception_casting_to":" to "},"fi":{"latex":"LaTeX","cancel":"Peruuta","accept":"OK","manual":"Manual","insert_math":"Liitä matemaattinen kaava - MathType","insert_chem":"Insert a chemistry formula - ChemType","minimize":"Minimize","maximize":"Maximize","fullscreen":"Full-screen","exit_fullscreen":"Exit full-screen","close":"Close","mathtype":"MathType","title_modalwindow":"MathType modal window","close_modal_warning":"Are you sure you want to leave? The changes you made will be lost.","latex_name_label":"Latex Formula","browser_no_compatible":"Your browser is not compatible with AJAX technology. Please, use the latest version of Mozilla Firefox.","error_convert_accessibility":"Error converting from MathML to accessible text.","exception_cross_site":"Cross site scripting is only allowed for HTTP.","exception_high_surrogate":"High surrogate not followed by low surrogate in fixedCharCodeAt()","exception_string_length":"Invalid string. Length must be a multiple of 4","exception_key_nonobject":"Object.keys called on non-object","exception_null_or_undefined":" this is null or not defined","exception_not_function":" is not a function","exception_invalid_date_format":"Invalid date format : ","exception_casting":"Cannot cast ","exception_casting_to":" to "},"fr":{"latex":"LaTeX","cancel":"Annuler","accept":"OK","manual":"Manuel","insert_math":"Insérer une formule mathématique - MathType","insert_chem":"Insert a chemistry formula - ChemType","minimize":"Minimize","maximize":"Maximize","fullscreen":"Full-screen","exit_fullscreen":"Exit full-screen","close":"Close","mathtype":"MathType","title_modalwindow":"MathType modal window","close_modal_warning":"Are you sure you want to leave? The changes you made will be lost.","latex_name_label":"Latex Formula","browser_no_compatible":"Your browser is not compatible with AJAX technology. Please, use the latest version of Mozilla Firefox.","error_convert_accessibility":"Error converting from MathML to accessible text.","exception_cross_site":"Cross site scripting is only allowed for HTTP.","exception_high_surrogate":"High surrogate not followed by low surrogate in fixedCharCodeAt()","exception_string_length":"Invalid string. Length must be a multiple of 4","exception_key_nonobject":"Object.keys called on non-object","exception_null_or_undefined":" this is null or not defined","exception_not_function":" is not a function","exception_invalid_date_format":"Invalid date format : ","exception_casting":"Cannot cast ","exception_casting_to":" to "},"gl":{"latex":"LaTeX","cancel":"Cancelar","accept":"Aceptar","manual":"Manual","insert_math":"Inserir fórmula matemática - MathType","insert_chem":"Insert a chemistry formula - ChemType","minimize":"Minimize","maximize":"Maximize","fullscreen":"Full-screen","exit_fullscreen":"Exit full-screen","close":"Close","mathtype":"MathType","title_modalwindow":"MathType modal window","close_modal_warning":"Are you sure you want to leave? The changes you made will be lost.","latex_name_label":"Latex Formula","browser_no_compatible":"Your browser is not compatible with AJAX technology. Please, use the latest version of Mozilla Firefox.","error_convert_accessibility":"Error converting from MathML to accessible text.","exception_cross_site":"Cross site scripting is only allowed for HTTP.","exception_high_surrogate":"High surrogate not followed by low surrogate in fixedCharCodeAt()","exception_string_length":"Invalid string. Length must be a multiple of 4","exception_key_nonobject":"Object.keys called on non-object","exception_null_or_undefined":" this is null or not defined","exception_not_function":" is not a function","exception_invalid_date_format":"Invalid date format : ","exception_casting":"Cannot cast ","exception_casting_to":" to "},"he":{"latex":"LaTeX","cancel":"ביטול","accept":"�?ישור","manual":"מדריך","insert_math":"הוסף נוסחה מתמטית - MathType","insert_chem":"הוספת כתיבה כימית - ChemType","minimize":"מזערי","maximize":"מרבי","fullscreen":"מסך מל�?","exit_fullscreen":"יצי�?ה ממצב מסך מל�?","close":"סגירה","mathtype":"MathType","title_modalwindow":"MathType modal window","close_modal_warning":"ה�?�? לצ�?ת? שינויי�? �?שר בוצעו ימחקו.","latex_name_label":"Latex Formula","browser_no_compatible":"Your browser is not compatible with AJAX technology. Please, use the latest version of Mozilla Firefox.","error_convert_accessibility":"Error converting from MathML to accessible text.","exception_cross_site":"Cross site scripting is only allowed for HTTP.","exception_high_surrogate":"High surrogate not followed by low surrogate in fixedCharCodeAt()","exception_string_length":"Invalid string. Length must be a multiple of 4","exception_key_nonobject":"Object.keys called on non-object","exception_null_or_undefined":" this is null or not defined","exception_not_function":" �?יננה פונקציה","exception_invalid_date_format":"תסדיר ת�?ריך �?ינו תקין : ","exception_casting":"ל�? ניתן להמיר ","exception_casting_to":" ל "},"hr":{"latex":"LaTeX","cancel":"Poništi","accept":"U redu","manual":"Priru�?nik","insert_math":"Umetnite matemati�?ku formulu - MathType","insert_chem":"Insert a chemistry formula - ChemType","minimize":"Minimize","maximize":"Maximize","fullscreen":"Full-screen","exit_fullscreen":"Exit full-screen","close":"Close","mathtype":"MathType","title_modalwindow":"MathType modal window","close_modal_warning":"Are you sure you want to leave? The changes you made will be lost.","latex_name_label":"Latex Formula","browser_no_compatible":"Your browser is not compatible with AJAX technology. Please, use the latest version of Mozilla Firefox.","error_convert_accessibility":"Error converting from MathML to accessible text.","exception_cross_site":"Cross site scripting is only allowed for HTTP.","exception_high_surrogate":"High surrogate not followed by low surrogate in fixedCharCodeAt()","exception_string_length":"Invalid string. Length must be a multiple of 4","exception_key_nonobject":"Object.keys called on non-object","exception_null_or_undefined":" this is null or not defined","exception_not_function":" is not a function","exception_invalid_date_format":"Invalid date format : ","exception_casting":"Cannot cast ","exception_casting_to":" to "},"hu":{"latex":"LaTeX","cancel":"Mégsem","accept":"OK","manual":"Kézikönyv","insert_math":"Matematikai képlet beszúrása - MathType","insert_chem":"Insert a chemistry formula - ChemType","minimize":"Minimize","maximize":"Maximize","fullscreen":"Full-screen","exit_fullscreen":"Exit full-screen","close":"Close","mathtype":"MathType","title_modalwindow":"MathType modal window","close_modal_warning":"Are you sure you want to leave? The changes you made will be lost.","latex_name_label":"Latex Formula","browser_no_compatible":"Your browser is not compatible with AJAX technology. Please, use the latest version of Mozilla Firefox.","error_convert_accessibility":"Error converting from MathML to accessible text.","exception_cross_site":"Cross site scripting is only allowed for HTTP.","exception_high_surrogate":"High surrogate not followed by low surrogate in fixedCharCodeAt()","exception_string_length":"Invalid string. Length must be a multiple of 4","exception_key_nonobject":"Object.keys called on non-object","exception_null_or_undefined":" this is null or not defined","exception_not_function":" is not a function","exception_invalid_date_format":"Invalid date format : ","exception_casting":"Cannot cast ","exception_casting_to":" to "},"it":{"latex":"LaTeX","cancel":"Annulla","accept":"Accetta","manual":"Manuale","insert_math":"Inserisci una formula matematica - MathType","insert_chem":"Insert a chemistry formula - ChemType","minimize":"Minimize","maximize":"Maximize","fullscreen":"Full-screen","exit_fullscreen":"Exit full-screen","close":"Close","mathtype":"MathType","title_modalwindow":"MathType modal window","close_modal_warning":"Are you sure you want to leave? The changes you made will be lost.","latex_name_label":"Latex Formula","browser_no_compatible":"Your browser is not compatible with AJAX technology. Please, use the latest version of Mozilla Firefox.","error_convert_accessibility":"Error converting from MathML to accessible text.","exception_cross_site":"Cross site scripting is only allowed for HTTP.","exception_high_surrogate":"High surrogate not followed by low surrogate in fixedCharCodeAt()","exception_string_length":"Invalid string. Length must be a multiple of 4","exception_key_nonobject":"Object.keys called on non-object","exception_null_or_undefined":" this is null or not defined","exception_not_function":" is not a function","exception_invalid_date_format":"Invalid date format : ","exception_casting":"Cannot cast ","exception_casting_to":" to "},"ja":{"latex":"LaTeX","cancel":"キャンセル","accept":"OK","manual":"マニュアル","insert_math":"数�?を挿入 - MathType","insert_chem":"Insert a chemistry formula - ChemType","minimize":"Minimize","maximize":"Maximize","fullscreen":"Full-screen","exit_fullscreen":"Exit full-screen","close":"Close","mathtype":"MathType","title_modalwindow":"MathType modal window","close_modal_warning":"Are you sure you want to leave? The changes you made will be lost.","latex_name_label":"Latex Formula","browser_no_compatible":"Your browser is not compatible with AJAX technology. Please, use the latest version of Mozilla Firefox.","error_convert_accessibility":"Error converting from MathML to accessible text.","exception_cross_site":"Cross site scripting is only allowed for HTTP.","exception_high_surrogate":"High surrogate not followed by low surrogate in fixedCharCodeAt()","exception_string_length":"Invalid string. Length must be a multiple of 4","exception_key_nonobject":"Object.keys called on non-object","exception_null_or_undefined":" this is null or not defined","exception_not_function":" is not a function","exception_invalid_date_format":"Invalid date format : ","exception_casting":"Cannot cast ","exception_casting_to":" to "},"ko":{"latex":"LaTeX","cancel":"취소","accept":"승�?�","manual":"설명서","insert_math":"수학 공�? 삽입 - MathType","insert_chem":"Insert a chemistry formula - ChemType","minimize":"Minimize","maximize":"Maximize","fullscreen":"Full-screen","exit_fullscreen":"Exit full-screen","close":"Close","mathtype":"MathType","title_modalwindow":"MathType modal window","close_modal_warning":"Are you sure you want to leave? The changes you made will be lost.","latex_name_label":"Latex Formula","browser_no_compatible":"Your browser is not compatible with AJAX technology. Please, use the latest version of Mozilla Firefox.","error_convert_accessibility":"Error converting from MathML to accessible text.","exception_cross_site":"Cross site scripting is only allowed for HTTP.","exception_high_surrogate":"High surrogate not followed by low surrogate in fixedCharCodeAt()","exception_string_length":"Invalid string. Length must be a multiple of 4","exception_key_nonobject":"Object.keys called on non-object","exception_null_or_undefined":" this is null or not defined","exception_not_function":" is not a function","exception_invalid_date_format":"Invalid date format : ","exception_casting":"Cannot cast ","exception_casting_to":" to "},"nl":{"latex":"LaTeX","cancel":"Annuleren","accept":"OK","manual":"Handleiding","insert_math":"Wiskundige formule invoegen - MathType","insert_chem":"Insert a chemistry formula - ChemType","minimize":"Minimize","maximize":"Maximize","fullscreen":"Full-screen","exit_fullscreen":"Exit full-screen","close":"Close","mathtype":"MathType","title_modalwindow":"MathType modal window","close_modal_warning":"Are you sure you want to leave? The changes you made will be lost.","latex_name_label":"Latex Formula","browser_no_compatible":"Your browser is not compatible with AJAX technology. Please, use the latest version of Mozilla Firefox.","error_convert_accessibility":"Error converting from MathML to accessible text.","exception_cross_site":"Cross site scripting is only allowed for HTTP.","exception_high_surrogate":"High surrogate not followed by low surrogate in fixedCharCodeAt()","exception_string_length":"Invalid string. Length must be a multiple of 4","exception_key_nonobject":"Object.keys called on non-object","exception_null_or_undefined":" this is null or not defined","exception_not_function":" is not a function","exception_invalid_date_format":"Invalid date format : ","exception_casting":"Cannot cast ","exception_casting_to":" to "},"no":{"latex":"LaTeX","cancel":"Avbryt","accept":"OK","manual":"Håndbok","insert_math":"Sett inn matematikkformel - MathType","insert_chem":"Insert a chemistry formula - ChemType","minimize":"Minimize","maximize":"Maximize","fullscreen":"Full-screen","exit_fullscreen":"Exit full-screen","close":"Close","mathtype":"MathType","title_modalwindow":"MathType modal window","close_modal_warning":"Are you sure you want to leave? The changes you made will be lost.","latex_name_label":"Latex Formula","browser_no_compatible":"Your browser is not compatible with AJAX technology. Please, use the latest version of Mozilla Firefox.","error_convert_accessibility":"Error converting from MathML to accessible text.","exception_cross_site":"Cross site scripting is only allowed for HTTP.","exception_high_surrogate":"High surrogate not followed by low surrogate in fixedCharCodeAt()","exception_string_length":"Invalid string. Length must be a multiple of 4","exception_key_nonobject":"Object.keys called on non-object","exception_null_or_undefined":" this is null or not defined","exception_not_function":" is not a function","exception_invalid_date_format":"Invalid date format : ","exception_casting":"Cannot cast ","exception_casting_to":" to "},"pl":{"latex":"LaTeX","cancel":"Anuluj","accept":"OK","manual":"Instrukcja","insert_math":"Wstaw formułę matematyczną - MathType","insert_chem":"Insert a chemistry formula - ChemType","minimize":"Minimize","maximize":"Maximize","fullscreen":"Full-screen","exit_fullscreen":"Exit full-screen","close":"Close","mathtype":"MathType","title_modalwindow":"MathType modal window","close_modal_warning":"Are you sure you want to leave? The changes you made will be lost.","latex_name_label":"Latex Formula","browser_no_compatible":"Your browser is not compatible with AJAX technology. Please, use the latest version of Mozilla Firefox.","error_convert_accessibility":"Error converting from MathML to accessible text.","exception_cross_site":"Cross site scripting is only allowed for HTTP.","exception_high_surrogate":"High surrogate not followed by low surrogate in fixedCharCodeAt()","exception_string_length":"Invalid string. Length must be a multiple of 4","exception_key_nonobject":"Object.keys called on non-object","exception_null_or_undefined":" this is null or not defined","exception_not_function":" is not a function","exception_invalid_date_format":"Invalid date format : ","exception_casting":"Cannot cast ","exception_casting_to":" to "},"pt":{"latex":"LaTeX","cancel":"Cancelar","accept":"OK","manual":"Manual","insert_math":"Inserir fórmula matemática - MathType","insert_chem":"Insert a chemistry formula - ChemType","minimize":"Minimize","maximize":"Maximize","fullscreen":"Full-screen","exit_fullscreen":"Exit full-screen","close":"Close","mathtype":"MathType","title_modalwindow":"MathType modal window","close_modal_warning":"Are you sure you want to leave? The changes you made will be lost.","latex_name_label":"Latex Formula","browser_no_compatible":"Your browser is not compatible with AJAX technology. Please, use the latest version of Mozilla Firefox.","error_convert_accessibility":"Error converting from MathML to accessible text.","exception_cross_site":"Cross site scripting is only allowed for HTTP.","exception_high_surrogate":"High surrogate not followed by low surrogate in fixedCharCodeAt()","exception_string_length":"Invalid string. Length must be a multiple of 4","exception_key_nonobject":"Object.keys called on non-object","exception_null_or_undefined":" this is null or not defined","exception_not_function":" is not a function","exception_invalid_date_format":"Invalid date format : ","exception_casting":"Cannot cast ","exception_casting_to":" to "},"pt_br":{"latex":"LaTeX","cancel":"Cancelar","accept":"OK","manual":"Manual","insert_math":"Inserir fórmula matemática - MathType","insert_chem":"Insert a chemistry formula - ChemType","minimize":"Minimize","maximize":"Maximize","fullscreen":"Full-screen","exit_fullscreen":"Exit full-screen","close":"Close","mathtype":"MathType","title_modalwindow":"MathType modal window","close_modal_warning":"Are you sure you want to leave? The changes you made will be lost.","latex_name_label":"Latex Formula","browser_no_compatible":"Your browser is not compatible with AJAX technology. Please, use the latest version of Mozilla Firefox.","error_convert_accessibility":"Error converting from MathML to accessible text.","exception_cross_site":"Cross site scripting is only allowed for HTTP.","exception_high_surrogate":"High surrogate not followed by low surrogate in fixedCharCodeAt()","exception_string_length":"Invalid string. Length must be a multiple of 4","exception_key_nonobject":"Object.keys called on non-object","exception_null_or_undefined":" this is null or not defined","exception_not_function":" is not a function","exception_invalid_date_format":"Invalid date format : ","exception_casting":"Cannot cast ","exception_casting_to":" to "},"ru":{"latex":"LaTeX","cancel":"отмена","accept":"OK","manual":"вручную","insert_math":"В�?тавить математиче�?кую формулу: WIRIS","insert_chem":"Insert a chemistry formula - ChemType","minimize":"Minimize","maximize":"Maximize","fullscreen":"Full-screen","exit_fullscreen":"Exit full-screen","close":"Close","mathtype":"MathType","title_modalwindow":"MathType modal window","close_modal_warning":"Are you sure you want to leave? The changes you made will be lost.","latex_name_label":"Latex Formula","browser_no_compatible":"Your browser is not compatible with AJAX technology. Please, use the latest version of Mozilla Firefox.","error_convert_accessibility":"Error converting from MathML to accessible text.","exception_cross_site":"Cross site scripting is only allowed for HTTP.","exception_high_surrogate":"High surrogate not followed by low surrogate in fixedCharCodeAt()","exception_string_length":"Invalid string. Length must be a multiple of 4","exception_key_nonobject":"Object.keys called on non-object","exception_null_or_undefined":" this is null or not defined","exception_not_function":" is not a function","exception_invalid_date_format":"Invalid date format : ","exception_casting":"Cannot cast ","exception_casting_to":" to "},"sv":{"latex":"LaTeX","cancel":"Avbryt","accept":"OK","manual":"Bruksanvisning","insert_math":"Infoga matematisk formel - MathType","insert_chem":"Insert a chemistry formula - ChemType","minimize":"Minimize","maximize":"Maximize","fullscreen":"Full-screen","exit_fullscreen":"Exit full-screen","close":"Close","mathtype":"MathType","title_modalwindow":"MathType modal window","close_modal_warning":"Are you sure you want to leave? The changes you made will be lost.","latex_name_label":"Latex Formula","browser_no_compatible":"Your browser is not compatible with AJAX technology. Please, use the latest version of Mozilla Firefox.","error_convert_accessibility":"Error converting from MathML to accessible text.","exception_cross_site":"Cross site scripting is only allowed for HTTP.","exception_high_surrogate":"High surrogate not followed by low surrogate in fixedCharCodeAt()","exception_string_length":"Invalid string. Length must be a multiple of 4","exception_key_nonobject":"Object.keys called on non-object","exception_null_or_undefined":" this is null or not defined","exception_not_function":" is not a function","exception_invalid_date_format":"Invalid date format : ","exception_casting":"Cannot cast ","exception_casting_to":" to "},"tr":{"latex":"LaTeX","cancel":"Vazgeç","accept":"Tamam","manual":"Kılavuz","insert_math":"Matematik formülü ekle - MathType","insert_chem":"Insert a chemistry formula - ChemType","minimize":"Minimize","maximize":"Maximize","fullscreen":"Full-screen","exit_fullscreen":"Exit full-screen","close":"Close","mathtype":"MathType","title_modalwindow":"MathType modal window","close_modal_warning":"Are you sure you want to leave? The changes you made will be lost.","latex_name_label":"Latex Formula","browser_no_compatible":"Your browser is not compatible with AJAX technology. Please, use the latest version of Mozilla Firefox.","error_convert_accessibility":"Error converting from MathML to accessible text.","exception_cross_site":"Cross site scripting is only allowed for HTTP.","exception_high_surrogate":"High surrogate not followed by low surrogate in fixedCharCodeAt()","exception_string_length":"Invalid string. Length must be a multiple of 4","exception_key_nonobject":"Object.keys called on non-object","exception_null_or_undefined":" this is null or not defined","exception_not_function":" is not a function","exception_invalid_date_format":"Invalid date format : ","exception_casting":"Cannot cast ","exception_casting_to":" to "},"zh":{"latex":"LaTeX","cancel":"�?�消","accept":"确定","manual":"手册","insert_math":"�?�入数学公�? - MathType","insert_chem":"Insert a chemistry formula - ChemType","minimize":"Minimize","maximize":"Maximize","fullscreen":"Full-screen","exit_fullscreen":"Exit full-screen","close":"Close","mathtype":"MathType","title_modalwindow":"MathType modal window","close_modal_warning":"Are you sure you want to leave? The changes you made will be lost.","latex_name_label":"Latex Formula","browser_no_compatible":"Your browser is not compatible with AJAX technology. Please, use the latest version of Mozilla Firefox.","error_convert_accessibility":"Error converting from MathML to accessible text.","exception_cross_site":"Cross site scripting is only allowed for HTTP.","exception_high_surrogate":"High surrogate not followed by low surrogate in fixedCharCodeAt()","exception_string_length":"Invalid string. Length must be a multiple of 4","exception_key_nonobject":"Object.keys called on non-object","exception_null_or_undefined":" this is null or not defined","exception_not_function":" is not a function","exception_invalid_date_format":"Invalid date format : ","exception_casting":"Cannot cast ","exception_casting_to":" to "},"el":{"latex":"LaTeX","cancel":"Άκυ�?ο","accept":"ΟΚ","manual":"Χει�?οκίνητα","insert_math":"Εισαγωγή μαθηματικο�? τ�?που - MathType","insert_chem":"Insert a chemistry formula - ChemType","minimize":"Minimize","maximize":"Maximize","fullscreen":"Full-screen","exit_fullscreen":"Exit full-screen","close":"Close","mathtype":"MathType","title_modalwindow":"MathType modal window","close_modal_warning":"Are you sure you want to leave? The changes you made will be lost.","latex_name_label":"Latex Formula","browser_no_compatible":"Your browser is not compatible with AJAX technology. Please, use the latest version of Mozilla Firefox.","error_convert_accessibility":"Error converting from MathML to accessible text.","exception_cross_site":"Cross site scripting is only allowed for HTTP.","exception_high_surrogate":"High surrogate not followed by low surrogate in fixedCharCodeAt()","exception_string_length":"Invalid string. Length must be a multiple of 4","exception_key_nonobject":"Object.keys called on non-object","exception_null_or_undefined":" this is null or not defined","exception_not_function":" is not a function","exception_invalid_date_format":"Invalid date format : ","exception_casting":"Cannot cast ","exception_casting_to":" to "},"":{}}')},function(){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n})(t)}var t,i=t;!function(){function s(n,t){var i=function n(){return n.method.apply(n.scope,arguments)};return i.scope=n,i.method=t,i}var u=function(){},e,f,r,i,t,o;u.__name__=!0;u.dateStr=function(n){var t=n.getMonth()+1,i=n.getDate(),r=n.getHours(),u=n.getMinutes(),f=n.getSeconds();return n.getFullYear()+"-"+(t<10?"0"+t:""+t)+"-"+(i<10?"0"+i:""+i)+" "+(r<10?"0"+r:""+r)+":"+(u<10?"0"+u:""+u)+":"+(f<10?"0"+f:""+f)};u.strDate=function(n){var t,i,r,u;switch(n.length){case 8:return t=n.split(":"),i=new Date,i.setTime(0),i.setUTCHours(t[0]),i.setUTCMinutes(t[1]),i.setUTCSeconds(t[2]),i;case 10:return t=n.split("-"),new Date(t[0],t[1]-1,t[2],0,0,0);case 19:return r=(t=n.split(" "))[0].split("-"),u=t[1].split(":"),new Date(r[0],r[1]-1,r[2],u[0],u[1],u[2]);default:throw"Invalid date format : "+n;}};u.cca=function(n,t){var i=n.charCodeAt(t);if(i==i)return i};u.substr=function(n,t,i){return null!=t&&0!=t&&null!=i&&i<0?"":(null==i&&(i=n.length),t<0?(t=n.length+t)<0&&(t=0):i<0&&(i=n.length+i-t),n.substr(t,i))};u.remove=function(n,t){for(var i=0,r=n.length;i<r;){if(n[i]==t)return n.splice(i,1),!0;i++}return!1};u.iter=function(n){return{cur:0,arr:n,hasNext:function(){return this.cur<this.arr.length},next:function(){return this.arr[this.cur++]}}};e=function(n,t){this.min=n;this.max=t};e.__name__=!0;e.prototype={next:function(){return this.min++},hasNext:function(){return this.min<this.max},__class__:e};f=function(){};f.__name__=!0;f.is=function(n,i){return t.Boot.__instanceof(n,i)};f.string=function(n){return t.Boot.__string_rec(n,"")};f.int=function(n){return 0|n};f.parseInt=function(n){var t=parseInt(n,10);return 0!=t||120!=u.cca(n,1)&&88!=u.cca(n,1)||(t=parseInt(n)),isNaN(t)?null:t};f.parseFloat=function(n){return parseFloat(n)};f.random=function(n){return Math.floor(Math.random()*n)};r=r||{};r.wiris||(r.wiris={});r.wiris.js||(r.wiris.js={});r.wiris.js.JsPluginTools=function(){this.tryReady()};r.wiris.js.JsPluginTools.__name__=!0;r.wiris.js.JsPluginTools.main=function(){var n;n=r.wiris.js.JsPluginTools.getInstance();i.Timer.delay(s(n,n.tryReady),100)};r.wiris.js.JsPluginTools.getInstance=function(){return null==r.wiris.js.JsPluginTools.instance&&(r.wiris.js.JsPluginTools.instance=new r.wiris.js.JsPluginTools),r.wiris.js.JsPluginTools.instance};r.wiris.js.JsPluginTools.bypassEncapsulation=function(){null==window.com&&(window.com={});null==window.com.wiris&&(window.com.wiris={});null==window.com.wiris.js&&(window.com.wiris.js={});null==window.com.wiris.js.JsPluginTools&&(window.com.wiris.js.JsPluginTools=r.wiris.js.JsPluginTools.getInstance())};r.wiris.js.JsPluginTools.prototype={md5encode:function(n){return i.Md5.encode(n)},doLoad:function(){this.ready=!0;r.wiris.js.JsPluginTools.instance=this;r.wiris.js.JsPluginTools.bypassEncapsulation()},tryReady:function(){this.ready=!1;t.Lib.document.readyState&&(this.doLoad(),this.ready=!0);this.ready||i.Timer.delay(s(this,this.tryReady),100)},__class__:r.wiris.js.JsPluginTools};i=i||{};i.Log=function(){};i.Log.__name__=!0;i.Log.trace=function(n,i){t.Boot.__trace(n,i)};i.Log.clear=function(){t.Boot.__clear_trace()};i.Md5=function(){};i.Md5.__name__=!0;i.Md5.encode=function(n){return(new i.Md5).doEncode(n)};i.Md5.prototype={doEncode:function(n){for(var e=this.str2blks(n),t=1732584193,i=-271733879,r=-1732584194,u=271733878,f=0;f<e.length;){var o=t,s=i,h=r,c=u;t=this.ff(t,i,r,u,e[f],7,-680876936);u=this.ff(u,t,i,r,e[f+1],12,-389564586);r=this.ff(r,u,t,i,e[f+2],17,606105819);i=this.ff(i,r,u,t,e[f+3],22,-1044525330);t=this.ff(t,i,r,u,e[f+4],7,-176418897);u=this.ff(u,t,i,r,e[f+5],12,1200080426);r=this.ff(r,u,t,i,e[f+6],17,-1473231341);i=this.ff(i,r,u,t,e[f+7],22,-45705983);t=this.ff(t,i,r,u,e[f+8],7,1770035416);u=this.ff(u,t,i,r,e[f+9],12,-1958414417);r=this.ff(r,u,t,i,e[f+10],17,-42063);i=this.ff(i,r,u,t,e[f+11],22,-1990404162);t=this.ff(t,i,r,u,e[f+12],7,1804603682);u=this.ff(u,t,i,r,e[f+13],12,-40341101);r=this.ff(r,u,t,i,e[f+14],17,-1502002290);i=this.ff(i,r,u,t,e[f+15],22,1236535329);t=this.gg(t,i,r,u,e[f+1],5,-165796510);u=this.gg(u,t,i,r,e[f+6],9,-1069501632);r=this.gg(r,u,t,i,e[f+11],14,643717713);i=this.gg(i,r,u,t,e[f],20,-373897302);t=this.gg(t,i,r,u,e[f+5],5,-701558691);u=this.gg(u,t,i,r,e[f+10],9,38016083);r=this.gg(r,u,t,i,e[f+15],14,-660478335);i=this.gg(i,r,u,t,e[f+4],20,-405537848);t=this.gg(t,i,r,u,e[f+9],5,568446438);u=this.gg(u,t,i,r,e[f+14],9,-1019803690);r=this.gg(r,u,t,i,e[f+3],14,-187363961);i=this.gg(i,r,u,t,e[f+8],20,1163531501);t=this.gg(t,i,r,u,e[f+13],5,-1444681467);u=this.gg(u,t,i,r,e[f+2],9,-51403784);r=this.gg(r,u,t,i,e[f+7],14,1735328473);i=this.gg(i,r,u,t,e[f+12],20,-1926607734);t=this.hh(t,i,r,u,e[f+5],4,-378558);u=this.hh(u,t,i,r,e[f+8],11,-2022574463);r=this.hh(r,u,t,i,e[f+11],16,1839030562);i=this.hh(i,r,u,t,e[f+14],23,-35309556);t=this.hh(t,i,r,u,e[f+1],4,-1530992060);u=this.hh(u,t,i,r,e[f+4],11,1272893353);r=this.hh(r,u,t,i,e[f+7],16,-155497632);i=this.hh(i,r,u,t,e[f+10],23,-1094730640);t=this.hh(t,i,r,u,e[f+13],4,681279174);u=this.hh(u,t,i,r,e[f],11,-358537222);r=this.hh(r,u,t,i,e[f+3],16,-722521979);i=this.hh(i,r,u,t,e[f+6],23,76029189);t=this.hh(t,i,r,u,e[f+9],4,-640364487);u=this.hh(u,t,i,r,e[f+12],11,-421815835);r=this.hh(r,u,t,i,e[f+15],16,530742520);i=this.hh(i,r,u,t,e[f+2],23,-995338651);t=this.ii(t,i,r,u,e[f],6,-198630844);u=this.ii(u,t,i,r,e[f+7],10,1126891415);r=this.ii(r,u,t,i,e[f+14],15,-1416354905);i=this.ii(i,r,u,t,e[f+5],21,-57434055);t=this.ii(t,i,r,u,e[f+12],6,1700485571);u=this.ii(u,t,i,r,e[f+3],10,-1894986606);r=this.ii(r,u,t,i,e[f+10],15,-1051523);i=this.ii(i,r,u,t,e[f+1],21,-2054922799);t=this.ii(t,i,r,u,e[f+8],6,1873313359);u=this.ii(u,t,i,r,e[f+15],10,-30611744);r=this.ii(r,u,t,i,e[f+6],15,-1560198380);i=this.ii(i,r,u,t,e[f+13],21,1309151649);t=this.ii(t,i,r,u,e[f+4],6,-145523070);u=this.ii(u,t,i,r,e[f+11],10,-1120210379);r=this.ii(r,u,t,i,e[f+2],15,718787259);i=this.ii(i,r,u,t,e[f+9],21,-343485551);t=this.addme(t,o);i=this.addme(i,s);r=this.addme(r,h);u=this.addme(u,c);f+=16}return this.rhex(t)+this.rhex(i)+this.rhex(r)+this.rhex(u)},ii:function(n,t,i,r,u,f,e){return this.cmn(this.bitXOR(i,this.bitOR(t,~r)),n,t,u,f,e)},hh:function(n,t,i,r,u,f,e){return this.cmn(this.bitXOR(this.bitXOR(t,i),r),n,t,u,f,e)},gg:function(n,t,i,r,u,f,e){return this.cmn(this.bitOR(this.bitAND(t,r),this.bitAND(i,~r)),n,t,u,f,e)},ff:function(n,t,i,r,u,f,e){return this.cmn(this.bitOR(this.bitAND(t,i),this.bitAND(~t,r)),n,t,u,f,e)},cmn:function(n,t,i,r,u,f){return this.addme(this.rol(this.addme(this.addme(t,n),this.addme(r,f)),u),i)},rol:function(n,t){return n<<t|n>>>32-t},str2blks:function(n){for(var t,r,f,e=1+(n.length+8>>6),i=[],o=0,s=16*e;o<s;)i[t=o++]=0;for(t=0;t<n.length;)i[t>>2]|=u.cca(n,t)<<(8*n.length+t)%4*8,t++;return i[t>>2]|=128<<(8*n.length+t)%4*8,r=8*n.length,f=16*e-2,i[f]=255&r,i[f]|=(r>>>8&255)<<8,i[f]|=(r>>>16&255)<<16,i[f]|=(r>>>24&255)<<24,i},rhex:function(n){for(var r,t="",i=0;i<4;)r=i++,t+="0123456789abcdef".charAt(n>>8*r+4&15)+"0123456789abcdef".charAt(n>>8*r&15);return t},addme:function(n,t){var i=(65535&n)+(65535&t);return(n>>16)+(t>>16)+(i>>16)<<16|65535&i},bitAND:function(n,t){return(n>>>1&t>>>1)<<1|1&n&t},bitXOR:function(n,t){return(n>>>1^t>>>1)<<1|1&n^1&t},bitOR:function(n,t){return(n>>>1|t>>>1)<<1|1&n|1&t},__class__:i.Md5};i.Timer=function(n){var t=this;this.id=window.setInterval(function(){t.run()},n)};i.Timer.__name__=!0;i.Timer.delay=function(n,t){var r=new i.Timer(t);return r.run=function(){r.stop();n()},r};i.Timer.measure=function(n,t){var r=i.Timer.stamp(),u=n();return i.Log.trace(i.Timer.stamp()-r+"s",t),u};i.Timer.stamp=function(){return(new Date).getTime()/1e3};i.Timer.prototype={run:function(){},stop:function(){null!=this.id&&(window.clearInterval(this.id),this.id=null)},__class__:i.Timer};t=t||{};t.Boot=function(){};t.Boot.__name__=!0;t.Boot.__unhtml=function(n){return n.split("&").join("&amp;").split("<").join("&lt;").split(">").join("&gt;")};t.Boot.__trace=function(n,i){var u,r=null!=i?i.fileName+":"+i.lineNumber+": ":"";r+=t.Boot.__string_rec(n,"");"undefined"!=typeof document&&null!=(u=document.getElementById("haxe:trace"))?u.innerHTML+=t.Boot.__unhtml(r)+"<br/>":"undefined"!=typeof console&&null!=console.log&&console.log(r)};t.Boot.__clear_trace=function(){var n=document.getElementById("haxe:trace");null!=n&&(n.innerHTML="")};t.Boot.isClass=function(n){return n.__name__};t.Boot.isEnum=function(n){return n.__ename__};t.Boot.getClass=function(n){return n.__class__};t.Boot.__string_rec=function(i,r){var o,u,s,e,h,v,c,l,a,y,f;if(null==i)return"null";if(r.length>=5)return"<...>";o=n(i);switch("function"==o&&(i.__name__||i.__ename__)&&(o="object"),o){case"object":if(i instanceof Array){if(i.__enum__){if(2==i.length)return i[0];for(u=i[0]+"(",r+="\t",s=2,e=i.length;s<e;)u+=2!=(h=s++)?","+t.Boot.__string_rec(i[h],r):t.Boot.__string_rec(i[h],r);return u+")"}for(v=i.length,u="[",r+="\t",e=0;e<v;)c=e++,u+=(c>0?",":"")+t.Boot.__string_rec(i[c],r);return u+"]"}try{l=i.toString}catch(i){return"???"}if(null!=l&&l!=Object.toString&&(a=i.toString(),"[object Object]"!=a))return a;f=null;u="{\n";r+="\t";y=null!=i.hasOwnProperty;for(f in i)y&&!i.hasOwnProperty(f)||"prototype"!=f&&"__class__"!=f&&"__super__"!=f&&"__interfaces__"!=f&&"__properties__"!=f&&(2!=u.length&&(u+=", \n"),u+=r+f+" : "+t.Boot.__string_rec(i[f],r));return u+("\n"+(r=r.substring(1))+"}");case"function":return"<function>";case"string":return i;default:return String(i)}};t.Boot.__interfLoop=function(n,i){var r,u,e,f;if(null==n)return!1;if(n==i)return!0;if(r=n.__interfaces__,null!=r)for(u=0,e=r.length;u<e;)if(f=r[u++],f==i||t.Boot.__interfLoop(f,i))return!0;return t.Boot.__interfLoop(n.__super__,i)};t.Boot.__instanceof=function(n,i){try{if(n instanceof i)return i!=Array||null==n.__enum__;if(t.Boot.__interfLoop(n.__class__,i))return!0}catch(n){if(null==i)return!1}switch(i){case c:return Math.ceil(n%2147483648)===n;case h:return"number"==typeof n;case o:return!0===n||!1===n;case String:return"string"==typeof n;case l:return!0;default:return null!=n&&(i==a&&null!=n.__name__||i==v&&null!=n.__ename__||n.__enum__==i)}};t.Boot.__cast=function(n,i){if(t.Boot.__instanceof(n,i))return n;throw"Cannot cast "+f.string(n)+" to "+f.string(i);};t.Lib=function(){};t.Lib.__name__=!0;t.Lib.debug=function(){};t.Lib.alert=function(n){alert(t.Boot.__string_rec(n,""))};t.Lib.eval=function(n){return eval(n)};t.Lib.setErrorHandler=function(n){t.Lib.onerror=n};Array.prototype.indexOf&&(u.remove=function(n,t){var i=n.indexOf(t);return-1!=i&&(n.splice(i,1),!0)});Math.__name__=["Math"];Math.NaN=Number.NaN;Math.NEGATIVE_INFINITY=Number.NEGATIVE_INFINITY;Math.POSITIVE_INFINITY=Number.POSITIVE_INFINITY;Math.isFinite=function(n){return isFinite(n)};Math.isNaN=function(n){return isNaN(n)};String.prototype.__class__=String;String.__name__=!0;Array.prototype.__class__=Array;Array.__name__=!0;Date.prototype.__class__=Date;Date.__name__=["Date"];var c={__name__:["Int"]},l={__name__:["Dynamic"]},h=Number;h.__name__=["Float"];o=Boolean;o.__ename__=["Bool"];var a={__name__:["Class"]},v={};"undefined"!=typeof document&&(t.Lib.document=document);"undefined"!=typeof window&&(t.Lib.window=window,t.Lib.window.onerror=function(n,i,r){var u=t.Lib.onerror;return null!=u&&u(n,[i+":"+r])});r.wiris.js.JsPluginTools.main();delete Array.prototype.__class__}(),function(){function s(n,t){var i=function n(){return n.method.apply(n.scope,arguments)};return i.scope=n,i.method=t,i}var u=function(){},e,f,r,i,t,o;u.__name__=!0;u.dateStr=function(n){var t=n.getMonth()+1,i=n.getDate(),r=n.getHours(),u=n.getMinutes(),f=n.getSeconds();return n.getFullYear()+"-"+(t<10?"0"+t:""+t)+"-"+(i<10?"0"+i:""+i)+" "+(r<10?"0"+r:""+r)+":"+(u<10?"0"+u:""+u)+":"+(f<10?"0"+f:""+f)};u.strDate=function(n){var t,i,r,u;switch(n.length){case 8:return t=n.split(":"),i=new Date,i.setTime(0),i.setUTCHours(t[0]),i.setUTCMinutes(t[1]),i.setUTCSeconds(t[2]),i;case 10:return t=n.split("-"),new Date(t[0],t[1]-1,t[2],0,0,0);case 19:return r=(t=n.split(" "))[0].split("-"),u=t[1].split(":"),new Date(r[0],r[1]-1,r[2],u[0],u[1],u[2]);default:throw"Invalid date format : "+n;}};u.cca=function(n,t){var i=n.charCodeAt(t);if(i==i)return i};u.substr=function(n,t,i){return null!=t&&0!=t&&null!=i&&i<0?"":(null==i&&(i=n.length),t<0?(t=n.length+t)<0&&(t=0):i<0&&(i=n.length+i-t),n.substr(t,i))};u.remove=function(n,t){for(var i=0,r=n.length;i<r;){if(n[i]==t)return n.splice(i,1),!0;i++}return!1};u.iter=function(n){return{cur:0,arr:n,hasNext:function(){return this.cur<this.arr.length},next:function(){return this.arr[this.cur++]}}};e=function(n,t){this.min=n;this.max=t};e.__name__=!0;e.prototype={next:function(){return this.min++},hasNext:function(){return this.min<this.max},__class__:e};f=function(){};f.__name__=!0;f.is=function(n,i){return t.Boot.__instanceof(n,i)};f.string=function(n){return t.Boot.__string_rec(n,"")};f.int=function(n){return 0|n};f.parseInt=function(n){var t=parseInt(n,10);return 0!=t||120!=u.cca(n,1)&&88!=u.cca(n,1)||(t=parseInt(n)),isNaN(t)?null:t};f.parseFloat=function(n){return parseFloat(n)};f.random=function(n){return Math.floor(Math.random()*n)};r=r||{};r.wiris||(r.wiris={});r.wiris.js||(r.wiris.js={});r.wiris.js.JsPluginTools=function(){this.tryReady()};r.wiris.js.JsPluginTools.__name__=!0;r.wiris.js.JsPluginTools.main=function(){var n;n=r.wiris.js.JsPluginTools.getInstance();i.Timer.delay(s(n,n.tryReady),100)};r.wiris.js.JsPluginTools.getInstance=function(){return null==r.wiris.js.JsPluginTools.instance&&(r.wiris.js.JsPluginTools.instance=new r.wiris.js.JsPluginTools),r.wiris.js.JsPluginTools.instance};r.wiris.js.JsPluginTools.bypassEncapsulation=function(){null==window.com&&(window.com={});null==window.com.wiris&&(window.com.wiris={});null==window.com.wiris.js&&(window.com.wiris.js={});null==window.com.wiris.js.JsPluginTools&&(window.com.wiris.js.JsPluginTools=r.wiris.js.JsPluginTools.getInstance())};r.wiris.js.JsPluginTools.prototype={md5encode:function(n){return i.Md5.encode(n)},doLoad:function(){this.ready=!0;r.wiris.js.JsPluginTools.instance=this;r.wiris.js.JsPluginTools.bypassEncapsulation()},tryReady:function(){this.ready=!1;t.Lib.document.readyState&&(this.doLoad(),this.ready=!0);this.ready||i.Timer.delay(s(this,this.tryReady),100)},__class__:r.wiris.js.JsPluginTools};i=i||{};i.Log=function(){};i.Log.__name__=!0;i.Log.trace=function(n,i){t.Boot.__trace(n,i)};i.Log.clear=function(){t.Boot.__clear_trace()};i.Md5=function(){};i.Md5.__name__=!0;i.Md5.encode=function(n){return(new i.Md5).doEncode(n)};i.Md5.prototype={doEncode:function(n){for(var e=this.str2blks(n),t=1732584193,i=-271733879,r=-1732584194,u=271733878,f=0;f<e.length;){var o=t,s=i,h=r,c=u;t=this.ff(t,i,r,u,e[f],7,-680876936);u=this.ff(u,t,i,r,e[f+1],12,-389564586);r=this.ff(r,u,t,i,e[f+2],17,606105819);i=this.ff(i,r,u,t,e[f+3],22,-1044525330);t=this.ff(t,i,r,u,e[f+4],7,-176418897);u=this.ff(u,t,i,r,e[f+5],12,1200080426);r=this.ff(r,u,t,i,e[f+6],17,-1473231341);i=this.ff(i,r,u,t,e[f+7],22,-45705983);t=this.ff(t,i,r,u,e[f+8],7,1770035416);u=this.ff(u,t,i,r,e[f+9],12,-1958414417);r=this.ff(r,u,t,i,e[f+10],17,-42063);i=this.ff(i,r,u,t,e[f+11],22,-1990404162);t=this.ff(t,i,r,u,e[f+12],7,1804603682);u=this.ff(u,t,i,r,e[f+13],12,-40341101);r=this.ff(r,u,t,i,e[f+14],17,-1502002290);i=this.ff(i,r,u,t,e[f+15],22,1236535329);t=this.gg(t,i,r,u,e[f+1],5,-165796510);u=this.gg(u,t,i,r,e[f+6],9,-1069501632);r=this.gg(r,u,t,i,e[f+11],14,643717713);i=this.gg(i,r,u,t,e[f],20,-373897302);t=this.gg(t,i,r,u,e[f+5],5,-701558691);u=this.gg(u,t,i,r,e[f+10],9,38016083);r=this.gg(r,u,t,i,e[f+15],14,-660478335);i=this.gg(i,r,u,t,e[f+4],20,-405537848);t=this.gg(t,i,r,u,e[f+9],5,568446438);u=this.gg(u,t,i,r,e[f+14],9,-1019803690);r=this.gg(r,u,t,i,e[f+3],14,-187363961);i=this.gg(i,r,u,t,e[f+8],20,1163531501);t=this.gg(t,i,r,u,e[f+13],5,-1444681467);u=this.gg(u,t,i,r,e[f+2],9,-51403784);r=this.gg(r,u,t,i,e[f+7],14,1735328473);i=this.gg(i,r,u,t,e[f+12],20,-1926607734);t=this.hh(t,i,r,u,e[f+5],4,-378558);u=this.hh(u,t,i,r,e[f+8],11,-2022574463);r=this.hh(r,u,t,i,e[f+11],16,1839030562);i=this.hh(i,r,u,t,e[f+14],23,-35309556);t=this.hh(t,i,r,u,e[f+1],4,-1530992060);u=this.hh(u,t,i,r,e[f+4],11,1272893353);r=this.hh(r,u,t,i,e[f+7],16,-155497632);i=this.hh(i,r,u,t,e[f+10],23,-1094730640);t=this.hh(t,i,r,u,e[f+13],4,681279174);u=this.hh(u,t,i,r,e[f],11,-358537222);r=this.hh(r,u,t,i,e[f+3],16,-722521979);i=this.hh(i,r,u,t,e[f+6],23,76029189);t=this.hh(t,i,r,u,e[f+9],4,-640364487);u=this.hh(u,t,i,r,e[f+12],11,-421815835);r=this.hh(r,u,t,i,e[f+15],16,530742520);i=this.hh(i,r,u,t,e[f+2],23,-995338651);t=this.ii(t,i,r,u,e[f],6,-198630844);u=this.ii(u,t,i,r,e[f+7],10,1126891415);r=this.ii(r,u,t,i,e[f+14],15,-1416354905);i=this.ii(i,r,u,t,e[f+5],21,-57434055);t=this.ii(t,i,r,u,e[f+12],6,1700485571);u=this.ii(u,t,i,r,e[f+3],10,-1894986606);r=this.ii(r,u,t,i,e[f+10],15,-1051523);i=this.ii(i,r,u,t,e[f+1],21,-2054922799);t=this.ii(t,i,r,u,e[f+8],6,1873313359);u=this.ii(u,t,i,r,e[f+15],10,-30611744);r=this.ii(r,u,t,i,e[f+6],15,-1560198380);i=this.ii(i,r,u,t,e[f+13],21,1309151649);t=this.ii(t,i,r,u,e[f+4],6,-145523070);u=this.ii(u,t,i,r,e[f+11],10,-1120210379);r=this.ii(r,u,t,i,e[f+2],15,718787259);i=this.ii(i,r,u,t,e[f+9],21,-343485551);t=this.addme(t,o);i=this.addme(i,s);r=this.addme(r,h);u=this.addme(u,c);f+=16}return this.rhex(t)+this.rhex(i)+this.rhex(r)+this.rhex(u)},ii:function(n,t,i,r,u,f,e){return this.cmn(this.bitXOR(i,this.bitOR(t,~r)),n,t,u,f,e)},hh:function(n,t,i,r,u,f,e){return this.cmn(this.bitXOR(this.bitXOR(t,i),r),n,t,u,f,e)},gg:function(n,t,i,r,u,f,e){return this.cmn(this.bitOR(this.bitAND(t,r),this.bitAND(i,~r)),n,t,u,f,e)},ff:function(n,t,i,r,u,f,e){return this.cmn(this.bitOR(this.bitAND(t,i),this.bitAND(~t,r)),n,t,u,f,e)},cmn:function(n,t,i,r,u,f){return this.addme(this.rol(this.addme(this.addme(t,n),this.addme(r,f)),u),i)},rol:function(n,t){return n<<t|n>>>32-t},str2blks:function(n){for(var t,r,f,e=1+(n.length+8>>6),i=[],o=0,s=16*e;o<s;)i[t=o++]=0;for(t=0;t<n.length;)i[t>>2]|=u.cca(n,t)<<(8*n.length+t)%4*8,t++;return i[t>>2]|=128<<(8*n.length+t)%4*8,r=8*n.length,f=16*e-2,i[f]=255&r,i[f]|=(r>>>8&255)<<8,i[f]|=(r>>>16&255)<<16,i[f]|=(r>>>24&255)<<24,i},rhex:function(n){for(var r,t="",i=0;i<4;)r=i++,t+="0123456789abcdef".charAt(n>>8*r+4&15)+"0123456789abcdef".charAt(n>>8*r&15);return t},addme:function(n,t){var i=(65535&n)+(65535&t);return(n>>16)+(t>>16)+(i>>16)<<16|65535&i},bitAND:function(n,t){return(n>>>1&t>>>1)<<1|1&n&t},bitXOR:function(n,t){return(n>>>1^t>>>1)<<1|1&n^1&t},bitOR:function(n,t){return(n>>>1|t>>>1)<<1|1&n|1&t},__class__:i.Md5};i.Timer=function(n){var t=this;this.id=window.setInterval(function(){t.run()},n)};i.Timer.__name__=!0;i.Timer.delay=function(n,t){var r=new i.Timer(t);return r.run=function(){r.stop();n()},r};i.Timer.measure=function(n,t){var r=i.Timer.stamp(),u=n();return i.Log.trace(i.Timer.stamp()-r+"s",t),u};i.Timer.stamp=function(){return(new Date).getTime()/1e3};i.Timer.prototype={run:function(){},stop:function(){null!=this.id&&(window.clearInterval(this.id),this.id=null)},__class__:i.Timer};t=t||{};t.Boot=function(){};t.Boot.__name__=!0;t.Boot.__unhtml=function(n){return n.split("&").join("&amp;").split("<").join("&lt;").split(">").join("&gt;")};t.Boot.__trace=function(n,i){var u,r=null!=i?i.fileName+":"+i.lineNumber+": ":"";r+=t.Boot.__string_rec(n,"");"undefined"!=typeof document&&null!=(u=document.getElementById("haxe:trace"))?u.innerHTML+=t.Boot.__unhtml(r)+"<br/>":"undefined"!=typeof console&&null!=console.log&&console.log(r)};t.Boot.__clear_trace=function(){var n=document.getElementById("haxe:trace");null!=n&&(n.innerHTML="")};t.Boot.isClass=function(n){return n.__name__};t.Boot.isEnum=function(n){return n.__ename__};t.Boot.getClass=function(n){return n.__class__};t.Boot.__string_rec=function(i,r){var o,u,s,e,h,v,c,l,a,y,f;if(null==i)return"null";if(r.length>=5)return"<...>";o=n(i);switch("function"==o&&(i.__name__||i.__ename__)&&(o="object"),o){case"object":if(i instanceof Array){if(i.__enum__){if(2==i.length)return i[0];for(u=i[0]+"(",r+="\t",s=2,e=i.length;s<e;)u+=2!=(h=s++)?","+t.Boot.__string_rec(i[h],r):t.Boot.__string_rec(i[h],r);return u+")"}for(v=i.length,u="[",r+="\t",e=0;e<v;)c=e++,u+=(c>0?",":"")+t.Boot.__string_rec(i[c],r);return u+"]"}try{l=i.toString}catch(i){return"???"}if(null!=l&&l!=Object.toString&&(a=i.toString(),"[object Object]"!=a))return a;f=null;u="{\n";r+="\t";y=null!=i.hasOwnProperty;for(f in i)y&&!i.hasOwnProperty(f)||"prototype"!=f&&"__class__"!=f&&"__super__"!=f&&"__interfaces__"!=f&&"__properties__"!=f&&(2!=u.length&&(u+=", \n"),u+=r+f+" : "+t.Boot.__string_rec(i[f],r));return u+("\n"+(r=r.substring(1))+"}");case"function":return"<function>";case"string":return i;default:return String(i)}};t.Boot.__interfLoop=function(n,i){var r,u,e,f;if(null==n)return!1;if(n==i)return!0;if(r=n.__interfaces__,null!=r)for(u=0,e=r.length;u<e;)if(f=r[u++],f==i||t.Boot.__interfLoop(f,i))return!0;return t.Boot.__interfLoop(n.__super__,i)};t.Boot.__instanceof=function(n,i){try{if(n instanceof i)return i!=Array||null==n.__enum__;if(t.Boot.__interfLoop(n.__class__,i))return!0}catch(n){if(null==i)return!1}switch(i){case c:return Math.ceil(n%2147483648)===n;case h:return"number"==typeof n;case o:return!0===n||!1===n;case String:return"string"==typeof n;case l:return!0;default:return null!=n&&(i==a&&null!=n.__name__||i==v&&null!=n.__ename__||n.__enum__==i)}};t.Boot.__cast=function(n,i){if(t.Boot.__instanceof(n,i))return n;throw"Cannot cast "+f.string(n)+" to "+f.string(i);};t.Lib=function(){};t.Lib.__name__=!0;t.Lib.debug=function(){};t.Lib.alert=function(n){alert(t.Boot.__string_rec(n,""))};t.Lib.eval=function(n){return eval(n)};t.Lib.setErrorHandler=function(n){t.Lib.onerror=n};Array.prototype.indexOf&&(u.remove=function(n,t){var i=n.indexOf(t);return-1!=i&&(n.splice(i,1),!0)});Math.__name__=["Math"];Math.NaN=Number.NaN;Math.NEGATIVE_INFINITY=Number.NEGATIVE_INFINITY;Math.POSITIVE_INFINITY=Number.POSITIVE_INFINITY;Math.isFinite=function(n){return isFinite(n)};Math.isNaN=function(n){return isNaN(n)};String.prototype.__class__=String;String.__name__=!0;Array.prototype.__class__=Array;Array.__name__=!0;Date.prototype.__class__=Date;Date.__name__=["Date"];var c={__name__:["Int"]},l={__name__:["Dynamic"]},h=Number;h.__name__=["Float"];o=Boolean;o.__ename__=["Bool"];var a={__name__:["Class"]},v={};"undefined"!=typeof document&&(t.Lib.document=document);"undefined"!=typeof window&&(t.Lib.window=window,t.Lib.window.onerror=function(n,i,r){var u=t.Lib.onerror;return null!=u&&u(n,[i+":"+r])});r.wiris.js.JsPluginTools.main()}();delete Array.prototype.__class__},function(n,t,i){var r=i(3),u;"string"==typeof r&&(r=[[n.i,r,""]]);u={hmr:!0,transform:void 0,insertInto:void 0};i(16)(r,u);r.locals&&(n.exports=r.locals)},function(n,t,i){var r=i(4);(n.exports=i(5)(!1)).push([n.i,".wrs_modal_overlay {\n    position: fixed;\n    font-family: arial, sans-serif;\n    top: 0;\n    right: 0;\n    left: 0;\n    bottom: 0;\n    background: rgba(0, 0, 0, 0.8);\n    z-index: 999998;\n    opacity: 0.65;\n    pointer-events: auto;\n}\n\n.wrs_modal_overlay.wrs_modal_ios {\n    visibility: hidden;\n    display: none;\n}\n\n.wrs_modal_overlay.wrs_modal_android {\n    visibility: hidden;\n    display: none;\n}\n\n.wrs_modal_overlay.wrs_modal_ios.moodle {\n    position: fixed;\n}\n\n.wrs_modal_overlay.wrs_modal_desktop.wrs_stack {\n    background: rgba(0, 0, 0, 0);\n    display: none;\n}\n\n.wrs_modal_overlay.wrs_modal_desktop.wrs_maximized {\n    background: rgba(0, 0, 0, 0.8);\n}\n\n.wrs_modal_overlay.wrs_modal_desktop.wrs_minimized {\n    background: rgba(0, 0, 0, 0);\n    display: none;\n}\n\n.wrs_modal_overlay.wrs_modal_desktop.wrs_closed {\n    background: rgba(0, 0, 0, 0);\n    display: none;\n}\n\n.wrs_modal_title {\n    color: #fff;\n    padding: 5px 0 5px 10px;\n    -moz-user-select: none;\n    -webkit-user-select: none;\n    -ms-user-select: none;\n    user-select: none;\n    text-align: left;\n}\n\n.wrs_modal_close_button {\n    float: right;\n    cursor: pointer;\n    color: #fff;\n    padding: 5px 10px 5px 0;\n    background-image: url("+r(i(6))+");\n    background-size: 10px;\n    margin: 10px 7px 0 0;\n    background-repeat: no-repeat;\n}\n\n.wrs_modal_close_button:hover {\n    background-image: url("+r(i(7))+");\n}\n\n.wrs_modal_minimize_button {\n    float: right;\n    cursor: pointer;\n    color: #fff;\n    padding: 5px 10px 5px 0;\n    top: inherit;\n    margin: 10px 7px 0 0;\n    background-size: 10px;\n    background-image: url("+r(i(8))+");\n    background-repeat: no-repeat;\n}\n\n.wrs_modal_minimize_button:hover {\n    background-image: url("+r(i(9))+");\n}\n\n.wrs_modal_minimize_button.wrs_minimized {\n    background-image: url("+r(i(10))+");\n}\n\n.wrs_modal_minimize_button.wrs_minimized:hover {\n    background-image: url("+r(i(11))+");\n}\n\n.wrs_modal_stack_button {\n    float: right;\n    cursor: pointer;\n    color: #fff;\n    margin: 10px 7px 0 0;\n    padding: 5px 10px 5px 0;\n    top: inherit;\n    background-image: url("+r(i(12))+");\n    background-size: 10px;\n}\n\n.wrs_modal_stack_button.wrs_stack {\n    visibility: hidden;\n    margin: 0;\n    padding: 0;\n}\n\n.wrs_modal_stack_button.wrs_minimized {\n    visibility: hidden;\n    margin: 0;\n    padding: 0;\n}\n\n.wrs_modal_stack_button:hover {\n    background-image: url("+r(i(13))+");\n}\n\n.wrs_modal_maximize_button {\n    float: right;\n    cursor: pointer;\n    color: #fff;\n    margin: 10px 7px 0 0;\n    padding: 5px 10px 5px 0;\n    top: inherit;\n    background-image: url("+r(i(14))+");\n    background-size: 10px;\n    background-repeat: no-repeat;\n}\n\n.wrs_modal_maximize_button.wrs_maximized {\n    visibility: hidden;\n    margin: 0;\n    padding: 0;\n}\n\n.wrs_modal_maximize_button:hover {\n    background-image: url("+r(i(15))+");\n}\n\n.wrs_modal_wrapper {\n    display: block;\n    margin: 6px;\n}\n\n.wrs_modal_title_bar {\n    display: block;\n    background-color: #778e9a;\n}\n\n.wrs_modal_dialogContainer {\n    border: none;\n    background: #fafafa;\n    z-index: 999999;\n}\n\n.wrs_modal_dialogContainer.wrs_modal_desktop {\n    font-size: 14px;\n}\n\n.wrs_modal_dialogContainer.wrs_modal_desktop.wrs_maximized {\n    position: fixed;\n}\n\n.wrs_modal_dialogContainer.wrs_modal_desktop.wrs_minimized {\n    position: fixed;\n    top: inherit;\n    margin: 0;\n    margin-right: 10px;\n}\n\n.wrs_modal_dialogContainer.wrs_closed {\n    visibility: hidden;\n    display: none;\n    opacity: 0;\n}\n\n\n/* Class that exists but hasn't got css properties defined\n.wrs_modal_dialogContainer.wrs_modal_desktop.wrs_minimized.wrs_drag {} */\n\n.wrs_modal_dialogContainer.wrs_modal_desktop.wrs_stack {\n    position: fixed;\n    bottom: 0;\n    right: 0;\n    box-shadow: rgba(0, 0, 0, 0.5) 0 2px 8px;\n}\n\n.wrs_modal_dialogContainer.wrs_drag {\n    box-shadow: rgba(0, 0, 0, 0.5) 0 2px 8px;\n}\n\n.wrs_modal_dialogContainer.wrs_modal_desktop.wrs_drag {\n    box-shadow: rgba(0, 0, 0, 0.5) 0 2px 8px;\n}\n\n.wrs_modal_dialogContainer.wrs_modal_android {\n    margin: auto;\n    position: fixed;\n    width: 99%;\n    height: 99%;\n    overflow: hidden;\n    transform: translate(50%, -50%);\n    top: 50%;\n    right: 50% !important;\n    position: fixed;\n}\n\n.wrs_modal_dialogContainer.wrs_modal_ios {\n    margin: auto;\n    position: fixed;\n    width: 100%;\n    height: 100%;\n    overflow: hidden;\n    transform: translate(50%, -50%);\n    top: 50%;\n    right: 50% !important;\n    position: fixed;\n}\n\n\n/* Class that exists but hasn't got css properties defined\n.wrs_content_container.wrs_maximized {} */\n\n.wrs_content_container.wrs_minimized {\n    display: none;\n}\n\n/* .wrs_editor {\n    flex-grow: 1;\n} */\n\n.wrs_content_container.wrs_modal_android {\n    width: 100%;\n    flex-grow: 1;\n    display: flex;\n    flex-direction: column;\n}\n\n.wrs_content_container.wrs_modal_android > div:first-child {\n    flex-grow: 1;\n}\n\n.wrs_content_container.wrs_modal_ios > div:first-child {\n    flex-grow: 1;\n}\n\n.wrs_content_container.wrs_modal_desktop > div:first-child {\n    flex-grow: 1;\n}\n\n.wrs_modal_wrapper.wrs_modal_android {\n    margin: auto;\n    display: flex;\n    flex-direction: column;\n    height: 100%;\n    width: 100%;\n}\n\n.wrs_content_container.wrs_modal_desktop {\n    width: 100%;\n    flex-grow: 1;\n    display: flex;\n    flex-direction: column;\n}\n\n.wrs_content_container.wrs_modal_ios {\n    width: 100%;\n    flex-grow: 1;\n    display: flex;\n    flex-direction: column;\n}\n\n.wrs_modal_wrapper.wrs_modal_ios {\n    margin: auto;\n    display: flex;\n    flex-direction: column;\n    height: 100%;\n    width: 100%;\n}\n\n.wrs_virtual_keyboard {\n    height: 100%;\n    width: 100%;\n    top: 0;\n    left: 50%;\n    transform: translate(-50%, 0%);\n}\n\n@media all and (orientation: portrait) {\n    .wrs_modal_dialogContainer.wrs_modal_mobile {\n        width: 100vmin;\n        height: 100vmin;\n        margin: auto;\n        border-width: 0;\n    }\n    .wrs_modal_wrapper.wrs_modal_mobile {\n        width: 100vmin;\n        height: 100vmin;\n        margin: auto;\n    }\n}\n\n@media all and (orientation: landscape) {\n    .wrs_modal_dialogContainer.wrs_modal_mobile {\n        width: 100vmin;\n        height: 100vmin;\n        margin: auto;\n        border-width: 0;\n    }\n    .wrs_modal_wrapper.wrs_modal_mobile {\n        width: 100vmin;\n        height: 100vmin;\n        margin: auto;\n    }\n}\n\n.wrs_modal_dialogContainer.wrs_modal_badStock {\n    width: 100%;\n    height: 280px;\n    margin: 0 auto;\n    border-width: 0;\n}\n\n.wrs_modal_wrapper.wrs_modal_badStock {\n    width: 100%;\n    height: 280px;\n    margin: 0 auto;\n    border-width: 0;\n}\n.wrs_noselect {\n    -moz-user-select: none;\n    -khtml-user-select: none;\n    -webkit-user-select: none;\n    -ms-user-select: none;\n    user-select: none;\n}\n.wrs_bottom_right_resizer {\n    width: 10px;\n    height: 10px;\n    color: #778e9a;\n    position: absolute;\n    right: 4px;\n    bottom: 8px;\n    cursor: se-resize;\n    -moz-user-select: none;\n    -webkit-user-select: none;\n    -ms-user-select: none;\n    user-select: none;\n}\n.wrs_bottom_left_resizer {\n    width: 15px;\n    height: 15px;\n    color: #778e9a;\n    position: absolute;\n    left: 0;\n    top: 0;\n    cursor: se-resize;\n}\n\n.wrs_modal_controls {\n    height: 42px;\n    margin: 3px 0;\n    overflow: hidden;\n    line-height: normal;\n}\n\n.wrs_modal_links {\n    margin: 10px auto;\n    margin-bottom: 0;\n    font-family: arial, sans-serif;\n    padding: 6px;\n    display: inline;\n    float: right;\n    text-align: right;\n}\n\n.wrs_modal_links > a {\n    text-decoration: none;\n    color: #778e9a;\n    font-size: 16px;\n}\n\n.wrs_modal_button_cancel,\n.wrs_modal_button_cancel:hover,\n.wrs_modal_button_cancel:visited,\n.wrs_modal_button_cancel:active,\n.wrs_modal_button_cancel:focus {\n    min-width: 80px;\n    font-size: 14px;\n    border-radius: 3px;\n    border: 1px solid #778e9a;\n    padding: 6px 8px;\n    margin: 10px auto;\n    margin-left: 5px;\n    margin-bottom: 0;\n    cursor: pointer;\n    font-family: arial, sans-serif;\n    background-color: #DDDDDD;\n    height: 32px;\n}\n\n.wrs_modal_button_accept,\n.wrs_modal_button_accept:hover,\n.wrs_modal_button_accept:visited,\n.wrs_modal_button_accept:active,\n.wrs_modal_button_accept:focus {\n    min-width: 80px;\n    font-size: 14px;\n    border-radius: 3px;\n    border: 1px solid #778e9a;\n    padding: 6px 8px;\n    margin: 10px auto;\n    margin-right: 5px;\n    margin-bottom: 0;\n    color: #fff;\n    background: #778e9a;\n    cursor: pointer;\n    font-family: arial, sans-serif;\n    height: 32px;\n}\n\n.wrs_editor_vertical_bar {\n    height: 20px;\n    float: right;\n    background: none;\n    width: 20px;\n    cursor: pointer;\n}\n\n.wrs_modal_buttons_container {\n    display: inline;\n    float: left;\n}\n\n.wrs_modal_buttons_container.wrs_modalAndroid {\n    padding-left: 6px;\n}\n\n.wrs_modal_buttons_container.wrs_modalDesktop {\n    padding-left: 0;\n}\n\n.wrs_modal_buttons_container > button {\n    line-height: normal;\n    background-image: none;\n}\n\n.wrs_modal_wrapper {\n    margin: 6px;\n    display: flex;\n    flex-direction: column;\n}\n\n.wrs_modal_wrapper.wrs_modal_desktop.wrs_minimized {\n    display: none;\n}\n\n@media only screen and (max-device-width: 480px) and (orientation: portrait) {\n    #wrs_modal_wrapper {\n        width: 140%;\n    }\n}\n\n.wrs_popupmessage_overlay_envolture {\n    display: none;\n    width: 100%;\n}\n.wrs_popupmessage_overlay {\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    background-color: rgba(0, 0, 0, 0.5);\n    z-index: 4;\n    cursor: pointer;\n}\n.wrs_popupmessage_panel {\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%);\n    position: absolute;\n    background: white;\n    max-width: 500px;\n    width: 75%;\n    border-radius: 2px;\n    padding: 20px;\n    font-family: sans-serif;\n    font-size: 15px;\n    text-align: left;\n    color: #2e2e2e;\n    z-index: 5;\n    max-height: 75%;\n    overflow: auto;\n}\n\n.wrs_popupmessage_button_area {\n    margin: 10px 0 0 0;\n}\n\n.wrs_panelContainer * {\n    border: 0;\n}\n\n.wrs_button_cancel,\n.wrs_button_cancel:hover,\n.wrs_button_cancel:visited,\n.wrs_button_cancel:active,\n.wrs_button_cancel:focus {\n    min-width: 80px;\n    font-size: 14px;\n    border-radius: 3px;\n    border: 1px solid #778e9a;\n    padding: 6px 8px;\n    margin: 10px auto;\n    margin-left: 5px;\n    margin-bottom: 0;\n    cursor: pointer;\n    font-family: arial, sans-serif;\n    background-color: #DDDDDD;\n    background-image: none;\n    height: 32px;\n}\n\n.wrs_button_accept,\n.wrs_button_accept:hover,\n.wrs_button_accept:visited,\n.wrs_button_accept:active,\n.wrs_button_accept:focus {\n    min-width: 80px;\n    font-size: 14px;\n    border-radius: 3px;\n    border: 1px solid #778e9a;\n    padding: 6px 8px;\n    margin: 10px auto;\n    margin-right: 5px;\n    margin-bottom: 0;\n    color: #fff;\n    background: #778e9a;\n    cursor: pointer;\n    font-family: arial, sans-serif;\n    height: 32px;\n}\n\n.wrs_editor button{\n    box-shadow: none;\n}\n\n.wrs_editor .wrs_header button{\n    border-bottom: none;\n    border-bottom-left-radius: 0;\n    border-bottom-right-radius: 0;\n}\n\n.wrs_modal_overlay.wrs_modal_desktop.wrs_stack.wrs_overlay_active {\n    display: block;\n}\n/* Fix selection in drupal style */\n.wrs_toolbar tr:focus{\n    background: none;\n}\n.wrs_toolbar tr:hover{\n    background: none;\n}\n/* End of fix drupal */\n.wrs_modal_rtl .wrs_modal_button_cancel {\n    margin-right: 5px;\n    margin-left: 0;\n}\n.wrs_modal_rtl .wrs_modal_button_accept {\n    margin-right: 0;\n    margin-left: 5px;\n}\n.wrs_modal_rtl .wrs_button_cancel {\n    margin-right: 5px;\n    margin-left: 0;\n}\n.wrs_modal_rtl .wrs_button_accept {\n    margin-right: 0;\n    margin-left: 5px;\n}\n",""])},function(n){n.exports=function(n){return"string"!=typeof n?n:(/^['"].*['"]$/.test(n)&&(n=n.slice(1,-1)),/["'() \t\n]/.test(n)?'"'+n.replace(/"/g,'\\"').replace(/\n/g,"\\n")+'"':n)}},function(n){n.exports=function(n){var t=[];return t.toString=function(){return this.map(function(t){var i=function(n,t){var r=n[1]||"",i=n[3],u,f;return i?t&&"function"==typeof btoa?(u=function(n){return"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(n))))+" */"}(i),f=i.sources.map(function(n){return"/*# sourceURL="+i.sourceRoot+n+" */"}),[r].concat(f).concat([u]).join("\n")):[r].join("\n"):r}(t,n);return t[2]?"@media "+t[2]+"{"+i+"}":i}).join("")},t.i=function(n,i){var f,r,e,u;for("string"==typeof n&&(n=[[null,n,""]]),f={},r=0;r<this.length;r++)e=this[r][0],"number"==typeof e&&(f[e]=!0);for(r=0;r<n.length;r++)u=n[r],"number"==typeof u[0]&&f[u[0]]||(i&&!u[2]?u[2]=i:i&&(u[2]="("+u[2]+") and ("+i+")"),t.push(u))},t}},function(n){n.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAArCAYAAADhXXHAAAAACXBIWXMAAC4jAAAuIwF4pT92AAABvklEQVRYw83Z23GDMBAF0AsNhBIowSVQgjuISnAJKSEdZNOBS6CDOBUkqSC4gs2PyGhAQg92se4M4w8bccYW2hVumBmRdAB6ADfopQcw2SOYNoIkAL8APgB8AzgLI0/2S/iy1xkt3B9m9h0dM9/YHxM4J/c4MfPkGX+y763OyYVKgUPQTXAJdC84Bg2CS6Gl4FSoF7wHmgvOhbrgzsW+8L4YJegccrEj749Rgs7ZXGdz8wbAeNbREcDTzrHvblEgBbAUFACuy6JALJeL0E/P9sbvmBnNojcgAM+oJ58AhrlnWM5ZA+C9RmiokakBvIJuNTLSc7hojqY0Mo8EB6Ep2CPBm9BU7BHgKDQHqwlOguZiNcDJ0JLe4FV4iaLYJjF16dLqnoob+EdDs8A1QJPBtUCTwDVBo+DaoJvgNvBIR6rDl9wirbA1QIPgVgl6VwHb+dAr7JkkS/Pg3mCkVOslxxV9yBFqSqTA/3N2Utkzye3pftw5OxzQ5tHeddcdzGj3o4VgClUwowgtAVOs3BpFaA6YUnsDowhNAVNu12UUoVtgCn2+ifxp1wO42Ner4KPR5dJ2tsse2ZLvTQxbVf4AmC2z7WnSvpIAAAAASUVORK5CYII="},function(n){n.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAArCAYAAADhXXHAAAAACXBIWXMAAC4jAAAuIwF4pT92AAAB2ElEQVRYw9XZoXPCMBTH8S+5KfDzQ29606CH3/SmQTO96aGHHn/F0Himh8eDZSblQknSJH2F0DtEQw8+12vyfulr7XY7LuW4qvj+DugD18AC+AE2woa+/mz07y9cF7Y8d7YPDEtjK2AsCB4BvdLYHPi0XawioAA3wAfQaQiKHhuFYl1QSbAL6gWrSKgEuArqBKsEaB1wKNQKVsasHybcpRhwLNQED0zsoMbzFwJOhWL6Cmzd2e0D14Wi1/k9di2wFNnAEtBifd9jv4GtIPgaeBOCAkzLFayr/6idWSSY6DJ8sHT96VK6zRFqKwo5gQ+grnKbA/gI6gsy5wRboT7sucBOaBX21GAvNAR7KnAlNBTbNDgIGoMtwO/C0GkoNBZbN525tk+dJrAj4F4YGxXgVQS019DkCgarM0OjwCoDaDBYZQINAquMoJVglRnUC1YZQp1g1RB0Jryn65jYJ0HoRGPHguDX8hsZ6VAiGX4eUrJBbHqSArdN7LLBmCcBnpvYWfHWo6E8Wge8Ar7Kj8E4ARwcnBPBB20BE7uJBMdAU8BH/YvyBAsFp0BjwNZGi201qALXgYaAnR0hX2upAzwDj/p8raFL5I4u8ALc6vNfvc+ztq5al9Rh/AfwZZ/LmlMllAAAAABJRU5ErkJggg=="},function(n){n.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAArCAYAAADhXXHAAAAACXBIWXMAAC4jAAAuIwF4pT92AAAAnUlEQVRYw+3Z0QnCMBSF4T/FATqCG1g3cISO0NE6iiPoCE5gneD40ohPvgkJ/AcC9/EjHELgliT0koGOIlasWLFixYoVK1asWLFixYoVK1bsjxy+5hlYgLEx47ofSEKSJW1nTUJJMgLPDlpwHoCpk8rOvgZixf4Zu3Vi3cq+WroBp4ahL+BYa3AB7o1CH7vvc7M1U4N/g2sdSk8bxjfDaMNdr+hmAQAAAABJRU5ErkJggg=="},function(n){n.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAArCAYAAADhXXHAAAAACXBIWXMAAC4jAAAuIwF4pT92AAAApklEQVRYw+3ZLQ4CMRCG4bcbFOvXg99T7FG4BafAw1VALx7dWyy2mIoGgSOZJu/n6p70ZybppFIKvWSgo4gVK1asWLFixYoVK1asWLFixYoV+yO7r/UMHIAxiO8FZGBrsUfgDEwBN/QNXIA11S/PW1BoCz4N9ein4Nd1Dyw9PbDR0iVW7J+xudax6HkOtZVdg0MfQE7N0G4GlmANYgNW4A6QepowfgDMXB26b1V6LAAAAABJRU5ErkJggg=="},function(n){n.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAArCAYAAAAOnxr+AAAACXBIWXMAAC4jAAAuIwF4pT92AAAAvElEQVRYw+3ZSw0CMRSF4b8T9iAFB4wDkDAWcICEkTA4GAeAA3AADurgsCkbAgsSMrmFczZNd1/a3vSVJFFDGipJNdBZaRdAB2wC2TIwAgNAkrQEjsA86GBegDZJGoF18JnfJtVR9idXvaGGGmrod/b6V9kD14k9LbD6FDqUM8CU2b2Deo0aaqihhhpqqKGGGhr1hH/wiP469FaBMzflEhc9PZKQ1CtmsqROEunpHbeNNN3A+dFJ/mf6V+gduGPIoUgKLbAAAAAASUVORK5CYII="},function(n){n.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAArCAYAAAAOnxr+AAAACXBIWXMAAC4jAAAuIwF4pT92AAAAvUlEQVRYw+3ZsQ3CMBCF4d8WFekZgBqWIDUDZACmYBQWYIn0pGYAegZIexROERHRIBTdhXeVy08+yT4/JzMjQmWCVBjoarSugK0z3/0degKODjeyBy5Am8ysARrnnT8nM7sCa+fQLgdAAlQ6ngQVVFBBfzeUTK6t8VAwU328ztV6QQUVVFBBBRVUUEG9Ds41sJvZs/8GelDrlw7tAjhvmZLo9o6RD4bEGUp+X1My/I0T4HN4rrcASf9M/wp9ASNzIKYYz2hAAAAAAElFTkSuQmCC"},function(n){n.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAArCAYAAADhXXHAAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAALiMAAC4jAXilP3YAAAHOSURBVFhH1ZiLUcMwEEQNDcQl0AEuISVABZhOUkroICVAB6ECoINQgdmVfR5FlmQrkZzjzezEzsc8NPqcdNd1XfVfuB9ec3NAmv4yiRo5ImzBlm+cwZYtEHJCGsT3eSgHxKZFxs/tL+aMkCK8R3yMwu4PcsVmiXBIVDDCvh/miEtMeE5UaEsNMJcN8o64g26PvPSXs9S+/zRHQtgtvLRFCb9blZpnYw/9Rb6RR3M3zxtiprFbyKYwipK1+uwlnIkSrbITUaJR1itKtMkGRYk2WRZAQbTNBpzWtggrrwnaWja00hk0DrCgsEZZ4hXWKksmwjLAHobkgOv+V3+ZhXHQiWxKqXYLKNyILDdqbPKlldASPhA+Mxc7uwatkSOSix1iP//q2APshLBvfJo7hbizgQj/mDtl+KYuCj8h7NSqCM2zXJvZwqqEY4uCOuGYLKEwJ3kVzMlyscg5915FTFbdqhaSVbn8+mTV1gmurOqCxpZNEeUu9BlZd1obioTkQ7IhPGTjYZuPIoUMK/GUFrX39asuHJTlH3w1d3FCBxCrCUufZX+NCUdPSsAqwu4A8wnPiQrFhW1Z4govFRWKCoeOjzjoZF92CdwpZy6AquoPvJRHJxB8bJ8AAAAASUVORK5CYII="},function(n){n.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAArCAYAAADhXXHAAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAALiMAAC4jAXilP3YAAAG/SURBVFhH1ZgxUsMwEEUNJRyAGmp6qKGn5xRQQ08NNfRQQw11DpAaanIAWrMv8WaELSlexhLLm/mRnImiF48jr7zVtm3zX9ju2ik5llxLdpdHNg4kT5I7yWB8Cdl9yZHkRmIRRpQxOxK+YzC+hKwSnTBBKKoMxpeUBSbkksgRE1V+CJeWhUPJ5ao7ICeqrIVryMKJpC88RlTZk1SThVDYIvoluZIsSqyz511SfEg4UxbRdw5qnlmFa9AsCn8hO4aBKHiUjYqCN9mkKHiSzYqCJ9lPSVIUPMmySqTudEu8XbOxO90ab7KQFPYoC1Fhr7IwENbagMLCUtXnoCTM1QZW3iS3dFT2mRfHvEjuVfZUckFnQh67dgqo1GYqC1MLn3XtZIR/sFcJW2C39FcD18KxpcutcGqddSmcuykg/LDq+iAnC/OudUFOVrfLbkjJWvb11YjJuhSFvqxbUQhlXYuCylpE2YXy2SkLlVEgaxVluzyTIEutWQ1kKZYtouF2maK4mjCyFN6bJsw9gKgmrNdsbsKNT0qEKsIqC7EJx4gqxYVDWQgntIgqRYXDbY3CLpcVgmdPC974BYy3/MgRNM03hR9ubFTHT48AAAAASUVORK5CYII="},function(n){n.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAArCAYAAADhXXHAAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAALiMAAC4jAXilP3YAAAG4SURBVFhHvZnhUYNAEEbRBkwH2oGUkA40FWgJKSEdaAmxA0vQDmIHKSFWgPuAHZkEAnd8y5v5kuNHMm+WY1mSm6qqCiGlZdUspXzxopY9Wu6bpZQfSxlRWapwVx9p2dy2CxUHy9ryWx9pKdWyECYcIQshwlGyIBeOlAWpcLQsyISXkAWEX5tlPkvJwnP7ns1SsnvLS7PMZwlZiShEy8pEIVJWKgpRsnJRiJBNFf2wbCzjfZgRUZi9JYWDxT9bWk6WIXbKym4tKRVloObO5oze6ZClWX9a5jyOcOrfmuUkXPRUH/1zVRhZpvsnCxN+jnDqHh0SdQaFu9vg0ZIqrBZ1eoXP92yKcJSocyHcd4FNEY4WdbrCR1rGrukMF9BWVhZvLZ7U9rS2nH9HVvoq63iFu+RUlOpIuCYLCCPIqVjq1A9j5R3aBnMY2kKzMlbZHPQVbVHLhomCUjZUFFSy35ZQUVDIMo+Gi4JCltFwERSy75Y54+VkFLLcKHLHyyRUF1jOeJmMShbChZWy0Df8yFDLgg8/cpCN6I9cdHJhZHmy7X2anAnCtDUZ/j/Yg2X2j709MHhTDAFF8QdK9SRpUl2yFgAAAABJRU5ErkJggg=="},function(n){n.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAArCAYAAADhXXHAAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAALiMAAC4jAXilP3YAAAGMSURBVFhHvdk7TsNAFIVhQ0l6elLDJqCGngXQU7MA6rALahZATQ81C6APrXP/jEaKHD/i8TnzS1eaICF/2I4f4qxt20bYOmaVlrK2Mb8s1Nj3mIu0lPYZszlPa1kvMf9pKe02Zq3Gcrhc4JUaSzawA0sWsAtLcrATS1KwG0sycA0sAd6kZXm1sNzVHtOyvBpYoK8xV/tPC3JjZVByYqVQcmHlUHJgLVBSY0ugPP7xO5PXYSW2FMr19ytm8sahxD7ElEBzk3c6sFysn/afymKPvsXMueh3oblRMNibmPuYZ34wsyWHfqhB8OFpwKvDHLADmusFd8/ZU8FOaO4I3PcFmwLXgOYOwVtexdnwdUy3vg2UQPnD2eji+vZsrruHS/eoBEpjWMpgrhi1Dv1gY6fBkuRQmtqzJVmgpMbaoKTEWqGkwtqhpMBWgZICWwVKCuwpzxKSFNi5T2vFqb5gVcAqLNnBSixZwWos2cBg/9JSmgUM9iMt5QFe8tZ8VP6n3WXMHQtxPzHfabm0ptkBwWhpthzMp7YAAAAASUVORK5CYII="},function(n,t,i){function o(n,t){for(var r,f,i,o,e=0;e<n.length;e++)if(r=n[e],f=u[r.id],f){for(f.refs++,i=0;i<f.parts.length;i++)f.parts[i](r.parts[i]);for(;i<r.parts.length;i++)f.parts.push(v(r.parts[i],t))}else{for(o=[],i=0;i<r.parts.length;i++)o.push(v(r.parts[i],t));u[r.id]={id:r.id,refs:1,parts:o}}}function s(n,t){for(var e=[],u={},f=0;f<n.length;f++){var i=n[f],r=t.base?i[0]+t.base:i[0],o={css:i[1],media:i[2],sourceMap:i[3]};u[r]?u[r].parts.push(o):e.push(u[r]={id:r,parts:[o]})}return e}function h(n,t){var i=f(n.insertInto),u,e;if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");if(u=r[r.length-1],"top"===n.insertAt)u?u.nextSibling?i.insertBefore(t,u.nextSibling):i.appendChild(t):i.insertBefore(t,i.firstChild),r.push(t);else if("bottom"===n.insertAt)i.appendChild(t);else{if("object"!=typeof n.insertAt||!n.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");e=f(n.insertAt.before,i);i.insertBefore(t,e)}}function c(n){if(null===n.parentNode)return!1;n.parentNode.removeChild(n);var t=r.indexOf(n);t>=0&&r.splice(t,1)}function l(n){var t=document.createElement("style"),r;return(void 0===n.attrs.type&&(n.attrs.type="text/css"),void 0===n.attrs.nonce)&&(r=function(){return i.nc}(),r&&(n.attrs.nonce=r)),a(t,n.attrs),h(n,t),t}function a(n,t){Object.keys(t).forEach(function(i){n.setAttribute(i,t[i])})}function v(n,t){var i,r,u,o,f;if(t.transform&&n.css){if(!(o="function"==typeof t.transform?t.transform(n.css):t.transform.default(n.css)))return function(){};n.css=o}return t.singleton?(f=b++,i=e||(e=l(t)),r=p.bind(null,i,f,!1),u=p.bind(null,i,f,!0)):n.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(i=function(n){var t=document.createElement("link");return void 0===n.attrs.type&&(n.attrs.type="text/css"),n.attrs.rel="stylesheet",a(t,n.attrs),h(n,t),t}(t),r=function(n,t,i){var r=i.css,u=i.sourceMap,o=void 0===t.convertToAbsoluteUrls&&u,e,f;(t.convertToAbsoluteUrls||o)&&(r=k(r));u&&(r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(u))))+" */");e=new Blob([r],{type:"text/css"});f=n.href;n.href=URL.createObjectURL(e);f&&URL.revokeObjectURL(f)}.bind(null,i,t),u=function(){c(i);i.href&&URL.revokeObjectURL(i.href)}):(i=l(t),r=function(n,t){var i=t.css,r=t.media;if(r&&n.setAttribute("media",r),n.styleSheet)n.styleSheet.cssText=i;else{for(;n.firstChild;)n.removeChild(n.firstChild);n.appendChild(document.createTextNode(i))}}.bind(null,i),u=function(){c(i)}),r(n),function(t){if(t){if(t.css===n.css&&t.media===n.media&&t.sourceMap===n.sourceMap)return;r(n=t)}else u()}}function p(n,t,i,r){var e=i?"":r.css,f,u;n.styleSheet?n.styleSheet.cssText=y(t,e):(f=document.createTextNode(e),u=n.childNodes,u[t]&&n.removeChild(u[t]),u.length?n.insertBefore(f,u[t]):n.appendChild(f))}var u={},w=function(n){var t;return function(){return void 0===t&&(t=n.apply(this,arguments)),t}}(function(){return window&&document&&document.all&&!window.atob}),f=function(){var n={};return function(t,i){if("function"==typeof t)return t();if(void 0===n[t]){var r=function(n,t){return t?t.querySelector(n):document.querySelector(n)}.call(this,t,i);if(window.HTMLIFrameElement&&r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch(t){r=null}n[t]=r}return n[t]}}(),e=null,b=0,r=[],k=i(17),y;n.exports=function(n,t){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(t=t||{}).attrs="object"==typeof t.attrs?t.attrs:{};t.singleton||"boolean"==typeof t.singleton||(t.singleton=w());t.insertInto||(t.insertInto="head");t.insertAt||(t.insertAt="bottom");var i=s(n,t);return o(i,t),function(n){for(var c,f,h,e=[],r=0;r<i.length;r++)c=i[r],(f=u[c.id]).refs--,e.push(f);for(n&&o(s(n,t),t),r=0;r<e.length;r++)if(0===(f=e[r]).refs){for(h=0;h<f.parts.length;h++)f.parts[h]();delete u[f.id]}}};y=function(){var n=[];return function(t,i){return n[t]=i,n.filter(Boolean).join("\n")}}()},function(n){n.exports=function(n){var t="undefined"!=typeof window&&window.location,i,r;if(!t)throw new Error("fixUrls requires window.location");return!n||"string"!=typeof n?n:(i=t.protocol+"//"+t.host,r=i+t.pathname.replace(/\/[^\/]*$/,"/"),n.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(n,t){var f,u=t.trim().replace(/^"(.*)"$/,function(n,t){return t}).replace(/^'(.*)'$/,function(n,t){return t});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(u)?n:(f=0===u.indexOf("//")?u:0===u.indexOf("/")?i+u:r+u.replace(/^\.\//,""),"url("+JSON.stringify(f)+")")}))}},function(n,t,i){"use strict";function nt(n,t){for(var i,r=0;r<t.length;r++)i=t[r],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}function tt(n,t){for(var i,r=0;r<t.length;r++)i=t[r],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}function it(n,t){for(var i,r=0;r<t.length;r++)i=t[r],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}function rt(n,t){for(var i,r=0;r<t.length;r++)i=t[r],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}function ut(n,t){for(var i,r=0;r<t.length;r++)i=t[r],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}function ft(n,t){for(var i,r=0;r<t.length;r++)i=t[r],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}function et(n,t){for(var i,r=0;r<t.length;r++)i=t[r],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}function st(n,t){for(var i,r=0;r<t.length;r++)i=t[r],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}function ht(n,t){for(var i,r=0;r<t.length;r++)i=t[r],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}function ct(n,t){for(var i,r=0;r<t.length;r++)i=t[r],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}function lt(n,t){for(var i,r=0;r<t.length;r++)i=t[r],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}function at(n,t){for(var i,r=0;r<t.length;r++)i=t[r],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}function yt(n,t){for(var i,r=0;r<t.length;r++)i=t[r],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}function wt(n,t){for(var i,r=0;r<t.length;r++)i=t[r],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}function kt(n,t){for(var i,r=0;r<t.length;r++)i=t[r],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}function ni(n,t){for(var i,r=0;r<t.length;r++)i=t[r],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}function ti(n,t){for(var i,r=0;r<t.length;r++)i=t[r],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}function ri(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}function ui(n,t){for(var i,r=0;r<t.length;r++)i=t[r],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}function fi(n,t,i){return t&&ui(n.prototype,t),i&&ui(n,i),n}function oi(n,t){for(var i,r=0;r<t.length;r++)i=t[r],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}function si(n,t){for(var i,r=0;r<t.length;r++)i=t[r],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}function hi(n){return(hi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n})(n)}function ci(n,t){for(var i,r=0;r<t.length;r++)i=t[r],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}function yi(n,t){return!t||"object"!==hi(t)&&"function"!=typeof t?function(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(n):t}function d(n,t,i){return(d="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(n,t,i){var u=function(n,t){for(;!Object.prototype.hasOwnProperty.call(n,t)&&null!==(n=p(n)););return n}(n,t),r;if(u)return r=Object.getOwnPropertyDescriptor(u,t),r.get?r.get.call(i):r.value})(n,t,i||n)}function p(n){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)})(n)}function li(n,t){return(li=Object.setPrototypeOf||function(n,t){return n.__proto__=t,n})(n,t)}function ai(n,t){for(var i,r=0;r<t.length;r++)i=t[r],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}var f,e,u,k,h,o,l,ot,s,r,a,w,c,vt,pt,bt,dt,gt,b,ii,ei,y,v,g,vi;i.r(t);f=function(){function n(){!function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}(this,n)}return function(n,t,i){t&&nt(n.prototype,t);i&&nt(n,i)}(n,null,[{key:"safeXmlCharactersEntities",get:function(){return{tagOpener:"&laquo;",tagCloser:"&raquo;",doubleQuote:"&uml;",realDoubleQuote:"&quot;"}}},{key:"safeBadBlackboardCharacters",get:function(){return{ltElement:"«mo»<«/mo»",gtElement:"«mo»>«/mo»",ampElement:"«mo»&«/mo»"}}},{key:"safeGoodBlackboardCharacters",get:function(){return{ltElement:"«mo»§lt;«/mo»",gtElement:"«mo»§gt;«/mo»",ampElement:"«mo»§amp;«/mo»"}}},{key:"xmlCharacters",get:function(){return{id:"xmlCharacters",tagOpener:"<",tagCloser:">",doubleQuote:'"',ampersand:"&",quote:"'"}}},{key:"safeXmlCharacters",get:function(){return{id:"safeXmlCharacters",tagOpener:"«",tagCloser:"»",doubleQuote:"¨",ampersand:"§",quote:"`",realDoubleQuote:"¨"}}}]),n}();e=function(){function n(){!function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}(this,n)}return function(n,t,i){t&&tt(n.prototype,t);i&&tt(n,i)}(n,null,[{key:"isMathmlInAttribute",value:function(n,t){var i="[\\s]*(".concat("\"[^\"]*\"|'[^']*'",")[\\s]*=[\\s]*[\\w-]+[\\s]*"),r="('".concat(i,"')*"),u="^".concat("['\"][\\s]*=[\\s]*[\\w-]+").concat(r,"[\\s]+gmi<"),f=new RegExp(u),e=n.substring(0,t).split("").reverse().join("");return f.test(e)}},{key:"safeXmlDecode",value:function(n){var e=f.safeXmlCharactersEntities.tagOpener,o=f.safeXmlCharactersEntities.tagCloser,s=f.safeXmlCharactersEntities.doubleQuote,h=f.safeXmlCharactersEntities.realDoubleQuote,c,l,i;n=(n=(n=(n=n.split(e).join(f.safeXmlCharacters.tagOpener)).split(o).join(f.safeXmlCharacters.tagCloser)).split(s).join(f.safeXmlCharacters.doubleQuote)).split(h).join(f.safeXmlCharacters.realDoubleQuote);var a=f.safeBadBlackboardCharacters.ltElement,v=f.safeBadBlackboardCharacters.gtElement,y=f.safeBadBlackboardCharacters.ampElement;"_wrs_blackboard"in window&&window._wrs_blackboard&&(n=(n=(n=n.split(a).join(f.safeGoodBlackboardCharacters.ltElement)).split(v).join(f.safeGoodBlackboardCharacters.gtElement)).split(y).join(f.safeGoodBlackboardCharacters.ampElement));e=f.safeXmlCharacters.tagOpener;o=f.safeXmlCharacters.tagCloser;s=f.safeXmlCharacters.doubleQuote;h=f.safeXmlCharacters.realDoubleQuote;c=f.safeXmlCharacters.ampersand;l=f.safeXmlCharacters.quote;n=(n=(n=(n=(n=n.split(e).join(f.xmlCharacters.tagOpener)).split(o).join(f.xmlCharacters.tagCloser)).split(s).join(f.xmlCharacters.doubleQuote)).split(c).join(f.xmlCharacters.ampersand)).split(l).join(f.xmlCharacters.quote);for(var r="",t=null,u=0;u<n.length;u+=1)i=n.charAt(u),null==t?"$"===i?t="":r+=i:";"===i?(r+="&".concat(t),t=null):i.match(/([a-zA-Z0-9#._-] | '-')/)?t+=i:(r+="$".concat(t),t=null,u-=1);return r}},{key:"safeXmlEncode",value:function(n){var t=f.xmlCharacters.tagOpener,i=f.xmlCharacters.tagCloser,r=f.xmlCharacters.doubleQuote,u=f.xmlCharacters.ampersand,e=f.xmlCharacters.quote;return(n=(n=(n=(n=n.split(t).join(f.safeXmlCharacters.tagOpener)).split(i).join(f.safeXmlCharacters.tagCloser)).split(r).join(f.safeXmlCharacters.doubleQuote)).split(u).join(f.safeXmlCharacters.ampersand)).split(e).join(f.safeXmlCharacters.quote)}},{key:"mathMLEntities",value:function(n){for(var u,f,e,i="",t=0;t<n.length;t+=1)u=n.charAt(t),n.codePointAt(t)>128?(i+="&#".concat(n.codePointAt(t),";"),n.codePointAt(t)>65535&&(t+=1)):"&"===u?(f=n.indexOf(";",t+1),f>=0?(e=document.createElement("span"),e.innerHTML=n.substring(t,f+1),i+="&#".concat(r.fixedCharCodeAt(e.textContent||e.innerText,0),";"),t=f):i+=u):i+=u;return i}},{key:"addCustomEditorClassAttribute",value:function(n,t){var r="",u=n.indexOf("<math"),i;return 0===u&&(i=n.indexOf(">"),-1===n.indexOf("class"))?(r="".concat(n.substr(u,i),' class="wrs_').concat(t,'">'),r+n.substr(i+1,n.length)):n}},{key:"removeCustomEditorClassAttribute",value:function(n,t){return-1===n.indexOf("class")||-1===n.indexOf("wrs_".concat(t))?n:-1!==n.indexOf('class="wrs_'.concat(t,'"'))?n.replace('class="wrs_'.concat(t,'"'),""):n.replace("wrs_".concat(t),"")}},{key:"addAnnotation",value:function(t,i,r){var u="",f;if(-1!==t.indexOf("<annotation"))f=t.indexOf("<\/semantics>"),u="".concat(t.substring(0,f),'<annotation encoding="').concat(r,'">').concat(i,"<\/annotation>").concat(t.substring(f));else if(n.isEmpty(t)){var e=t.indexOf("/>"),o=t.indexOf(">"),h=o===e?e:o;u="".concat(t.substring(0,h),'><semantics><annotation encoding="').concat(r,'">').concat(i,"<\/annotation><\/semantics><\/math>")}else{var s=t.indexOf(">")+1,c=t.lastIndexOf("<\/math>"),l=t.substring(s,c);u="".concat(t.substring(0,s),"<semantics>").concat(l,'<annotation encoding="').concat(r,'">').concat(i,"<\/annotation><\/semantics><\/math>")}return u}},{key:"removeAnnotation",value:function(t,i){var f=t,s='<annotation encoding="'.concat(i,'">'),u=t.indexOf(s),e,r,o;if(-1!==u){for(e=!1,r=t.indexOf("<annotation");-1!==r;)r!==u&&(e=!0),r=t.indexOf("<annotation",r+1);e?(o=t.indexOf("<\/annotation>",u)+13,f=t.substring(0,u)+t.substring(o)):f=n.removeSemantics(t)}return f}},{key:"removeSemantics",value:function(n){var r=n,t=n.indexOf("<semantics>"),i;return-1!==t&&(i=n.indexOf("<annotation",t+11),-1!==i&&(r=n.substring(0,t)+n.substring(t+11,i)+"<\/math>")),r}},{key:"removeSemanticsOcurrences",value:function(n){for(var e,v,h,y,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:f.xmlCharacters,r="".concat(i.tagOpener,"math"),o="".concat(i.tagOpener,"/math").concat(i.tagCloser),p="/".concat(i.tagCloser),w=i.tagCloser,c="".concat(i.tagOpener,"semantics").concat(i.tagCloser),b="".concat(i.tagOpener,"annotation encoding="),s="",t=n.indexOf(r),u=0;-1!==t;){s+=n.substring(u,t);var l=n.indexOf(o,t),a=n.indexOf(p,t),k=n.indexOf(w,t);-1!==l?u=l:a===k-1&&(u=a);e=n.indexOf(c,t);-1!==e?(v=n.substring(t,e),h=n.indexOf(b,t),-1!==h?(y=e+c.length,s+=v+n.substring(y,h)+o,t=n.indexOf(r,t+r.length),u+=o.length):(u=t,t=n.indexOf(r,t+r.length))):(u=t,t=n.indexOf(r,t+r.length))}return s+n.substring(u,n.length)}},{key:"containClass",value:function(n,t){var i=n.indexOf("class"),r;return-1===i?!1:(r=n.indexOf(">",i),-1!==n.substring(i,r).indexOf(t))}},{key:"isEmpty",value:function(n){var r=n.indexOf(">"),u=n.indexOf("/>"),t=!1,i;return(-1!==u&&u===r-1&&(t=!0),t)||(i=new RegExp("<\/(.+:)?math>").exec(n),i&&(t=r+1===i.index)),t}},{key:"encodeProperties",value:function(n){return n.replace(/\w+=".*?"/g,function(n){var t=n.indexOf('"'),i=n.substring(t+1,n.length-1),u=r.htmlEntities(i);return"".concat(n.substring(0,t+1)).concat(u,'"')})}}]),n}();u=function(){function n(){!function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}(this,n)}return function(n,t,i){t&&it(n.prototype,t);i&&it(n,i)}(n,null,[{key:"addConfiguration",value:function(t){Object.assign(n.properties,t)}},{key:"get",value:function(t){return Object.prototype.hasOwnProperty.call(n.properties,t)?n.properties[t]:!!Object.prototype.hasOwnProperty.call(n.properties,"_wrs_conf_")&&n.properties["_wrs_conf_".concat(t)]}},{key:"set",value:function(t,i){n.properties[t]=i}},{key:"update",value:function(t,i){if(n.get(t)){var r=Object.assign(n.get(t),i);n.set(t,r)}else n.set(t,i)}},{key:"properties",get:function(){return n._properties},set:function(t){n._properties=t}}]),n}();u._properties={};k=function(){function n(){!function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}(this,n);this.cache=[]}return function(n,t,i){t&&rt(n.prototype,t);i&&rt(n,i)}(n,[{key:"populate",value:function(n,t){this.cache[n]=t}},{key:"get",value:function(n){return!!Object.prototype.hasOwnProperty.call(this.cache,n)&&this.cache[n]}}]),n}();h=function(){function n(){!function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}(this,n);this.listeners=[]}return function(n,t,i){t&&ut(n.prototype,t);i&&ut(n,i)}(n,[{key:"add",value:function(n){this.listeners.push(n)}},{key:"fire",value:function(n,t){for(var i=0;i<this.listeners.length&&!t.cancelled;i+=1)this.listeners[i].eventName===n&&this.listeners[i].callback(t);return t.defaultPrevented}}],[{key:"newListener",value:function(n,t){var i={};return i.eventName=n,i.callback=t,i}}]),n}();o=function(){function n(){!function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}(this,n)}return function(n,t,i){t&&ft(n.prototype,t);i&&ft(n,i)}(n,null,[{key:"addListener",value:function(t){n.listeners.add(t)}},{key:"fireEvent",value:function(t,i){n.listeners.fire(t,i)}},{key:"setServicePath",value:function(t,i){n.servicePaths[t]=i}},{key:"getServicePath",value:function(t){return n.servicePaths[t]}},{key:"getServerURL",value:function(){var n=window.location.href.split("/"),t="".concat(n[0],"//").concat(n[2]);return ADMIN_CONSTANTS.MATHTYPE_LINK&&ADMIN_CONSTANTS.MATHTYPE_LINK!==""?ADMIN_CONSTANTS.MATHTYPE_LINK:t}},{key:"init",value:function(t){var r,h,u;n.parameters=t;var i=n.createServiceURI("configurationjs"),f=n.createServiceURI("createimage"),e=n.createServiceURI("showimage"),o=n.createServiceURI("getmathml"),s=n.createServiceURI("service");0===n.parameters.URI.indexOf("/")&&(r=n.getServerURL(),i=r+i,e=r+e,f=r+f,o=r+o,s=r+s);ADMIN_CONSTANTS.MATHTYPE_LINK&&ADMIN_CONSTANTS.MATHTYPE_LINK!==""&&(h=window.location.href.split("/"),u="".concat(h[0],"//").concat(h[2]),i=i.replace(u,ADMIN_CONSTANTS.MATHTYPE_LINK),f=f.replace(u,ADMIN_CONSTANTS.MATHTYPE_LINK),e=e.replace(u,ADMIN_CONSTANTS.MATHTYPE_LINK),o=o.replace(u,ADMIN_CONSTANTS.MATHTYPE_LINK),s=s.replace(u,ADMIN_CONSTANTS.MATHTYPE_LINK));n.setServicePath("configurationjs",i);n.setServicePath("showimage",e);n.setServicePath("createimage",f);n.setServicePath("service",s);n.setServicePath("getmathml",o);n.setServicePath("configurationjs",i);n.listeners.fire("onInit",{})}},{key:"getUrl",value:function(n,t){var u=window.location.toString().substr(0,window.location.toString().lastIndexOf("/")+1),i=r.createHttpRequest();return i?(void 0===t||void 0===t?i.open("GET",n,!1):"/"===n.substr(0,1)||"http://"===n.substr(0,7)||"https://"===n.substr(0,8)?i.open("POST",n,!1):i.open("POST",u+n,!1),void 0!==t&&t?(i.setRequestHeader("Content-type","application/x-www-form-urlencoded; charset=UTF-8"),i.send(r.httpBuildQuery(t))):i.send(null),i.responseText):""}},{key:"getService",value:function(t,i,r){var u,f,e;return!0===r?(f="".concat(n.getServicePath(t),"?").concat(i),u=n.getUrl(f)):(e=n.getServicePath(t),u=n.getUrl(e,i)),u}},{key:"getServerLanguageFromService",value:function(n){return-1!==n.indexOf(".php")?"php":-1!==n.indexOf(".aspx")?"aspx":-1!==n.indexOf("wirispluginengine")?"ruby":"java"}},{key:"createServiceURI",value:function(t){var i=n.serverExtension();return r.concatenateUrl(n.parameters.URI,t)+i}},{key:"serverExtension",value:function(){return-1!==n.parameters.server.indexOf("php")?".php":-1!==n.parameters.server.indexOf("aspx")?".aspx":""}},{key:"listeners",get:function(){return n._listeners}},{key:"parameters",get:function(){return n._parameters},set:function(t){n._parameters=t}},{key:"servicePaths",get:function(){return n._servicePaths},set:function(t){n._servicePaths=t}},{key:"integrationPath",get:function(){return n._integrationPath},set:function(t){n._integrationPath=t}}]),n}();o._servicePaths={};o._integrationPath="";o._listeners=new h;o._parameters={};l=function(){function n(){!function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}(this,n)}return function(n,t,i){t&&et(n.prototype,t);i&&et(n,i)}(n,null,[{key:"getLatexFromMathML",value:function(t){var h=e.removeSemantics(t),c=n.cache,l={service:"mathml2latex",mml:h},u=JSON.parse(o.getService("service",l)),i="",f,s;return"ok"===u.status&&(i=u.result.text,f=r.htmlEntities(i),s=e.addAnnotation(t,f,"LaTeX"),c.populate(i,s)),i}},{key:"getMathMLFromLatex",value:function(t,i){var h=n.cache,u,f,s,r;return n.cache.get(t)?n.cache.get(t):(u={service:"latex2mathml",latex:t},i&&(u.saveLatex=""),s=JSON.parse(o.getService("service",u)),"ok"===s.status?(r=s.result.text,f=-1===(r=r.split("\r").join("").split("\n").join(" ")).indexOf("semantics")&&-1===r.indexOf("annotation")?r=e.addAnnotation(r,t,"LaTeX"):r,h.get(t)||h.populate(t,r)):f="$$".concat(t,"$$"),f)}},{key:"parseMathmlToLatex",value:function(t,i){for(var s,u,c,l,h="",a="".concat(i.tagOpener,"math"),v="".concat(i.tagOpener,"/math").concat(i.tagCloser),y="".concat(i.tagOpener,"annotation encoding=").concat(i.doubleQuote,"LaTeX").concat(i.doubleQuote).concat(i.tagCloser),p="".concat(i.tagOpener,"/annotation").concat(i.tagCloser),o=t.indexOf(a),r=0;-1!==o;)(h+=t.substring(r,o),-1===(r=t.indexOf(v,o))?r=t.length-1:r+=v.length,-1!==(c=(u=t.substring(o,r)).indexOf(y)))?(c+=y.length,l=u.indexOf(p),s=u.substring(c,l),i===f.safeXmlCharacters&&(s=e.safeXmlDecode(s)),h+="$$".concat(s,"$$"),n.cache.populate(s,u)):h+=u,o=t.indexOf(a,r);return h+t.substring(r,t.length)}},{key:"getLatexFromTextNode",value:function(n,t,i){function h(n,t,r){for(var u=n.nodeValue.indexOf(r,t);-1===u;){if(!(n=n.nextSibling))return null;u=n.nodeValue?n.nodeValue.indexOf(i.close):-1}return{node:n,position:u}}function c(n,t,i,r){if(n===i)return t<=r;for(;n&&n!==i;)n=n.nextSibling;return n===i}var u,e,s,r,f,l,o;for(void 0!==i&&null!=i||(i={open:"$$",close:"$$"}),e=n;e.previousSibling&&3===e.previousSibling.nodeType;)e=e.previousSibling;r={node:e,position:0};f=i.open.length;do{if(null==(u=h(r.node,r.position,i.open))||c(n,t,u.node,u.position)||null==(r=h(u.node,u.position+f,i.close)))return null;r.position+=f}while(c(r.node,r.position,n,t));if(u.node===r.node)s=u.node.nodeValue.substring(u.position+f,r.position-f);else{l=u.position+f;s=u.node.nodeValue.substring(l,u.node.nodeValue.length);o=u.node;do s+=(o=o.nextSibling)===r.node?r.node.nodeValue.substring(0,r.position-f):o.nodeValue?o.nodeValue:"";while(o!==r.node)}return{latex:s,startNode:u.node,startPosition:u.position,endNode:r.node,endPosition:r.position}}},{key:"cache",get:function(){return n._cache},set:function(t){n._cache=t}}]),n}();l._cache=new k;ot=i(0);s=function(){function n(){throw function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}(this,n),new Error("Static class StringManager can not be instantiated.");}return function(n,t,i){t&&st(n.prototype,t);i&&st(n,i)}(n,null,[{key:"get",value:function(n){var t=this.language;return t in this.strings||(console.warn("Unknown language ".concat(t," set in StringManager.")),t="en"),n in this.strings[t]?this.strings[t][n]:(console.warn("Unknown key ".concat(n," in StringManager.")),n)}}]),n}();s.strings=ot;s.language="en";r=function(){function n(){!function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}(this,n)}return function(n,t,i){t&&ht(n.prototype,t);i&&ht(n,i)}(n,null,[{key:"fireEvent",value:function(n,t){var i,r;return document.createEvent?(i=document.createEvent("HTMLEvents"),i.initEvent(t,!0,!0),!n.dispatchEvent(i)):(r=document.createEventObject(),n.fireEvent("on".concat(t),r))}},{key:"addEvent",value:function(n,t,i){n.addEventListener?n.addEventListener(t,i,!0):n.attachEvent&&n.attachEvent("on".concat(t),i)}},{key:"removeEvent",value:function(n,t,i){n.removeEventListener?n.removeEventListener(t,i,!0):n.detachEvent&&n.detachEvent("on".concat(t),i)}},{key:"addElementEvents",value:function(t,i,r,u){i&&n.addEvent(t,"dblclick",function(n){var t=n||window.event,r=t.srcElement?t.srcElement:t.target;i(r,t)});r&&n.addEvent(t,"mousedown",function(n){var t=n||window.event,i=t.srcElement?t.srcElement:t.target;r(i,t)});u&&n.addEvent(t,"mouseup",function(n){var t=n||window.event,i=t.srcElement?t.srcElement:t.target;u(i,t)})}},{key:"addClass",value:function(t,i){n.containsClass(t,i)||(t.className+=" ".concat(i))}},{key:"containsClass",value:function(n,t){if(null==n||!("className"in n))return!1;for(var r=n.className.split(" "),i=r.length-1;i>=0;i-=1)if(r[i]===t)return!0;return!1}},{key:"removeClass",value:function(n,t){for(var u="",r=n.className.split(" "),i=0;i<r.length;i+=1)r[i]!==t&&(u+="".concat(r[i]," "));n.className=u.trim()}},{key:"convertOldXmlinitialtextAttribute",value:function(n){var i="value=",e=n.indexOf("xmlinitialtext"),r=n.indexOf(i,e),o=n.charAt(r+i.length),u=r+i.length+1,s=n.indexOf(o,u),f=n.substring(u,s),t=f.split("«").join("§lt;");return t=(t=(t=t.split("»").join("§gt;")).split("&").join("§")).split("¨").join("§quot;"),n=n.split(f).join(t)}},{key:"createElement",value:function(t,i,r){var u,f;void 0===i&&(i={});void 0===r&&(r=document);try{f="<".concat(t);Object.keys(i).forEach(function(t){f+=" ".concat(t,'="').concat(n.htmlEntities(i[t]),'"')});f+=">";u=r.createElement(f)}catch(n){u=r.createElement(t);Object.keys(i).forEach(function(n){u.setAttribute(n,i[n])})}return u}},{key:"createObject",value:function(t,i){void 0===i&&(i=document);t=(t=(t=(t=t.split("<applet ").join('<span wirisObject="WirisApplet" ').split("<APPLET ").join('<span wirisObject="WirisApplet" ')).split("<\/applet>").join("<\/span>").split("<\/APPLET>").join("<\/span>")).split("<param ").join('<br wirisObject="WirisParam" ').split("<PARAM ").join('<br wirisObject="WirisParam" ')).split("<\/param>").join("<\/br>").split("<\/PARAM>").join("<\/br>");var r=n.createElement("div",{},i);return r.innerHTML=t,function t(r){var c,e,u,l,o,s,f,h;if(r.getAttribute&&"WirisParam"===r.getAttribute("wirisObject")){for(c={},e=0;e<r.attributes.length;e+=1)null!==r.attributes[e].nodeValue&&(c[r.attributes[e].nodeName]=r.attributes[e].nodeValue);u=n.createElement("param",c,i);u.NAME&&(u.name=u.NAME,u.value=u.VALUE);u.removeAttribute("wirisObject");r.parentNode.replaceChild(u,r)}else if(r.getAttribute&&"WirisApplet"===r.getAttribute("wirisObject")){for(l={},o=0;o<r.attributes.length;o+=1)null!==r.attributes[o].nodeValue&&(l[r.attributes[o].nodeName]=r.attributes[o].nodeValue);for(s=n.createElement("applet",l,i),s.removeAttribute("wirisObject"),f=0;f<r.childNodes.length;f+=1)t(r.childNodes[f]),"param"===r.childNodes[f].nodeName.toLowerCase()&&(s.appendChild(r.childNodes[f]),f-=1);r.parentNode.replaceChild(s,r)}else for(h=0;h<r.childNodes.length;h+=1)t(r.childNodes[h])}(r),r.firstChild}},{key:"createObjectCode",value:function(t){var i,r,u;if(void 0===t||null===t)return null;if(1===t.nodeType){for(i="<".concat(t.tagName),r=0;r<t.attributes.length;r+=1)t.attributes[r].specified&&(i+=" ".concat(t.attributes[r].name,'="').concat(n.htmlEntities(t.attributes[r].value),'"'));if(t.childNodes.length>0){for(i+=">",u=0;u<t.childNodes.length;u+=1)i+=n.createObject(t.childNodes[u]);i+="<\/".concat(t.tagName,">")}else i+="DIV"===t.nodeName||"SCRIPT"===t.nodeName?"><\/".concat(t.tagName,">"):"/>";return i}return 3===t.nodeType?n.htmlEntities(t.nodeValue):""}},{key:"concatenateUrl",value:function(n,t){var i="";return n.indexOf("/")!==n.length&&0!==t.indexOf("/")&&(i="/"),(n+i+t).replace(/([^:]\/)\/+/g,"$1")}},{key:"htmlEntities",value:function(n){return n.split("&").join("&amp;").split("<").join("&lt;").split(">").join("&gt;").split('"').join("&quot;")}},{key:"htmlEntitiesDecode",value:function(n){var t=document.createElement("textarea");return t.innerHTML=n,t.value}},{key:"createHttpRequest",value:function(){if("file://"===window.location.toString().substr(0,window.location.toString().lastIndexOf("/")+1).substr(0,7))throw s.get("exception_cross_site");if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(n){try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(n){return null}}}},{key:"httpBuildQuery",value:function(t){var i="";return Object.keys(t).forEach(function(r){null!=t[r]&&(i+="".concat(n.urlEncode(r),"=").concat(n.urlEncode(t[r]),"&"))}),"&"===i.substring(i.length-1)&&(i=i.substring(0,i.length-1)),i}},{key:"propertiesToString",value:function(t){var i=[],o,r,e,h,c,u,s,l,f;for(Object.keys(t).forEach(function(n){Object.prototype.hasOwnProperty.call(t,n)&&i.push(n)}),o=i.length,r=0;r<o;r+=1)for(e=r+1;e<o;e+=1)h=i[r],c=i[e],n.compareStrings(h,c)>0&&(i[r]=c,i[e]=h);for(u="",s=0;s<o;s+=1)l=i[s],u+=l,u+="=",f=t[l],u+=f=(f=(f=(f=f.replace("\\","\\\\")).replace("\n","\\n")).replace("\r","\\r")).replace("\t","\\t"),u+="\n";return u}},{key:"compareStrings",value:function(t,i){for(var f=t.length,e=i.length,o=f>e?e:f,u,r=0;r<o;r+=1)if(u=n.fixedCharCodeAt(t,r)-n.fixedCharCodeAt(i,r),0!==u)return u;return t.length-i.length}},{key:"fixedCharCodeAt",value:function(n,t){t=t||0;var u,r,i=n.charCodeAt(t);if(i>=55296&&i<=56319){if(u=i,r=n.charCodeAt(t+1),Number.isNaN(r))throw s.get("exception_high_surrogate");return 1024*(u-55296)+(r-56320)+65536}return!(i>=56320&&i<=57343)&&i}},{key:"urlToAssArray",value:function(n){var t,r,u,i;if((t=n.indexOf("?"))>0){for(r=n.substring(t+1).split("&"),u={},t=0;t<r.length;t+=1)i=r[t].split("="),i.length>1&&(u[i[0]]=decodeURIComponent(i[1].replace(/\+/g," ")));return u}return{}}},{key:"urlEncode",value:function(n){return encodeURIComponent(n)}},{key:"getWIRISImageOutput",value:function(t,i,r){var o=n.createObject(t),s,f;return o&&(o.className===u.get("imageClassName")||o.getAttribute(u.get("imageMathmlAttribute")))?i?(s=o.getAttribute(u.get("imageMathmlAttribute")),f=e.safeXmlDecode(s),u.get("saveHandTraces")||(f=e.removeAnnotation(f,"application/json")),null==f&&(f=o.getAttribute("alt")),r?e.safeXmlEncode(f):f):t:t}},{key:"getNodeLength",value:function(t){var i,r;if(3===t.nodeType)return t.nodeValue.length;if(1===t.nodeType){for(i={IMG:1,BR:1}[t.nodeName.toUpperCase()],void 0===i&&(i=0),r=0;r<t.childNodes.length;r+=1)i+=n.getNodeLength(t.childNodes[r]);return i}return 0}},{key:"getSelectedItem",value:function(t,i,r){var f,e,h,c,u,s,a,o,l;if(i?(f=t.contentWindow).focus():(f=window,t.focus()),document.selection&&!r)return(e=f.document.selection.createRange(),e.parentElement)?e.htmlText.length>0?0===e.text.length?n.getSelectedItem(t,i,!0):null:(f.document.execCommand("InsertImage",!1,"#"),u=e.parentElement(),"IMG"!==u.nodeName.toUpperCase()&&(e.pasteHTML('<span id="wrs_openEditorWindow_temporalObject"><\/span>'),u=f.document.getElementById("wrs_openEditorWindow_temporalObject")),u.nextSibling&&3===u.nextSibling.nodeType?(h=u.nextSibling,c=0):u.previousSibling&&3===u.previousSibling.nodeType?c=(h=u.previousSibling).nodeValue.length:(h=f.document.createTextNode(""),u.parentNode.insertBefore(h,u),c=0),u.parentNode.removeChild(u),{node:h,caretPosition:c}):e.length>1?null:{node:e.item(0)};if(f.getSelection){a=f.getSelection();try{s=a.getRangeAt(0)}catch(n){s=f.document.createRange()}if(o=s.startContainer,3===o.nodeType)return{node:o,caretPosition:s.startOffset};if(o!==s.endContainer)return null;if(1===o.nodeType&&(l=s.startOffset,o.childNodes[l]))return{node:o.childNodes[l]}}return null}},{key:"getSelectedItemOnTextarea",value:function(n){var i=document.createTextNode(n.value),t=l.getLatexFromTextNode(i,n.selectionStart);return null===t?null:{node:i,caretPosition:n.selectionStart,startPosition:t.startPosition,endPosition:t.endPosition}}},{key:"getElementsByNameFromString",value:function(n,t,i){var e=[],r,f,u;for(n=n.toLowerCase(),t=t.toLowerCase(),r=n.indexOf("<".concat(t," "));-1!==r;)f=void 0,f=i?">":"<\/".concat(t,">"),u=n.indexOf(f,r),-1!==u?(u+=f.length,e.push({start:r,end:u})):u=r+1,r=n.indexOf("<".concat(t," "),u);return e}},{key:"decode64",value:function(n){var f="+".charCodeAt(0),e="/".charCodeAt(0),i="0".charCodeAt(0),r="a".charCodeAt(0),u="A".charCodeAt(0),o="-".charCodeAt(0),s="_".charCodeAt(0),t=n.charCodeAt(0);return t===f||t===o?62:t===e||t===s?63:t<i?-1:t<i+10?t-i+26+26:t<u+26?t-u:t<r+26?t-r+26:null}},{key:"b64ToByteArray",value:function(t,i){var u,o,e,r,f;if(t.length%4>0)throw new Error("Invalid string. Length must be a multiple of 4");for(f=[],o=i||((e="="===t.charAt(t.length-2)?2:"="===t.charAt(t.length-1)?1:0)>0?t.length-4:t.length),r=0;r<o;r+=4)u=n.decode64(t.charAt(r))<<18|n.decode64(t.charAt(r+1))<<12|n.decode64(t.charAt(r+2))<<6|n.decode64(t.charAt(r+3)),f.push(u>>16&255),f.push(u>>8&255),f.push(255&u);return e&&(2===e?(u=n.decode64(t.charAt(r))<<2|n.decode64(t.charAt(r+1))>>4,f.push(255&u)):1===e&&(u=n.decode64(t.charAt(r))<<10|n.decode64(t.charAt(r+1))<<4|n.decode64(t.charAt(r+2))>>2,f.push(u>>8&255),f.push(255&u))),f}},{key:"readInt32",value:function(n){if(n.length<4)return!1;var t=n.splice(0,4);return t[0]<<24|t[1]<<16|t[2]<<8|t[3]<<0}},{key:"readByte",value:function(n){return n.shift()<<0}},{key:"readBytes",value:function(n,t,i){return n.splice(t,i)}},{key:"updateTextArea",value:function(n,t){if(n&&t)if(n.focus(),null!=n.selectionStart){var i=n.selectionEnd,r=n.value.substring(0,n.selectionStart),u=n.value.substring(i,n.value.length);n.value=r+t+u;n.selectionEnd=i+t.length}else document.selection.createRange().text=t}},{key:"updateExistingTextOnTextarea",value:function(n,t,i,r){n.focus();var u=n.value.substring(0,i);n.value=u+t+n.value.substring(r,n.value.length);n.selectionEnd=i+t.length}},{key:"addArgument",value:function(n,t,i){var r;return r=n.indexOf("?")>0?"&":"?","".concat(n+r+t,"=").concat(i)}}]),n}();a=function(){function n(){!function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}(this,n)}return function(n,t,i){t&&ct(n.prototype,t);i&&ct(n,i)}(n,null,[{key:"removeImgDataAttributes",value:function(n){var t=[],i=n.attributes;Object.keys(i).forEach(function(n){var r=i[n];0===r.name.indexOf("data-")&&t.push(r.name)});t.forEach(function(t){n.removeAttribute(t)})}},{key:"clone",value:function(n,t){var i=u.get("imageCustomEditorName");n.hasAttribute(i)||t.removeAttribute(i);[u.get("imageMathmlAttribute"),i,"alt","height","width","style","src","role"].forEach(function(i){var r=n.getAttribute(i);r&&t.setAttribute(i,r)})}},{key:"setImgSize",value:function(t,i,f){var e,o,s,v,c,h;if(f)if("svg"===u.get("imageFormat"))if("base64"!==u.get("saveMode"))e=n.getMetricsFromSvgString(i);else{for(o=t.src.substr(t.src.indexOf("base64,")+7,t.src.length),v="",s=r.b64ToByteArray(o,o.length),c=0;c<s.length;c+=1)v+=String.fromCharCode(s[c]);e=n.getMetricsFromSvgString(v)}else o=t.src.substr(t.src.indexOf("base64,")+7,t.src.length),s=r.b64ToByteArray(o,88),e=n.getMetricsFromBytes(s);else e=r.urlToAssArray(i);if(h=e.cw,h){var l=e.ch,y=e.cb,a=e.dpi;a&&(h=96*h/a,l=96*l/a,y=96*y/a);t.width=h;t.height=l;t.style.verticalAlign="-".concat(l-y,"px")}}},{key:"fixAfterResize",value:function(t){var i,r;(t.removeAttribute("style"),t.removeAttribute("width"),t.removeAttribute("height"),t.style.maxWidth="none",-1!==t.src.indexOf("data:image"))?"svg"===u.get("imageFormat")?(i=decodeURIComponent(t.src.substring(32,t.src.length)),n.setImgSize(t,i,!0)):(r=t.src.substring(22,t.src.length),n.setImgSize(t,r,!0)):n.setImgSize(t,t.src)}},{key:"getMetricsFromSvgString",value:function(n){var t=n.indexOf('height="'),i=n.indexOf('"',t+8,n.length),e=n.substring(t+8,i),u,f,r;return(t=n.indexOf('width="'),i=n.indexOf('"',t+7,n.length),u=n.substring(t+7,i),t=n.indexOf('wrs:baseline="'),i=n.indexOf('"',t+14,n.length),f=n.substring(t+14,i),void 0!==u)?(r=[],r.cw=u,r.ch=e,void 0!==f&&(r.cb=f),r):[]}},{key:"getMetricsFromBytes",value:function(n){var u,o,f,e,i,t;for(r.readBytes(n,0,8);n.length>=4;)1229472850===(f=r.readInt32(n))?(u=r.readInt32(n),o=r.readInt32(n),r.readInt32(n),r.readByte(n)):1650545477===f?e=r.readInt32(n):1883789683===f&&(i=r.readInt32(n),i=Math.round(i/39.37),r.readInt32(n),r.readByte(n)),r.readInt32(n);return void 0!==u?(t=[],t.cw=u,t.ch=o,t.dpi=i,e&&(t.cb=e),t):[]}}]),n}();w=function(){function n(){!function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}(this,n)}return function(n,t,i){t&&lt(n.prototype,t);i&&lt(n,i)}(n,null,[{key:"mathMLToAccessible",value:function(t,i,r){var u,f;return void 0===i&&(i="en"),e.containClass(t,"wrs_chemistry")&&(r.mode="chemistry"),u="",n.cache.get(t)?u=n.cache.get(t):(r.service="mathml2accessible",r.lang=i,f=JSON.parse(o.getService("service",r)),"error"!==f.status?(u=f.result.text,n.cache.populate(t,u)):u=s.get("error_convert_accessibility")),u}},{key:"cache",get:function(){return n._cache},set:function(t){n._cache=t}}]),n}();w._cache=new k;i(1);c=function(){function n(){!function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}(this,n)}return function(n,t,i){t&&at(n.prototype,t);i&&at(n,i)}(n,null,[{key:"mathmlToImgObject",value:function(t,i,f,s){var h=t.createElement("img"),c,v,y,l;if(h.align="middle",h.style.maxWidth="none",c=f||{},(c.mml=i,c.lang=s,c.metrics="true",c.centerbaseline="false","base64"===u.get("saveMode")&&"default"===u.get("base64savemode")&&(c.base64=!0),h.className=u.get("imageClassName"),-1!==i.indexOf('class="'))&&(v=i.substring(i.indexOf('class="')+7,i.length),v=(v=v.substring(0,v.indexOf('"'))).substring(4,v.length),h.setAttribute(u.get("imageCustomEditorName"),v)),u.get("wirisPluginPerformance")&&("xml"===u.get("saveMode")||"safeXml"===u.get("saveMode"))){if(l=JSON.parse(n.createShowImageSrc(c,s)),"warning"===l.status)try{l=JSON.parse(o.getService("showimage",c))}catch(n){return null}h.src="png"===(l=l.result).format?"data:image/png;base64,".concat(l.content):"data:image/svg+xml;charset=utf8,".concat(r.urlEncode(l.content));h.setAttribute(u.get("imageMathmlAttribute"),e.safeXmlEncode(i));a.setImgSize(h,l.content,!0);u.get("enableAccessibility")&&(h.alt=void 0===l.alt?w.mathMLToAccessible(i,s,c):l.alt)}else y=n.createImageSrc(i,c),h.setAttribute(u.get("imageMathmlAttribute"),e.safeXmlEncode(i)),h.src=y,a.setImgSize(h,y,"base64"===u.get("saveMode")&&"default"===u.get("base64savemode")),u.get("enableAccessibility")&&(h.alt=w.mathMLToAccessible(i,s,c));return void 0!==n.observer&&n.observer.observe(h),h.setAttribute("role","math"),h}},{key:"createImageSrc",value:function(n,t){var i,r;return"base64"===u.get("saveMode")&&"default"===u.get("base64savemode")&&(t.base64=!0),i=o.getService("createimage",t),-1!==i.indexOf("@BASE@")&&(r=o.getServicePath("createimage").split("/"),r.pop(),i=i.split("@BASE@").join(r.join("/"))),i}},{key:"initParse",value:function(t,i){return t=n.initParseSaveMode(t,i),n.initParseEditMode(t)}},{key:"initParseSaveMode",value:function(t,i){return u.get("saveMode")&&(t=l.parseMathmlToLatex(t,f.safeXmlCharacters),t=l.parseMathmlToLatex(t,f.xmlCharacters),t=n.parseMathmlToImg(t,f.safeXmlCharacters,i),t=n.parseMathmlToImg(t,f.xmlCharacters,i),"base64"===u.get("saveMode")&&"image"===u.get("base64savemode")&&(t=n.codeImgTransform(t,"base642showimage"))),t}},{key:"initParseEditMode",value:function(n){var o,h,f;if(-1!==u.get("parseModes").indexOf("latex"))for(var i=r.getElementsByNameFromString(n,"img",!0),a='encoding="LaTeX">',s=0,t=0;t<i.length;t+=1)if(o=n.substring(i[t].start+s,i[t].end+s),-1!==o.indexOf(' class="'.concat(u.get("imageClassName"),'"'))&&(h=" ".concat(u.get("imageMathmlAttribute"),'="'),f=o.indexOf(h),-1===f&&(h=' alt="',f=o.indexOf(h)),-1!==f)){f+=h.length;var y=o.indexOf('"',f),l=e.safeXmlDecode(o.substring(f,y)),c=l.indexOf(a);if(-1!==c){c+=a.length;var p=l.indexOf("<\/annotation>",c),w=l.substring(c,p),v="$$".concat(r.htmlEntitiesDecode(w),"$$");n=n.substring(0,i[t].start+s)+v+n.substring(i[t].end+s);s+=v.length-(i[t].end-i[t].start)}}return n}},{key:"endParse",value:function(t){var i=n.endParseEditMode(t);return n.endParseSaveMode(i)}},{key:"endParseEditMode",value:function(n){if(-1!==u.get("parseModes").indexOf("latex")){for(var f="",t=0,i=n.indexOf("$$");-1!==i;){if(f+=n.substring(t,i),-1!==(t=n.indexOf("$$",i+2))){var s=n.substring(i+2,t),h=r.htmlEntitiesDecode(s),o=l.getMathMLFromLatex(h,!0);u.get("saveHandTraces")||(o=e.removeAnnotation(o,"application/json"));f+=o;t+=2}else f+="$$",t=i+2;i=n.indexOf("$$",t)}n=f+=n.substring(t,n.length)}return n}},{key:"endParseSaveMode",value:function(t){return u.get("saveMode")&&("safeXml"===u.get("saveMode")?t=n.codeImgTransform(t,"img2mathml"):"xml"===u.get("saveMode")?t=n.codeImgTransform(t,"img2mathml"):"base64"===u.get("saveMode")&&"image"===u.get("base64savemode")&&(t=n.codeImgTransform(t,"img264"))),t}},{key:"createShowImageSrc",value:function(n,t){var f=[],e=["mml","color","centerbaseline","zoom","dpi","fontSize","fontFamily","defaultStretchy","backgroundColor","format"],i;return e.forEach(function(t){var i=e[t];void 0!==n[i]&&(f[i]=n[i])}),i={},Object.keys(n).forEach(function(t){"mml"!==t&&(i[t]=n[t])}),i.formula=com.wiris.js.JsPluginTools.md5encode(r.propertiesToString(f)),i.lang=void 0===t?"en":t,i.version=u.get("version"),o.getService("showimage",r.httpBuildQuery(i),!0)}},{key:"codeImgTransform",value:function(t,i){for(var s,h,v,p,d,c="",l=0,y=/<img/gi,g=y.source.length;y.test(t);){for(s=y.lastIndex-g,c+=t.substring(l,s),h=s+1;h<t.length&&l<=s;)v=t.charAt(h),'"'===v||"'"===v?(p=t.indexOf(v,h+1),h=-1===p?t.length:p):">"===v&&(l=h+1),h+=1;if(l<s)return c+t.substring(s,t.length);var o=t.substring(s,l),w=r.createObject(o),f=w.getAttribute(u.get("imageMathmlAttribute")),b=void 0,k=void 0;"base642showimage"===i?(null==f&&(f=w.getAttribute("alt")),f=e.safeXmlDecode(f),o=n.mathmlToImgObject(document,f,null,null),c+=r.createObjectCode(o)):"img2mathml"===i?(u.get("saveMode")&&("safeXml"===u.get("saveMode")?(b=!0,k=!0):"xml"===u.get("saveMode")&&(b=!0,k=!1)),c+=r.getWIRISImageOutput(o,b,k)):"img264"===i&&(null===f&&(f=w.getAttribute("alt")),f=e.safeXmlDecode(f),d={base64:"true"},o=n.mathmlToImgObject(document,f,d,null),a.setImgSize(o,o.src,!0),c+=r.createObjectCode(o))}return c+t.substring(l,t.length)}},{key:"parseMathmlToImg",value:function(t,i,o){for(var a,c,l="",v="".concat(i.tagOpener,"math"),y="".concat(i.tagOpener,"/math").concat(i.tagCloser),s=t.indexOf(v),h=0;-1!==s;)l+=t.substring(h,s),a=t.indexOf(u.get("imageMathmlAttribute")),(-1===(h=t.indexOf(y,s))?h=t.length-1:h+=-1!==a?t.indexOf("/>",s):y.length,e.isMathmlInAttribute(t,s)||-1!==a)?l+=t.substring(s,h):(c=t.substring(s,h),c=i.id===f.safeXmlCharacters.id?e.safeXmlDecode(c):e.mathMLEntities(c),l+=r.createObjectCode(n.mathmlToImgObject(document,c,null,o))),s=t.indexOf(v,h);return l+t.substring(h,t.length)}}]),n}();"undefined"!=typeof MutationObserver&&(vt=new MutationObserver(function(n){n.forEach(function(n){n.oldValue===u.get("imageClassName")&&"class"===n.attributeName&&-1===n.target.className.indexOf(u.get("imageClassName"))&&(n.target.className=u.get("imageClassName"))})}),c.observer=Object.create(vt),c.observer.Config={attributes:!0,attributeOldValue:!0},c.observer.observe=function(n){Object.getPrototypeOf(this).observe(n,this.Config)});pt=function(){function n(){!function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}(this,n);this.isContentChanged=!1;this.waitingForChanges=!1}return function(n,t,i){t&&yt(n.prototype,t);i&&yt(n,i)}(n,[{key:"setIsContentChanged",value:function(n){this.isContentChanged=n}},{key:"getIsContentChanged",value:function(){return this.isContentChanged}},{key:"setWaitingForChanges",value:function(n){this.waitingForChanges=n}},{key:"caretPositionChanged",value:function(){}},{key:"clipboardChanged",value:function(){}},{key:"contentChanged",value:function(){!0===this.waitingForChanges&&!1===this.isContentChanged&&(this.isContentChanged=!0)}},{key:"styleChanged",value:function(){}},{key:"transformationReceived",value:function(){}}]),n}();bt=function(){function n(t){if(function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}(this,n),this.editorAttributes={},!("editorAttributes"in t))throw new Error("ContentManager constructor error: editorAttributes property missed.");if(this.editorAttributes=t.editorAttributes,this.customEditors=null,"customEditors"in t&&(this.customEditors=t.customEditors),this.environment={},!("environment"in t))throw new Error("ContentManager constructor error: environment property missed");if(this.environment=t.environment,this.language="",!("language"in t))throw new Error("ContentManager constructor error: language property missed");this.language=t.language;this.editorListener=new pt;this.editor=null;this.ua=navigator.userAgent.toLowerCase();this.deviceProperties={};this.deviceProperties.isAndroid=this.ua.indexOf("android")>-1;this.deviceProperties.isIOS=this.ua.indexOf("ipad")>-1||this.ua.indexOf("iphone")>-1;this.toolbar=null;this.modalDialogInstance=null;this.listeners=new h;this.mathML=null;this.isNewElement=!0;this.integrationModel=null;this.isEditorLoaded=!1}return function(n,t,i){t&&wt(n.prototype,t);i&&wt(n,i)}(n,[{key:"addListener",value:function(n){this.listeners.add(n)}},{key:"setIntegrationModel",value:function(n){this.integrationModel=n}},{key:"setModalDialogInstance",value:function(n){this.modalDialogInstance=n}},{key:"insert",value:function(){this.updateTitle(this.modalDialogInstance);this.insertEditor(this.modalDialogInstance)}},{key:"insertEditor",value:function(){if(window.com&&window.com.wiris&&window.com.wiris.jsEditor&&window.com.wiris.jsEditor.JsEditor&&window.com.wiris.jsEditor.JsEditor.newInstance){if(this.editor=window.com.wiris.jsEditor.JsEditor.newInstance(this.editorAttributes),this.editor.insertInto(this.modalDialogInstance.contentContainer),this.editor.focus(),this.modalDialogInstance.rtl&&this.editor.action("rtl"),this.editor.getEditorModel().isRTL()&&(this.editor.element.style.direction="rtl"),this.editor.getEditorModel().addEditorListener(this.editorListener),this.modalDialogInstance.deviceProperties.isIOS){setTimeout(function(){this.modalDialogInstance.hideKeyboard()},400);var t=document.getElementsByClassName("wrs_formulaDisplay")[0];r.addEvent(t,"focus",this.modalDialogInstance.handleOpenedIosSoftkeyboard);r.addEvent(t,"blur",this.modalDialogInstance.handleClosedIosSoftkeyboard)}this.listeners.fire("onLoad",{});this.isEditorLoaded=!0}else setTimeout(n.prototype.insertEditor.bind(this),100)}},{key:"init",value:function(){var r=document.createElement("script"),i,n,t;r.type="text/javascript";i=u.get("editorUrl");n=document.createElement("a");n.href=i;0===window.location.href.indexOf("https://")&&"http:"===n.protocol&&(n.protocol="https:");i="80"===n.port||"443"===n.port?"".concat(n.protocol,"//").concat(n.hostname,"/").concat(n.pathname):"".concat(n.protocol,"//").concat(n.hostname,":").concat(n.port,"/").concat(n.pathname);t={};t.editor="editor"in this.environment?this.environment.editor:"unknown";t.mode="mode"in this.environment?this.environment.mode:u.get("saveMode");t.version="version"in this.environment?this.environment.version:u.get("version");r.src="".concat(i,"?lang=").concat(this.language,"&stats-editor=").concat(t.editor,"&stats-mode=").concat(t.mode,"&stats-version=").concat(t.version);document.getElementsByTagName("head")[0].appendChild(r)}},{key:"setInitialContent",value:function(){this.isNewElement||this.setMathML(this.mathML)}},{key:"setMathML",value:function(n,t){var i=this;void 0===t&&(t=!1);this.editor.setMathMLWithCallback(n,function(){i.editorListener.setWaitingForChanges(!0)});setTimeout(function(){i.editorListener.setIsContentChanged(!1)},500);t||this.onFocus()}},{key:"onFocus",value:function(){void 0!==this.editor&&null!=this.editor&&this.editor.focus()}},{key:"submitAction",value:function(){var n,t,i;this.editor.isFormulaEmpty()?this.integrationModel.updateFormula(null):(n=this.editor.getMathMLWithSemantics(),null!==this.customEditors.getActiveEditor()?(t=this.customEditors.getActiveEditor().toolbar,n=e.addCustomEditorClassAttribute(n,t)):Object.keys(this.customEditors.editors).forEach(function(t){n=e.removeCustomEditorClassAttribute(n,t)}),i=e.mathMLEntities(n),this.integrationModel.updateFormula(i));this.customEditors.disable();this.integrationModel.notifyWindowClosed();this.setEmptyMathML();this.customEditors.disable()}},{key:"setEmptyMathML",value:function(){this.deviceProperties.isAndroid||this.deviceProperties.isIOS?this.editor.getEditorModel().isRTL()?this.setMathML('<math dir="rtl"><semantics><annotation encoding="application/json">[]<\/annotation><\/semantics><\/math>',!0):this.setMathML('<math><semantics><annotation encoding="application/json">[]<\/annotation><\/semantics><\/math>',!0):this.editor.getEditorModel().isRTL()?this.setMathML('<math dir="rtl"/>',!0):this.setMathML("<math/>",!0)}},{key:"onOpen",value:function(){this.isNewElement?this.setEmptyMathML():this.setMathML(this.mathML);this.updateToolbar();this.onFocus()}},{key:"updateToolbar",value:function(){var n,t,i;this.updateTitle(this.modalDialogInstance);n=this.customEditors.getActiveEditor();n?(t=n.toolbar?n.toolbar:_wrs_int_wirisProperties.toolbar,null!=this.toolbar&&this.toolbar===t||this.setToolbar(t)):(i=this.getToolbar(),null!=this.toolbar&&this.toolbar===i||(this.setToolbar(i),this.customEditors.disable()))}},{key:"updateTitle",value:function(){var n=this.customEditors.getActiveEditor();n?this.modalDialogInstance.setTitle(n.title):this.modalDialogInstance.setTitle("MathType")}},{key:"getToolbar",value:function(){var n="general";return"toolbar"in this.editorAttributes&&(n=this.editorAttributes.toolbar),"general"===n&&(n="undefined"==typeof _wrs_int_wirisProperties||void 0===_wrs_int_wirisProperties.toolbar?"general":_wrs_int_wirisProperties.toolbar),n}},{key:"setToolbar",value:function(n){this.toolbar=n;this.editor.setParams({toolbar:this.toolbar})}},{key:"hasChanges",value:function(){return!this.editor.isFormulaEmpty()&&this.editorListener.getIsContentChanged()}},{key:"onKeyDown",value:function(n){var t,i;void 0!==n.key&&!1===n.repeat&&("Escape"===n.key||"Esc"===n.key?(t=document.getElementsByClassName("wrs_expandButton wrs_expandButtonFor3RowsLayout wrs_pressed"),0===t.length&&0===(t=document.getElementsByClassName("wrs_expandButton wrs_expandButtonFor2RowsLayout wrs_pressed")).length&&0===(t=document.getElementsByClassName("wrs_select wrs_pressed")).length&&(this.modalDialogInstance.cancelAction(),n.stopPropagation(),n.preventDefault())):n.shiftKey&&"Tab"===n.key?document.activeElement===this.modalDialogInstance.submitButton?(this.editor.focus(),n.stopPropagation(),n.preventDefault()):(i=document.querySelector('[title="Manual"]'),document.activeElement===i&&(this.modalDialogInstance.cancelButton.focus(),n.stopPropagation(),n.preventDefault())):"Tab"===n.key&&(document.activeElement===this.modalDialogInstance.cancelButton?(document.querySelector('[title="Manual"]').focus(),n.stopPropagation(),n.preventDefault()):"wrs_formulaDisplay wrs_focused"===document.getElementsByClassName("wrs_formulaDisplay")[0].getAttribute("class")&&(this.modalDialogInstance.submitButton.focus(),n.stopPropagation(),n.preventDefault())))}}]),n}();dt=function(){function n(){!function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}(this,n);this.editors=[];this.activeEditor="default"}return function(n,t,i){t&&kt(n.prototype,t);i&&kt(n,i)}(n,[{key:"addEditor",value:function(n,t){var i={};i.name=t.name;i.toolbar=t.toolbar;i.icon=t.icon;i.confVariable=t.confVariable;i.title=t.title;i.tooltip=t.tooltip;this.editors[n]=i}},{key:"enable",value:function(n){this.activeEditor=n}},{key:"disable",value:function(){this.activeEditor="default"}},{key:"getActiveEditor",value:function(){return"default"!==this.activeEditor?this.editors[this.activeEditor]:null}}]),n}();gt={imageCustomEditorName:"data-custom-editor",imageClassName:"Wirisformula",CASClassName:"Wiriscas"};b=function(){function n(){!function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}(this,n);this.cancelled=!1;this.defaultPrevented=!1}return function(n,t,i){t&&ni(n.prototype,t);i&&ni(n,i)}(n,[{key:"cancel",value:function(){this.cancelled=!0}},{key:"preventDefault",value:function(){this.defaultPrevented=!0}}]),n}();ii=function(){function n(t){var i,u,r,f,e;!function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}(this,n);this.overlayElement=t.overlayElement;this.callbacks=t.callbacks;this.overlayWrapper=this.overlayElement.appendChild(document.createElement("div"));this.overlayWrapper.setAttribute("class","wrs_popupmessage_overlay_envolture");this.message=this.overlayWrapper.appendChild(document.createElement("div"));this.message.id="wrs_popupmessage";this.message.setAttribute("class","wrs_popupmessage_panel");this.message.setAttribute("role","dialog");this.message.setAttribute("aria-describedby","description_txt");i=document.createElement("p");u=document.createTextNode(t.strings.message);i.appendChild(u);i.id="description_txt";this.message.appendChild(i);r=this.overlayWrapper.appendChild(document.createElement("div"));r.setAttribute("class","wrs_popupmessage_overlay");r.addEventListener("click",this.cancelAction.bind(this));this.buttonArea=this.message.appendChild(document.createElement("div"));this.buttonArea.setAttribute("class","wrs_popupmessage_button_area");this.buttonArea.id="wrs_popup_button_area";f={"class":"wrs_button_accept",innerHTML:t.strings.submitString,id:"wrs_popup_accept_button"};this.closeButton=this.createButton(f,this.closeAction.bind(this));this.buttonArea.appendChild(this.closeButton);e={"class":"wrs_button_cancel",innerHTML:t.strings.cancelString,id:"wrs_popup_cancel_button"};this.cancelButton=this.createButton(e,this.cancelAction.bind(this));this.buttonArea.appendChild(this.cancelButton)}return function(n,t,i){t&&ti(n.prototype,t);i&&ti(n,i)}(n,[{key:"createButton",value:function(n,t){var i={};return(i=document.createElement("button")).setAttribute("id",n.id),i.setAttribute("class",n.class),i.innerHTML=n.innerHTML,i.addEventListener("click",t),i}},{key:"show",value:function(){"block"!==this.overlayWrapper.style.display?(document.activeElement.blur(),this.overlayWrapper.style.display="block",this.closeButton.focus()):(this.overlayWrapper.style.display="none",_wrs_modalWindow.focus())}},{key:"cancelAction",value:function(){this.overlayWrapper.style.display="none";void 0!==this.callbacks.cancelCallback&&this.callbacks.cancelCallback()}},{key:"closeAction",value:function(){this.cancelAction();void 0!==this.callbacks.closeCallback&&this.callbacks.closeCallback()}},{key:"onKeyDown",value:function(n){void 0!==n.key&&("Escape"===n.key||"Esc"===n.key?(this.cancelAction(),n.stopPropagation(),n.preventDefault()):"Tab"===n.key&&(document.activeElement===this.closeButton?this.cancelButton.focus():this.closeButton.focus(),n.stopPropagation(),n.preventDefault()))}}]),n}();ei=function(){function n(t){var o=this,i;ri(this,n);this.attributes=t;var u=navigator.userAgent.toLowerCase(),h=u.indexOf("android")>-1,c=u.indexOf("ipad")>-1||u.indexOf("iphone")>-1;this.iosSoftkeyboardOpened=!1;this.iosMeasureUnit=-1===u.indexOf("crios")?"%":"vh";this.iosDivHeight="100%".concat(this.iosMeasureUnit);var f=window.outerWidth,e=window.outerHeight,l=f>e,v=f<e,y=l&&this.attributes.height>e,p=v&&this.attributes.width>f,a=y||p;this.instanceId=document.getElementsByClassName("wrs_modal_dialogContainer").length;this.deviceProperties={orientation:l?"landscape":"portait",isAndroid:h,isIOS:c,isMobile:a,isDesktop:!a&&!c&&!h};this.properties={created:!1,state:"",previousState:"",position:{bottom:0,right:10},size:{height:338,width:580}};this.websiteBeforeLockParameters=null;i={"class":"wrs_modal_overlay"};i.id=this.getElementId(i.class);this.overlay=r.createElement("div",i);(i={}).class="wrs_modal_title_bar";i.id=this.getElementId(i.class);this.titleBar=r.createElement("div",i);(i={}).class="wrs_modal_title";i.id=this.getElementId(i.class);this.title=r.createElement("div",i);this.title.innerHTML="";(i={}).class="wrs_modal_close_button";i.id=this.getElementId(i.class);i.title=s.get("close");this.closeDiv=r.createElement("a",i);this.closeDiv.setAttribute("role","button");(i={}).class="wrs_modal_stack_button";i.id=this.getElementId(i.class);i.title=s.get("exit_fullscreen");this.stackDiv=r.createElement("a",i);this.stackDiv.setAttribute("role","button");(i={}).class="wrs_modal_maximize_button";i.id=this.getElementId(i.class);i.title=s.get("fullscreen");this.maximizeDiv=r.createElement("a",i);this.maximizeDiv.setAttribute("role","button");(i={}).class="wrs_modal_minimize_button";i.id=this.getElementId(i.class);i.title=s.get("minimize");this.minimizeDiv=r.createElement("a",i);this.minimizeDiv.setAttribute("role","button");(i={}).class="wrs_modal_dialogContainer";i.id=this.getElementId(i.class);i.role="dialog";this.container=r.createElement("div",i);this.container.setAttribute("aria-labeledby","wrs_modal_title[0]");(i={}).class="wrs_modal_wrapper";i.id=this.getElementId(i.class);this.wrapper=r.createElement("div",i);(i={}).class="wrs_content_container";i.id=this.getElementId(i.class);this.contentContainer=r.createElement("div",i);(i={}).class="wrs_modal_controls";i.id=this.getElementId(i.class);this.controls=r.createElement("div",i);(i={}).class="wrs_modal_buttons_container";i.id=this.getElementId(i.class);this.buttonContainer=r.createElement("div",i);this.submitButton=this.createSubmitButton({id:this.getElementId("wrs_modal_button_accept"),"class":"wrs_modal_button_accept",innerHTML:s.get("accept")},this.submitAction.bind(this));this.cancelButton=this.createSubmitButton({id:this.getElementId("wrs_modal_button_cancel"),"class":"wrs_modal_button_cancel",innerHTML:s.get("cancel")},this.cancelAction.bind(this));this.contentManager=null;var w={cancelString:s.get("cancel"),submitString:s.get("close"),message:s.get("close_modal_warning")},b={closeCallback:function(){o.close()},cancelCallback:function(){o.focus()}},k={overlayElement:this.container,callbacks:b,strings:w};this.popup=new ii(k);this.rtl=!1;"rtl"in this.attributes&&(this.rtl=this.attributes.rtl);this.handleOpenedIosSoftkeyboard=this.handleOpenedIosSoftkeyboard.bind(this);this.handleClosedIosSoftkeyboard=this.handleClosedIosSoftkeyboard.bind(this)}return fi(n,[{key:"setContentManager",value:function(n){this.contentManager=n}},{key:"getContentManager",value:function(){return this.contentManager}},{key:"submitAction",value:function(){void 0!==this.contentManager.submitAction&&this.contentManager.submitAction();this.close()}},{key:"cancelAction",value:function(){void 0===this.contentManager.hasChanges?this.close():this.contentManager.hasChanges()?this.showPopUpMessage():this.close()}},{key:"createSubmitButton",value:function(n,t){return new(function(){function i(){ri(this,i);this.element=document.createElement("button");this.element.id=n.id;this.element.className=n.class;this.element.innerHTML=n.innerHTML;r.addEvent(this.element,"click",t)}return fi(i,[{key:"getElement",value:function(){return this.element}}]),i}())(n,t).getElement()}},{key:"create",value:function(){this.titleBar.appendChild(this.closeDiv);this.titleBar.appendChild(this.stackDiv);this.titleBar.appendChild(this.maximizeDiv);this.titleBar.appendChild(this.minimizeDiv);this.titleBar.appendChild(this.title);this.deviceProperties.isDesktop&&this.container.appendChild(this.titleBar);this.wrapper.appendChild(this.contentContainer);this.wrapper.appendChild(this.controls);this.controls.appendChild(this.buttonContainer);this.buttonContainer.appendChild(this.submitButton);this.buttonContainer.appendChild(this.cancelButton);this.container.appendChild(this.wrapper);this.recalculateScrollBar();document.body.appendChild(this.container);document.body.appendChild(this.overlay);this.deviceProperties.isDesktop?(this.createModalWindowDesktop(),this.createResizeButtons(),this.addListeners(),u.get("modalWindowFullScreen")&&this.maximize()):this.deviceProperties.isAndroid?this.createModalWindowAndroid():this.deviceProperties.isIOS&&!this.deviceProperties.isMobile&&this.createModalWindowIos();null!=this.contentManager&&this.contentManager.insert(this);this.properties.open=!0;this.properties.created=!0;this.isRTL()&&(this.container.style.right="".concat(window.innerWidth-this.scrollbarWidth-this.container.offsetWidth,"px"),this.container.className+=" wrs_modal_rtl")}},{key:"createResizeButtons",value:function(){this.resizerBR=document.createElement("div");this.resizerBR.className="wrs_bottom_right_resizer";this.resizerBR.innerHTML="◢";this.resizerTL=document.createElement("div");this.resizerTL.className="wrs_bottom_left_resizer";this.container.appendChild(this.resizerBR);this.titleBar.appendChild(this.resizerTL);r.addEvent(this.resizerBR,"mousedown",this.activateResizeStateBR.bind(this));r.addEvent(this.resizerTL,"mousedown",this.activateResizeStateTL.bind(this))}},{key:"activateResizeStateBR",value:function(n){this.initializeResizeProperties(n,!1)}},{key:"activateResizeStateTL",value:function(n){this.initializeResizeProperties(n,!0)}},{key:"initializeResizeProperties",value:function(n,t){r.addClass(document.body,"wrs_noselect");r.addClass(this.overlay,"wrs_overlay_active");this.resizeDataObject={x:this.eventClient(n).X,y:this.eventClient(n).Y};this.initialWidth=parseInt(this.container.style.width,10);this.initialHeight=parseInt(this.container.style.height,10);t?this.leftScale=!0:(this.initialRight=parseInt(this.container.style.right,10),this.initialBottom=parseInt(this.container.style.bottom,10));this.initialRight||(this.initialRight=0);this.initialBottom||(this.initialBottom=0);document.body.style["user-select"]="none"}},{key:"open",value:function(){var n=this,t;this.removeClass("wrs_closed");var i=this.deviceProperties.isIOS,r=this.deviceProperties.isAndroid,f=this.deviceProperties.isMobile;if((i||r||f)&&(this.restoreWebsiteScale(),this.lockWebsiteScroll(),setTimeout(function(){n.hideKeyboard()},400)),this.properties.created?(this.properties.open||(this.properties.open=!0,this.deviceProperties.isAndroid||this.deviceProperties.isIOS||this.restoreState()),this.deviceProperties.isDesktop&&u.get("modalWindowFullScreen")&&this.maximize(),this.deviceProperties.isIOS&&(this.iosSoftkeyboardOpened=!1,this.setContainerHeight("".concat(100+this.iosMeasureUnit)))):this.create(),!1===this.contentManager.isEditorLoaded)t=h.newListener("onLoad",function(){n.contentManager.onOpen(n)}),this.contentManager.addListener(t);else this.contentManager.onOpen(this)}},{key:"close",value:function(){this.removeClass("wrs_maximized");this.removeClass("wrs_minimized");this.removeClass("wrs_stack");this.addClass("wrs_closed");this.saveModalProperties();this.unlockWebsiteScroll();this.properties.open=!1}},{key:"restoreWebsiteScale",value:function(){var n=document.querySelector("meta[name=viewport]"),t=["initial-scale=","minimum-scale=","maximum-scale="],r=["1.0","1.0","1.0"],i=function(n,t){var s=n.getAttribute("content"),f,e,i,a,o;if(s){for(var h=s.split(","),c="",l=[],u=0;u<h.length;u+=1){for(f=!1,e=0;!f&&e<t.length;)h[u].indexOf(t[e])&&(f=!0),e+=1;f||l.push(h[u])}for(i=0;i<t.length;i+=1)a=t[i]+r[i],c+=0===i?a:",".concat(a);for(o=0;o<l.length;o+=1)c+=",".concat(l[o]);n.setAttribute("content",c);n.setAttribute("content","");n.setAttribute("content",s)}else n.setAttribute("content","initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0"),n.removeAttribute("content")};n?i(n,t):(n=document.createElement("meta"),document.getElementsByTagName("head")[0].appendChild(n),i(n,t),n.remove())}},{key:"lockWebsiteScroll",value:function(){this.websiteBeforeLockParameters={bodyStylePosition:document.body.style.position?document.body.style.position:"",bodyStyleOverflow:document.body.style.overflow?document.body.style.overflow:"",htmlStyleOverflow:document.documentElement.style.overflow?document.documentElement.style.overflow:"",windowScrollX:window.scrollX,windowScrollY:window.scrollY}}},{key:"unlockWebsiteScroll",value:function(){if(this.websiteBeforeLockParameters){document.body.style.position=this.websiteBeforeLockParameters.bodyStylePosition;document.body.style.overflow=this.websiteBeforeLockParameters.bodyStyleOverflow;document.documentElement.style.overflow=this.websiteBeforeLockParameters.htmlStyleOverflow;var n=this.websiteBeforeLockParameters.windowScrollX,t=this.websiteBeforeLockParameters.windowScrollY;window.scrollTo(n,t);this.websiteBeforeLockParameters=null}}},{key:"isIE11",value:function(){return navigator.userAgent.search("Msie/")>=0||navigator.userAgent.search("Trident/")>=0||navigator.userAgent.search("Edge/")>=0}},{key:"isRTL",value:function(){return"ar"===this.attributes.language||"he"===this.attributes.language||this.rtl}},{key:"addClass",value:function(n){r.addClass(this.overlay,n);r.addClass(this.titleBar,n);r.addClass(this.overlay,n);r.addClass(this.container,n);r.addClass(this.contentContainer,n);r.addClass(this.stackDiv,n);r.addClass(this.minimizeDiv,n);r.addClass(this.maximizeDiv,n);r.addClass(this.wrapper,n)}},{key:"removeClass",value:function(n){r.removeClass(this.overlay,n);r.removeClass(this.titleBar,n);r.removeClass(this.overlay,n);r.removeClass(this.container,n);r.removeClass(this.contentContainer,n);r.removeClass(this.stackDiv,n);r.removeClass(this.minimizeDiv,n);r.removeClass(this.maximizeDiv,n);r.removeClass(this.wrapper,n)}},{key:"createModalWindowDesktop",value:function(){this.addClass("wrs_modal_desktop");this.stack()}},{key:"createModalWindowAndroid",value:function(){this.addClass("wrs_modal_android");window.addEventListener("resize",this.orientationChangeAndroidSoftkeyboard.bind(this))}},{key:"createModalWindowIos",value:function(){this.addClass("wrs_modal_ios");window.addEventListener("resize",this.orientationChangeIosSoftkeyboard.bind(this))}},{key:"restoreState",value:function(){"maximized"===this.properties.state?this.maximize():"minimized"===this.properties.state?(this.properties.state=this.properties.previousState,this.properties.previousState="",this.minimize()):this.stack()}},{key:"stack",value:function(){this.properties.previousState=this.properties.state;this.properties.state="stack";this.removeClass("wrs_maximized");this.minimizeDiv.title=s.get("minimize");this.removeClass("wrs_minimized");this.addClass("wrs_stack");this.restoreModalProperties();void 0!==this.resizerBR&&void 0!==this.resizerTL&&this.setResizeButtonsVisibility();this.recalculateScrollBar();this.recalculatePosition();this.recalculateScale();this.focus()}},{key:"minimize",value:function(){this.saveModalProperties();"minimized"===this.properties.state&&"stack"===this.properties.previousState?this.stack():"minimized"===this.properties.state&&"maximized"===this.properties.previousState?this.maximize():(this.container.style.height="30px",this.container.style.width="250px",this.container.style.bottom="0px",this.container.style.right="10px",this.removeListeners(),this.properties.previousState=this.properties.state,this.properties.state="minimized",this.setResizeButtonsVisibility(),this.minimizeDiv.title=s.get("maximize"),r.containsClass(this.overlay,"wrs_stack")?this.removeClass("wrs_stack"):this.removeClass("wrs_maximized"),this.addClass("wrs_minimized"))}},{key:"maximize",value:function(){this.saveModalProperties();"maximized"!==this.properties.state&&(this.properties.previousState=this.properties.state,this.properties.state="maximized");this.setResizeButtonsVisibility();r.containsClass(this.overlay,"wrs_minimized")?(this.minimizeDiv.title=s.get("minimize"),this.removeClass("wrs_minimized")):r.containsClass(this.overlay,"wrs_stack")&&(this.container.style.left=null,this.container.style.top=null,this.removeClass("wrs_stack"));this.addClass("wrs_maximized");this.setSize(parseInt(.8*window.innerHeight,10),parseInt(.8*window.innerWidth,10));this.container.clientHeight>700&&(this.container.style.height="700px");this.container.clientWidth>1200&&(this.container.style.width="1200px");var n=window.innerHeight,t=window.innerWidth,i=n/2-this.container.offsetHeight/2,u=t/2-this.container.offsetWidth/2;this.setPosition(i,u);this.recalculateScale();this.recalculatePosition();this.recalculateSize();this.focus()}},{key:"setSize",value:function(n,t){this.container.style.height="".concat(n,"px");this.container.style.width="".concat(t,"px");this.recalculateSize()}},{key:"setPosition",value:function(n,t){this.container.style.bottom="".concat(n,"px");this.container.style.right="".concat(t,"px")}},{key:"saveModalProperties",value:function(){"stack"===this.properties.state&&(this.properties.position.bottom=parseInt(this.container.style.bottom,10),this.properties.position.right=parseInt(this.container.style.right,10),this.properties.size.width=parseInt(this.container.style.width,10),this.properties.size.height=parseInt(this.container.style.height,10))}},{key:"restoreModalProperties",value:function(){"stack"===this.properties.state&&(this.setPosition(this.properties.position.bottom,this.properties.position.right),this.setSize(this.properties.size.height,this.properties.size.width))}},{key:"recalculateSize",value:function(){this.wrapper.style.width="".concat(this.container.clientWidth-12,"px");this.wrapper.style.height="".concat(this.container.clientHeight-38,"px");this.contentContainer.style.height="".concat(parseInt(this.wrapper.offsetHeight-50,10),"px")}},{key:"setResizeButtonsVisibility",value:function(){"stack"===this.properties.state?(this.resizerTL.style.visibility="visible",this.resizerBR.style.visibility="visible"):(this.resizerTL.style.visibility="hidden",this.resizerBR.style.visibility="hidden")}},{key:"addListeners",value:function(){this.maximizeDiv.addEventListener("click",this.maximize.bind(this),!0);this.stackDiv.addEventListener("click",this.stack.bind(this),!0);this.minimizeDiv.addEventListener("click",this.minimize.bind(this),!0);this.closeDiv.addEventListener("click",this.cancelAction.bind(this));this.overlay.addEventListener("click",this.cancelAction.bind(this));r.addEvent(window,"mousedown",this.startDrag.bind(this));r.addEvent(window,"mouseup",this.stopDrag.bind(this));r.addEvent(window,"mousemove",this.drag.bind(this));r.addEvent(window,"resize",this.onWindowResize.bind(this));r.addEvent(this.container,"keydown",this.onKeyDown.bind(this))}},{key:"removeListeners",value:function(){r.removeEvent(window,"mousedown",this.startDrag);r.removeEvent(window,"mouseup",this.stopDrag);r.removeEvent(window,"mousemove",this.drag);r.removeEvent(window,"resize",this.onWindowResize);r.removeEvent(this.container,"keydown",this.onKeyDown)}},{key:"eventClient",value:function(n){return void 0===n.clientX&&n.changedTouches?{X:n.changedTouches[0].clientX,Y:n.changedTouches[0].clientY}:{X:n.clientX,Y:n.clientY}}},{key:"startDrag",value:function(n){"minimized"!==this.properties.state&&n.target===this.title&&(void 0!==this.dragDataObject&&null!==this.dragDataObject||(this.dragDataObject={x:this.eventClient(n).X,y:this.eventClient(n).Y},this.lastDrag={x:"0px",y:"0px"},""===this.container.style.right&&(this.container.style.right="0px"),""===this.container.style.bottom&&(this.container.style.bottom="0px"),this.isIE11(),r.addClass(document.body,"wrs_noselect"),r.addClass(this.overlay,"wrs_overlay_active"),this.limitWindow=this.getLimitWindow()))}},{key:"drag",value:function(n){var r,u,f,e;if(this.dragDataObject&&(n.preventDefault(),r=Math.min(this.eventClient(n).Y,this.limitWindow.minPointer.y),r=Math.max(this.limitWindow.maxPointer.y,r),u=Math.min(this.eventClient(n).X,this.limitWindow.minPointer.x),u=Math.max(this.limitWindow.maxPointer.x,u),f="".concat(u-this.dragDataObject.x,"px"),e="".concat(r-this.dragDataObject.y,"px"),this.lastDrag={x:f,y:e},this.container.style.transform="translate3d(".concat(f,",").concat(e,",0)")),this.resizeDataObject){var o,s=window.innerWidth,h=window.innerHeight,t=Math.min(this.eventClient(n).X,s-this.scrollbarWidth-7),i=Math.min(this.eventClient(n).Y,h-7);t<0&&(t=0);i<0&&(i=0);o=this.leftScale?-1:1;this.container.style.width="".concat(this.initialWidth+o*(t-this.resizeDataObject.x),"px");this.container.style.height="".concat(this.initialHeight+o*(i-this.resizeDataObject.y),"px");this.leftScale||(this.resizeDataObject.x-t-this.initialWidth<-580?this.container.style.right="".concat(this.initialRight-(t-this.resizeDataObject.x),"px"):(this.container.style.right="".concat(this.initialRight+this.initialWidth-580,"px"),this.container.style.width="580px"),this.resizeDataObject.y-i<this.initialHeight-338?this.container.style.bottom="".concat(this.initialBottom-(i-this.resizeDataObject.y),"px"):(this.container.style.bottom="".concat(this.initialBottom+this.initialHeight-338,"px"),this.container.style.height="338px"));this.recalculateScale();this.recalculatePosition()}}},{key:"getLimitWindow",value:function(){var n=window.innerWidth,t=window.innerHeight,f=this.container.offsetHeight,e=parseInt(this.container.style.bottom,10),o=parseInt(this.container.style.right,10),i=window.pageXOffset,s=this.dragDataObject.y,h=this.dragDataObject.x,r=f+e-(t-(s-i)),u=n-this.scrollbarWidth-(h-i)-o,c=t-this.container.offsetHeight+r,l=this.title.offsetHeight-(this.title.offsetHeight-r);return{minPointer:{x:n-u-this.scrollbarWidth,y:c},maxPointer:{x:this.container.offsetWidth-u,y:l}}}},{key:"getScrollBarWidth",value:function(){var t=document.createElement("p"),n,r,i;return t.style.width="100%",t.style.height="200px",n=document.createElement("div"),n.style.position="absolute",n.style.top="0px",n.style.left="0px",n.style.visibility="hidden",n.style.width="200px",n.style.height="150px",n.style.overflow="hidden",n.appendChild(t),document.body.appendChild(n),r=t.offsetWidth,n.style.overflow="scroll",i=t.offsetWidth,r===i&&(i=n.clientWidth),document.body.removeChild(n),r-i}},{key:"stopDrag",value:function(){(this.dragDataObject||this.resizeDataObject)&&(this.container.style.transform="",this.dragDataObject&&(this.container.style.right="".concat(parseInt(this.container.style.right,10)-parseInt(this.lastDrag.x,10),"px"),this.container.style.bottom="".concat(parseInt(this.container.style.bottom,10)-parseInt(this.lastDrag.y,10),"px")),this.focus(),document.body.style["user-select"]="",this.isIE11(),r.removeClass(document.body,"wrs_noselect"),r.removeClass(this.overlay,"wrs_overlay_active"));this.dragDataObject=null;this.resizeDataObject=null;this.initialWidth=null;this.leftScale=null}},{key:"onWindowResize",value:function(){this.recalculateScrollBar();this.recalculatePosition();this.recalculateScale()}},{key:"onKeyDown",value:function(n){void 0!==n.key&&("block"!==this.popup.overlayWrapper.style.display?"Escape"===n.key||"Esc"===n.key?this.properties.open&&this.contentManager.onKeyDown(n):n.shiftKey&&"Tab"===n.key?document.activeElement===this.cancelButton?(this.submitButton.focus(),n.stopPropagation(),n.preventDefault()):this.contentManager.onKeyDown(n):"Tab"===n.key&&(document.activeElement===this.submitButton?(this.cancelButton.focus(),n.stopPropagation(),n.preventDefault()):this.contentManager.onKeyDown(n)):this.popup.onKeyDown(n))}},{key:"recalculatePosition",value:function(){this.container.style.right="".concat(Math.min(parseInt(this.container.style.right,10),window.innerWidth-this.scrollbarWidth-this.container.offsetWidth),"px");parseInt(this.container.style.right,10)<0&&(this.container.style.right="0px");this.container.style.bottom="".concat(Math.min(parseInt(this.container.style.bottom,10),window.innerHeight-this.container.offsetHeight),"px");parseInt(this.container.style.bottom,10)<0&&(this.container.style.bottom="0px")}},{key:"recalculateScale",value:function(){var n=!1;parseInt(this.container.style.width,10)>580?(this.container.style.width="".concat(Math.min(parseInt(this.container.style.width,10),window.innerWidth-this.scrollbarWidth),"px"),n=!0):(this.container.style.width="580px",n=!0);parseInt(this.container.style.height,10)>338?(this.container.style.height="".concat(Math.min(parseInt(this.container.style.height,10),window.innerHeight),"px"),n=!0):(this.container.style.height="338px",n=!0);n&&this.recalculateSize()}},{key:"recalculateScrollBar",value:function(){this.hasScrollBar=window.innerWidth>document.documentElement.clientWidth;this.scrollbarWidth=this.hasScrollBar?this.getScrollBarWidth():0}},{key:"hideKeyboard",value:function(){var n=document.createElement("input");this.container.appendChild(n);n.focus();n.blur();n.remove()}},{key:"focus",value:function(){null!=this.contentManager&&void 0!==this.contentManager.onFocus&&this.contentManager.onFocus()}},{key:"portraitMode",value:function(){return window.innerHeight>window.innerWidth}},{key:"handleOpenedIosSoftkeyboard",value:function(){this.iosSoftkeyboardOpened||null==this.iosDivHeight||this.iosDivHeight!=="100".concat(this.iosMeasureUnit)||(this.portraitMode()?this.setContainerHeight("63".concat(this.iosMeasureUnit)):this.setContainerHeight("40".concat(this.iosMeasureUnit)));this.iosSoftkeyboardOpened=!0}},{key:"handleClosedIosSoftkeyboard",value:function(){this.iosSoftkeyboardOpened=!1;this.setContainerHeight("100".concat(this.iosMeasureUnit))}},{key:"orientationChangeIosSoftkeyboard",value:function(){this.iosSoftkeyboardOpened?this.portraitMode()?this.setContainerHeight("63".concat(this.iosMeasureUnit)):this.setContainerHeight("40".concat(this.iosMeasureUnit)):this.setContainerHeight("100".concat(this.iosMeasureUnit))}},{key:"orientationChangeAndroidSoftkeyboard",value:function(){this.setContainerHeight("100%")}},{key:"setContainerHeight",value:function(n){this.iosDivHeight=n;this.wrapper.style.height=n}},{key:"showPopUpMessage",value:function(){"minimized"===this.properties.state&&this.stack();this.popup.show()}},{key:"setTitle",value:function(n){this.title.innerHTML=n}},{key:"getElementId",value:function(n){return"".concat(n,"[").concat(this.instanceId,"]")}}]),n}();
/*! http://mths.be/codepointat v0.1.0 by @mathias */
String.prototype.codePointAt||function(){var n=function(n){var u,i;if(null==this)throw TypeError();var r=String(this),f=r.length,t=n?Number(n):0;if(t!=t&&(t=0),!(t<0||t>=f))return i=r.charCodeAt(t),i>=55296&&i<=56319&&f>t+1&&(u=r.charCodeAt(t+1))>=56320&&u<=57343?1024*(i-55296)+u- -9216:i};Object.defineProperty?Object.defineProperty(String.prototype,"codePointAt",{value:n,configurable:!0,writable:!0}):String.prototype.codePointAt=n}();"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(n){var u,i,t,r;if(null==n)throw new TypeError("Cannot convert undefined or null to object");for(u=Object(n),i=1;i<arguments.length;i++)if(t=arguments[i],null!=t)for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&(u[r]=t[r]);return u},writable:!0,configurable:!0});i(2);y=function(){function n(t){if(!function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}(this,n),this.language="en",this.editMode="images",this.modalDialog=null,this.customEditors=new dt,this.customEditors.addEditor("chemistry",{name:"Chemistry",toolbar:"chemistry",icon:"chem.png",confVariable:"chemEnabled",title:"ChemType",tooltip:"Insert a chemistry formula - ChemType"}),this.environment={},this.editionProperties={},this.editionProperties.isNewElement=!0,this.editionProperties.temporalImage=null,this.editionProperties.latexRange=null,this.editionProperties.range=null,this.integrationModel=null,this.contentManager=null,this.browser=function(){var t=navigator.userAgent,n="none";return t.search("Edge/")>=0?n="EDGE":t.search("Chrome/")>=0?n="CHROME":t.search("Trident/")>=0?n="IE":t.search("Firefox/")>=0?n="FIREFOX":t.search("Safari/")>=0&&(n="SAFARI"),n}(),this.listeners=new h,this.serviceProviderProperties={},!("serviceProviderProperties"in t))throw new Error("serviceProviderProperties property missing.");this.serviceProviderProperties=t.serviceProviderProperties}return function(n,t,i){t&&oi(n.prototype,t);i&&oi(n,i)}(n,[{key:"setIntegrationModel",value:function(n){this.integrationModel=n}},{key:"setEnvironment",value:function(n){"editor"in n&&(this.environment.editor=n.editor);"mode"in n&&(this.environment.mode=n.mode);"version"in n&&(this.environment.version=n.version)}},{key:"getModalDialog",value:function(){return this.modalDialog}},{key:"init",value:function(){var t=this,i;n.initialized?this.listeners.fire("onLoad",{}):(i=h.newListener("onInit",function(){var n=o.getService("configurationjs","","get"),i=JSON.parse(n);u.addConfiguration(i);u.addConfiguration(gt);s.language=t.language;t.listeners.fire("onLoad",{})}),o.addListener(i),o.init(this.serviceProviderProperties),n.initialized=!0)}},{key:"addListener",value:function(n){this.listeners.add(n)}},{key:"beforeUpdateFormula",value:function(t,i){var r=new b;return r.mathml=t,r.wirisProperties={},null!=i&&Object.keys(i).forEach(function(n){r.wirisProperties[n]=i[n]}),r.language=this.language,r.editMode=this.editMode,this.listeners.fire("onBeforeFormulaInsertion",r)?{}:n.globalListeners.fire("onBeforeFormulaInsertion",r)?{}:{mathml:r.mathml,wirisProperties:r.wirisProperties}}},{key:"insertFormula",value:function(n,t,i,r){var u={},f;return i?"latex"===this.editMode?((u.latex=l.getLatexFromMathML(i),this.integrationModel.fillNonLatexNode&&!u.latex)?(f=new b,f.editMode=this.editMode,f.windowTarget=t,f.focusElement=n,f.latex=u.latex,this.integrationModel.fillNonLatexNode(f,t,i)):u.node=t.document.createTextNode("$$".concat(u.latex,"$$")),this.insertElementOnSelection(u.node,n,t)):(u.node=c.mathmlToImgObject(t.document,i,r,this.language),this.insertElementOnSelection(u.node,n,t)):this.insertElementOnSelection(null,n,t),u}},{key:"afterUpdateFormula",value:function(t,i,r,u){var f=new b;return f.editMode=this.editMode,f.windowTarget=i,f.focusElement=t,f.node=r,f.latex=u,this.listeners.fire("onAfterFormulaInsertion",f)?{}:(n.globalListeners.fire("onAfterFormulaInsertion",f),{})}},{key:"placeCaretAfterNode",value:function(n){var t,i,r;this.integrationModel.getSelection();t=n.ownerDocument;void 0!==t.getSelection&&n.parentElement&&(i=t.createRange(),i.setStartAfter(n),i.collapse(!0),r=t.getSelection(),r.removeAllRanges(),r.addRange(i),t.body.focus())}},{key:"insertElementOnSelection",value:function(n,t,i){var f,o,l,e,u,s,h,v,c;this.editionProperties.isNewElement?n?"textarea"===t.type?r.updateTextArea(t,n.textContent):document.selection&&0===document.getSelection?(f=i.document.selection.createRange(),(i.document.execCommand("InsertImage",!1,n.src),"parentElement"in f||(i.document.execCommand("delete",!1),f=i.document.selection.createRange(),i.document.execCommand("InsertImage",!1,n.src)),"parentElement"in f)&&(o=f.parentElement(),"IMG"===o.nodeName.toUpperCase()?o.parentNode.replaceChild(n,o):f.pasteHTML(r.createObjectCode(n)))):(l=this.integrationModel.getSelection(),e=null,this.editionProperties.range?(e=this.editionProperties.range,this.editionProperties.range=null):e=l.getRangeAt(0),e.deleteContents(),u=e.startContainer,s=e.startOffset,3===u.nodeType?(u=u.splitText(s)).parentNode.insertBefore(n,u):1===u.nodeType&&u.insertBefore(n,u.childNodes[s]),this.placeCaretAfterNode(n)):"textarea"===t.type?t.focus():(h=this.integrationModel.getSelection(),(h.removeAllRanges(),this.editionProperties.range)&&(v=this.editionProperties.range,this.editionProperties.range=null,h.addRange(v))):this.editionProperties.latexRange?document.selection&&0===document.getSelection?(this.editionProperties.isNewElement=!0,this.editionProperties.latexRange.select(),this.insertElementOnSelection(n,t,i)):(this.editionProperties.latexRange.deleteContents(),this.editionProperties.latexRange.insertNode(n),this.placeCaretAfterNode(n)):"textarea"===t.type?(c=void 0!==this.integrationModel.getSelectedItem?this.integrationModel.getSelectedItem(t,!1):r.getSelectedItemOnTextarea(t),r.updateExistingTextOnTextarea(t,n.textContent,c.startPosition,c.endPosition)):(n&&"img"===n.nodeName.toLowerCase()?(a.removeImgDataAttributes(this.editionProperties.temporalImage),a.clone(n,this.editionProperties.temporalImage)):this.editionProperties.temporalImage.remove(),this.placeCaretAfterNode(this.editionProperties.temporalImage))}},{key:"openModalDialog",value:function(n,t){var f,c=this,k,d,v,i,g,y,p,a,s,it,rt;this.editMode="images";try{t?(n.contentWindow.focus(),k=n.contentWindow.getSelection(),this.editionProperties.range=k.getRangeAt(0)):(n.focus(),d=getSelection(),this.editionProperties.range=d.getRangeAt(0))}catch(n){this.editionProperties.range=null}if(void 0===t&&(t=!0),this.editionProperties.latexRange=null,n)if(f=void 0!==this.integrationModel.getSelectedItem?this.integrationModel.getSelectedItem(n,t):r.getSelectedItem(n,t)){if(!f.caretPosition&&r.containsClass(f.node,u.get("imageClassName")))this.editionProperties.temporalImage=f.node,this.editionProperties.isNewElement=!1;else if(3===f.node.nodeType)if(this.integrationModel.getMathmlFromTextNode)v=this.integrationModel.getMathmlFromTextNode(f.node,f.caretPosition),v&&(this.editMode="latex",this.editionProperties.isNewElement=!1,this.editionProperties.temporalImage=document.createElement("img"),this.editionProperties.temporalImage.setAttribute(u.get("imageMathmlAttribute"),e.safeXmlEncode(v)));else if(i=l.getLatexFromTextNode(f.node,f.caretPosition),i&&(g=l.getMathMLFromLatex(i.latex),this.editMode="latex",this.editionProperties.isNewElement=!1,this.editionProperties.temporalImage=document.createElement("img"),this.editionProperties.temporalImage.setAttribute(u.get("imageMathmlAttribute"),e.safeXmlEncode(g)),y=t?n.contentWindow:window,"textarea"!==n.tagName.toLowerCase()))if(document.selection){for(p=0,a=i.startNode.previousSibling;a;)p+=r.getNodeLength(a),a=a.previousSibling;this.editionProperties.latexRange=y.document.selection.createRange();this.editionProperties.latexRange.moveToElementText(i.startNode.parentNode);this.editionProperties.latexRange.move("character",p+i.startPosition);this.editionProperties.latexRange.moveEnd("character",i.latex.length+4)}else this.editionProperties.latexRange=y.document.createRange(),this.editionProperties.latexRange.setStart(i.startNode,i.startPosition),this.editionProperties.latexRange.setEnd(i.endNode,i.endPosition)}else"textarea"===n.tagName.toLowerCase()&&(this.editMode="latex");for(var nt=u.get("editorAttributes").split(", "),w={},b=0,ut=nt.length;b<ut;b+=1){var tt=nt[b].split("="),ft=tt[0],et=tt[1];w[ft]=et}var o={},ot=u.get("editorParameters"),st=this.integrationModel.editorParameters;Object.assign(o,w,ot);Object.assign(o,w,st);o.language=this.language;o.rtl=this.integrationModel.rtl;s={};(s.editorAttributes=o,s.language=this.language,s.customEditors=this.customEditors,s.environment=this.environment,null==this.modalDialog)?(this.modalDialog=new ei(o),this.contentManager=new bt(s),it=h.newListener("onLoad",function(){if(c.contentManager.isNewElement=c.editionProperties.isNewElement,null!=c.editionProperties.temporalImage){var n=e.safeXmlDecode(c.editionProperties.temporalImage.getAttribute(u.get("imageMathmlAttribute")));c.contentManager.mathML=n}}),this.contentManager.addListener(it),this.contentManager.init(),this.modalDialog.setContentManager(this.contentManager),this.contentManager.setModalDialogInstance(this.modalDialog)):(this.contentManager.isNewElement=this.editionProperties.isNewElement,null!=this.editionProperties.temporalImage)&&(rt=e.safeXmlDecode(this.editionProperties.temporalImage.getAttribute(u.get("imageMathmlAttribute"))),this.contentManager.mathML=rt);this.contentManager.setIntegrationModel(this.integrationModel);this.modalDialog.open()}},{key:"getCustomEditors",value:function(){return this.customEditors}}],[{key:"addGlobalListener",value:function(t){n.globalListeners.add(t)}},{key:"globalListeners",get:function(){return n._globalListeners},set:function(t){n._globalListeners=t}},{key:"initialized",get:function(){return n._initialized},set:function(t){n._initialized=t}}]),n}();y._globalListeners=new h;y._initialized=!1;window.wrs_addPluginListener=function(n){var t,i,r;console.warn("Deprecated method");i=n[t=Object.keys(n)[0]];r=h.newListener(t,i);y.addGlobalListener(r)};window.wrs_initParse=function(n,t){return console.warn("Deprecated method. Use Parser.endParse instead."),c.initParse(n,t)};window.wrs_endParse=function(n,t,i){return console.warn("Deprecated method. Use Parser.endParse instead."),c.endParse(n,t,i)};v=function(){function n(t){var i=this;if(function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}(this,n),this.language="en",this.serviceProviderProperties={},"serviceProviderProperties"in t&&(this.serviceProviderProperties=t.serviceProviderProperties),this.configurationService="","configurationService"in t&&(this.serviceProviderProperties.URI=t.configurationService,console.warn("Deprecated property configurationService. Use serviceParameters on instead.",[t.configurationService])),this.version="version"in t?t.version:"",this.target=null,!("target"in t))throw new Error("IntegrationModel constructor error: target property missed.");this.target=t.target;"scriptName"in t&&(this.scriptName=t.scriptName);this.callbackMethodArguments={};"callbackMethodArguments"in t&&(this.callbackMethodArguments=t.callbackMethodArguments);this.environment={};"environment"in t&&(this.environment=t.environment);this.isIframe=!1;null!=this.target&&(this.isIframe="IFRAME"===this.target.tagName.toUpperCase());this.editorObject=null;"editorObject"in t&&(this.editorObject=t.editorObject);this.rtl=!1;"rtl"in t&&(this.rtl=t.rtl);this.managesLanguage=!1;"managesLanguage"in t&&(this.managesLanguage=t.managesLanguage);this.temporalImageResizing=!1;this.core=null;this.listeners=new h;"integrationParameters"in t&&n.integrationParameters.forEach(function(n){if(n in t.integrationParameters){var r=t.integrationParameters[n];0!==Object.keys(r).length&&(i[n]=r)}})}return function(n,t,i){t&&si(n.prototype,t);i&&si(n,i)}(n,[{key:"init",value:function(){var i=this,u,f,e,s,c,n,t;this.language=this.getLanguage();u=h.newListener("onLoad",function(){i.callbackFunction(i.callbackMethodArguments)});-1!==this.serviceProviderProperties.URI.indexOf("configuration")&&(f=this.serviceProviderProperties.URI,e=o.getServerLanguageFromService(f),this.serviceProviderProperties.server=e,s=this.serviceProviderProperties.URI.indexOf("configuration"),c=this.serviceProviderProperties.URI.substring(0,s),this.serviceProviderProperties.URI=c);n=this.serviceProviderProperties.URI;n=0===n.indexOf("/")||0===n.indexOf("http")?n:r.concatenateUrl(this.getPath(),n);this.serviceProviderProperties.URI=n;t={};t.serviceProviderProperties=this.serviceProviderProperties;this.setCore(new y(t));this.core.addListener(u);this.core.language=this.language;this.core.init();this.core.setEnvironment(this.environment)}},{key:"getPath",value:function(){var i;if(void 0===this.scriptName)throw new Error("scriptName property needed for getPath.");for(var t=document.getElementsByTagName("script"),r="",n=0;n<t.length;n+=1)i=t[n].src.lastIndexOf(this.scriptName),i>=0&&(r=t[n].src.substr(0,i-1));return r}},{key:"setLanguage",value:function(n){this.language=n}},{key:"setCore",value:function(n){this.core=n;n.setIntegrationModel(this)}},{key:"getCore",value:function(){return this.core}},{key:"setTarget",value:function(n){this.target=n;this.isIframe="IFRAME"===this.target.tagName.toUpperCase()}},{key:"setEditorObject",value:function(n){this.editorObject=n}},{key:"openNewFormulaEditor",value:function(){this.core.editionProperties.isNewElement=!0;this.core.openModalDialog(this.target,this.isIframe)}},{key:"openExistingFormulaEditor",value:function(){this.core.editionProperties.isNewElement=!1;this.core.openModalDialog(this.target,this.isIframe)}},{key:"updateFormula",value:function(n){var i,r,t;return this.editorParameters&&(n=com.wiris.editor.util.EditorUtils.addAnnotation(n,"application/vnd.wiris.mtweb-params+json",JSON.stringify(this.editorParameters))),this.isIframe?(i=this.target.contentWindow,r=this.target.contentWindow):(i=this.target,r=window),t=this.core.beforeUpdateFormula(n,null),t&&(t=this.insertFormula(i,r,t.mathml,t.wirisProperties))?this.core.afterUpdateFormula(t.focusElement,t.windowTarget,t.node,t.latex):""}},{key:"insertFormula",value:function(n,t,i,r){return this.core.insertFormula(n,t,i,r)}},{key:"getSelection",value:function(){return this.isIframe?(this.target.contentWindow.focus(),this.target.contentWindow.getSelection()):(this.target.focus(),window.getSelection())}},{key:"addEvents",value:function(){var n=this,t=this.isIframe?this.target.contentWindow.document:this.target;r.addElementEvents(t,function(t,i){n.doubleClickHandler(t,i)},function(t,i){n.mousedownHandler(t,i)},function(t,i){n.mouseupHandler(t,i)})}},{key:"doubleClickHandler",value:function(n){var t,i;"img"===n.nodeName.toLowerCase()&&(this.core.getCustomEditors().disable(),t=u.get("imageCustomEditorName"),n.hasAttribute(t)&&(i=n.getAttribute(t),this.core.getCustomEditors().enable(i)),r.containsClass(n,u.get("imageClassName"))&&(this.core.editionProperties.temporalImage=n,this.core.editionProperties.isNewElement=!0,this.openExistingFormulaEditor()))}},{key:"mouseupHandler",value:function(){var n=this;this.temporalImageResizing&&setTimeout(function(){a.fixAfterResize(n.temporalImageResizing)},10)}},{key:"mousedownHandler",value:function(n){"img"===n.nodeName.toLowerCase()&&r.containsClass(n,u.get("imageClassName"))&&(this.temporalImageResizing=n)}},{key:"getLanguage",value:function(){return this.getBrowserLanguage()}},{key:"getBrowserLanguage",value:function(){return navigator.userLanguage?navigator.userLanguage.substring(0,2):navigator.language?navigator.language.substring(0,2):"en"}},{key:"callbackFunction",value:function(){var n=this,t=h.newListener("onTargetReady",function(){n.addEvents(n.target)});this.listeners.add(t)}},{key:"notifyWindowClosed",value:function(){}},{key:"getMathmlFromTextNode",value:function(){}},{key:"fillNonLatexNode",value:function(){}},{key:"getSelectedItem",value:function(){}}]),n}();v.prototype.getMathmlFromTextNode=void 0;v.prototype.fillNonLatexNode=void 0;v.prototype.getSelectedItem=void 0;v.integrationParameters=["serviceProviderProperties","editorParameters"];g=function(){function n(t){var i;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}(this,n),(i=yi(this,p(n).call(this,t))).integrationFolderName="ckeditor_wiris",i}return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}});t&&li(n,t)}(n,v),function(n,t,i){t&&ci(n.prototype,t);i&&ci(n,i)}(n,[{key:"init",value:function(){d(p(n.prototype),"init",this).call(this);var t=this.editorObject;"wiriseditorparameters"in t.config&&u.update("editorParameters",t.config.wiriseditorparameters)}},{key:"getLanguage",value:function(){return this.editorObject.langCode}},{key:"getPath",value:function(){return this.editorObject.plugins.ckeditor_wiris.path}},{key:"addEditorListeners",value:function(){var n=this.editorObject;void 0!==n.config.wirislistenersdisabled&&n.config.wirislistenersdisabled?(n.on("instanceReady",function(){this.checkElement()}.bind(this)),n.resetDirty()):(n.setData(c.initParse(n.getData())),n.on("focus",function(n){WirisPlugin.currentInstance=WirisPlugin.instances[n.editor.name]}),n.on("contentDom",function(){n.on("doubleclick",function(n){("img"==n.data.element.$.nodeName.toLowerCase()&&r.containsClass(n.data.element.$,u.get("imageClassName"))||r.containsClass(n.data.element.$,u.get("CASClassName")))&&(n.data.dialog=null)}.bind(this))}.bind(this)),n.on("setData",function(n){n.data.dataValue=c.initParse(n.data.dataValue||"")}.bind(this)),n.on("afterSetData",function(){void 0!==c.observer&&Array.prototype.forEach.call(document.getElementsByClassName("Wirisformula"),function(n){c.observer.observe(n)})}.bind(this)),n.on("getData",function(n){n.data.dataValue=c.endParse(n.data.dataValue||"")}.bind(this)),n.on("mode",function(){this.checkElement()}.bind(this)),this.checkElement())}},{key:"checkElement",value:function(){var n,t=this.editorObject,i=document.getElementById("cke_contents_"+t.name)?document.getElementById("cke_contents_"+t.name):document.getElementById("cke_"+t.name),f=!1,r,e,u,o;if(!(n=t.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?t.container.$:i.getElementsByTagName("iframe")[0])){for(e in i.classList)if(u=i.classList[e],-1!=u.search("cke_\\d")){r=u;break}r&&(n=document.getElementById(r+"_contents"),f=!0)}n.wirisActive||(t.elementMode===CKEDITOR.ELEMENT_MODE_INLINE?("TEXTAREA"===n.tagName?(o=document.getElementsByClassName("cke_textarea_inline"),Array.prototype.forEach.call(o,function(n){this.setTarget(n);this.addEvents()})):(this.setTarget(n),this.addEvents()),n.wirisActive=!0):(n.contentWindow||f)&&(this.setTarget(n),this.addEvents(),n.wirisActive=!0))}},{key:"doubleClickHandler",value:function(n,t){if("img"==n.nodeName.toLowerCase()&&r.containsClass(n,u.get("imageClassName"))){void 0!==t.stopPropagation?t.stopPropagation():t.returnValue=!1;this.core.getCustomEditors().disable();var i=n.getAttribute(u.get("imageCustomEditorName"));i&&this.core.getCustomEditors().enable(i);this.core.editionProperties.temporalImage=n;this.openExistingFormulaEditor()}}},{key:"getCorePath",value:function(){return CKEDITOR.plugins.getPath(this.integrationFolderName)}},{key:"getSelection",value:function(){return this.editorObject.editable().$.focus(),this.editorObject.getSelection().getNative()}},{key:"callbackFunction",value:function(){d(p(n.prototype),"callbackFunction",this).call(this);this.addEditorListeners()}}]),n}();CKEDITOR.plugins.add("ckeditor_wiris",{init:function(n){n.ui.addButton("ckeditor_wiris_formulaEditor",{label:"Insert a math equation - MathType",command:"ckeditor_wiris_openFormulaEditor",icon:CKEDITOR.plugins.getPath("ckeditor_wiris")+"./icons/formula.png"});n.ui.addButton("ckeditor_wiris_formulaEditorChemistry",{label:"Insert a chemistry formula - ChemType",command:"ckeditor_wiris_openFormulaEditorChemistry",icon:CKEDITOR.plugins.getPath("ckeditor_wiris")+"./icons/chem.png"});var t="img[align,";t+=u.get("imageMathmlAttribute");t+=",src,alt](!Wirisformula)";n.addCommand("ckeditor_wiris_openFormulaEditor",{"async":!1,canUndo:!0,editorFocus:!0,allowedContent:t,requiredContent:t,exec:function(n){var t=WirisPlugin.instances[n.name];t.core.getCustomEditors().disable();t.openNewFormulaEditor()}});n.addCommand("ckeditor_wiris_openFormulaEditorChemistry",{"async":!1,canUndo:!0,editorFocus:!0,allowedContent:t,requiredContent:t,exec:function(n){var t=WirisPlugin.instances[n.name];t.core.getCustomEditors().enable("chemistry");t.openNewFormulaEditor()}});n.on("instanceReady",function(){var t={},i;t.editorObject=n;t.target=n.container.$.querySelector("*[class^=cke_wysiwyg]");t.serviceProviderProperties={};t.serviceProviderProperties.URI="integration";t.serviceProviderProperties.server="aspx";t.version="7.17.0.1426";t.scriptName="plugin.js";t.environment={};t.environment.editor="CKEditor4";"wiriscontextpath"in n.config&&(t.configurationService=n.config.wiriscontextpath+t.configurationService,console.warn("Deprecated property wiriscontextpath. Use mathTypeParameters on instead.",n.config.wiriscontextpath));"mathTypeParameters"in n.config&&(t.integrationParameters=n.config.mathTypeParameters);i=new g(t);i.init();i.listeners.fire("onTargetReady",{});WirisPlugin.instances[n.name]=i;WirisPlugin.currentInstance=i})}});vi=function(){function n(){!function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}(this,n)}return function(n,t,i){t&&ai(n.prototype,t);i&&ai(n,i)}(n,null,[{key:"init",value:function(){n.testServices()}},{key:"testServices",value:function(){var n;console.log("Testing configuration service...");console.log(o.getService("configurationjs","","get"));console.log("Testing showimage service...");(n=[]).mml='<math xmlns="http://www.w3.org/1998/Math/MathML"><msup><mi>x<\/mi><mn>2<\/mn><\/msup><\/math>';console.log(o.getService("showimage",n));console.log("Testing createimage service...");(n=[]).mml='<math xmlns="http://www.w3.org/1998/Math/MathML"><msup><mi>x<\/mi><mn>2<\/mn><\/msup><\/math>';console.log(o.getService("createimage",n,"post"));console.log("Testing MathML2Latex service...");(n=[]).service="mathml2latex";n.mml='<math xmlns="http://www.w3.org/1998/Math/MathML"><msup><mi>x<\/mi><mn>2<\/mn><\/msup><\/math>';console.log(o.getService("service",n));console.log("Testing Latex2MathML service...");(n=[]).service="latex2mathml";n.latex="x^2";console.log(o.getService("service",n));console.log("Testing Mathml2Accesible service...");(n=[]).service="mathml2accessible";n.mml='<math xmlns="http://www.w3.org/1998/Math/MathML"><msup><mi>x<\/mi><mn>2<\/mn><\/msup><\/math>';console.log(o.getService("service",n))}}]),n}();window.WirisPlugin={Core:y,Parser:c,Image:a,Util:r,Configuration:u,Listeners:h,IntegrationModel:v,currentInstance:null,instances:{},CKEditor4Integration:g,Latex:l,Test:vi}}]);